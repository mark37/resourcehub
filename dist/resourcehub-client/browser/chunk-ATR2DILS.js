import{a as tt,d as it,e as se}from"./chunk-AK2PK4S4.js";import{a as ae,b as le,c as et,d as Q}from"./chunk-U6MM7ABV.js";import{a as oe}from"./chunk-OVHDP56M.js";import{a as re,b as nt}from"./chunk-EBK7TJOP.js";import"./chunk-CH35XRDS.js";import{b as Oe,c as D,e as V,f as I,g as We,h as Be,i as M,j as T,k as qe,l as Xe,n as Re,o as Ue,p as q,q as X,r as R,u as Ge,v as ze,w as Qe,x as U,y as ee}from"./chunk-75IZLKSV.js";import{a as L}from"./chunk-WZ454HCT.js";import{A as J,Ba as y,Bb as te,Ca as C,Da as w,Db as ie,E as P,F as K,Fa as Z,Ga as Le,Gb as G,Ib as He,J as we,Ja as Ve,Jb as O,K as g,Ka as ge,L as u,La as ue,P as F,Qb as Je,Rb as Ke,Tb as Ze,Ua as H,Va as Fe,Wa as B,X as a,Xa as j,Y as E,Ya as Ae,Za as $,_b as ne,aa as _,ba as _e,bc as $e,ca as l,cc as k,dc as z,fa as W,ga as Se,gb as je,ha as Me,hb as De,ia as Ee,ja as o,jb as Ne,ka as n,la as c,ma as x,mb as fe,na as f,oa as d,ob as N,p as ye,ra as Pe,rb as Ye,sa as Ie,ta as Te,va as s,w as Ce,wa as S,xa as v,ya as A,za as ke}from"./chunk-QPUKBYNP.js";import{a as xe,b as be,f as ve}from"./chunk-GAL4ENT6.js";var pt=ve(et());function ot(){return new Be({id:new M(null),date_published:new M(null),date_end:new M(null),lib_posting_category_id:new M(null),title:new M(null),description:new M(null),slot:new M(null),address:new M(null),barangay_code:new M(null),coordinates:new M(null),no_scholar_flag:new M(!1),no_ofw_flag:new M(!1),no_shiftee_flag:new M(!1),no_irregular_flag:new M(!1)})}var ct=["confirmCode"],at=(()=>{class i{onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete(this.url,this.delete_id).subscribe({next:()=>{this.is_loading=!1,this.message="Code Match, Item was deleted",this.closeModal("item-deleted")},error:e=>{console.log(e),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.message="Code mismatch, please try again")}generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(Math.random()*1e3).toString().padStart(4,"0")}closeModal(e){this.toggleModal.emit(e)}constructor(e){this.http=e,this.toggleModal=new F,this.faTrash=He,this.confirm_code="0000",this.is_loading=!1,this.message=null}ngOnChanges(e){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}static{this.\u0275fac=function(r){return new(r||i)(E(L))}}static{this.\u0275cmp=P({type:i,selectors:[["app-delete-item"]],viewQuery:function(r,t){if(r&1&&Pe(ct,5),r&2){let p;Ie(p=Te())&&(t.inputElement=p.first)}},inputs:{url:"url",delete_id:"delete_id",delete_desc:"delete_desc"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[we,Z],decls:31,vars:9,consts:[["confirmCode",""],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-blue-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","minlength","4","maxlength","4","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup.enter","ngModelChange","ngModel"],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-blue-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-blue-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"px-5","mx-10","mt-5","italic","text-sm","text-blue-500"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(r,t){if(r&1){let p=x();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),s(5),n()(),o(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),s(10),n(),o(11,"div",10)(12,"span",11),s(13,"Delete Code"),n(),o(14,"span",12),s(15),n()(),o(16,"div",10)(17,"label",13),s(18,"Enter Code"),n(),o(19,"input",14,0),f("keyup.enter",function(){return g(p),u(t.onSubmit())}),w("ngModelChange",function(b){return g(p),C(t.confirmation_code,b)||(t.confirmation_code=b),u(b)}),n()(),o(21,"div",15)(22,"button",16),f("click",function(){return g(p),u(t.onSubmit())}),c(23,"fa-icon",17),s(24," Delete "),n()()(),o(25,"div",18),s(26),n()()(),o(27,"div",19)(28,"button",20),f("click",function(){return g(p),u(t.closeModal("delete-item"))}),s(29,"Cancel"),n()()()()(),c(30,"div",21)}r&2&&(a(5),A(" Delete ",t.delete_desc,": ",t.delete_id," "),a(5),v(" Your are about to delete a ",t.delete_desc," record. Please enter the generated delete code in order to proceed. "),a(5),S(t.confirm_code),a(4),y("ngModel",t.confirmation_code),a(3),l("disabled",!t.confirmation_code||t.is_loading),a(),l("icon",t.faTrash),a(3),v(" ",t.message," "),a(2),l("disabled",t.is_loading))},dependencies:[z,k,U,D,I,Ge,ze,T]})}}return i})();var _t=()=>({standalone:!0});function gt(i,m){if(i&1&&(o(0,"option",13),s(1),n()),i&2){let e=m.$implicit;l("value",e.code),a(),S(e.name)}}function ut(i,m){if(i&1&&(o(0,"option",13),s(1),n()),i&2){let e=m.$implicit;l("value",e.code),a(),S(e.name)}}function ft(i,m){if(i&1){let e=x();o(0,"div",24)(1,"button",25),f("click",function(){g(e);let t=d();return u(t.toggleMap())}),c(2,"fa-icon",26),s(3),n()()}if(i&2){let e=d();a(2),l("icon",e.faLocationDot),a(),v(" ",e.postingForm.value.id?"Update":"Tag"," location ")}}function ht(i,m){if(i&1&&c(0,"map-marker",29),i&2){let e=m.$implicit,r=d(2);l("position",e)("options",r.markerOptions)}}function xt(i,m){if(i&1){let e=x();o(0,"div",5)(1,"div",27)(2,"google-map",28),f("mapClick",function(t){g(e);let p=d();return u(p.addMarker(t))}),Me(3,ht,1,2,"map-marker",29,Se),n()(),o(5,"div",30)(6,"div",31),s(7),n(),o(8,"div",27)(9,"button",32),f("click",function(){g(e);let t=d();return u(t.saveLongLat())}),s(10," Save Location "),n()()()()}if(i&2){let e=d();a(2),l("options",e.options),a(),Ee(e.markerPositions),a(4),v(" ",e.markerPositions[0]?e.markerPositions[0].lat+", "+e.markerPositions[0].lng:""," "),a(2),l("disabled",!e.markerPositions[0])}}function bt(i,m){if(i&1&&(o(0,"div"),c(1,"input",46),o(2,"label"),s(3),n()()),i&2){let e=m.$implicit;a(),l("formControlName",e.var_name),_e("id",e.var_name),a(),_e("for",e.var_name),a(),S(e.label)}}function vt(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=d(4);l("icon",e.faSave)}}function yt(i,m){if(i&1&&c(0,"fa-icon",52),i&2){let e=d(4);l("icon",e.faCircleNotch)}}function Ct(i,m){if(i&1){let e=x();o(0,"button",51),f("click",function(){g(e);let t=d(3);return u(t.toggleMyModal("delete-item"))}),_(1,vt,1,1,"fa-icon",49)(2,yt,1,1,"fa-icon",50),s(3," Delete "),n()}if(i&2){let e=d(3);a(),l("ngIf",!e.isSaving),a(),l("ngIf",e.isSaving)}}function wt(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=d(3);l("icon",e.faSave)}}function St(i,m){if(i&1&&c(0,"fa-icon",52),i&2){let e=d(3);l("icon",e.faCircleNotch)}}function Mt(i,m){if(i&1){let e=x();_(0,Ct,4,2,"button",47),o(1,"button",48),f("click",function(){g(e);let t=d(2);return u(t.onSubmit())}),_(2,wt,1,1,"fa-icon",49)(3,St,1,1,"fa-icon",50),s(4," Save "),n()}if(i&2){let e=d(2);l("ngIf",e.postingForm.value.id),a(),l("disabled",!e.postingForm.valid),a(),l("ngIf",!e.isSaving),a(),l("ngIf",e.isSaving)}}function Et(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=d(3);l("icon",e.faUpload)}}function Pt(i,m){if(i&1&&c(0,"fa-icon",52),i&2){let e=d(3);l("icon",e.faCircleNotch)}}function It(i,m){if(i&1){let e=x();o(0,"button",53),f("click",function(){g(e);let t=d(2);return u(t.onSubmit(!0))}),_(1,Et,1,1,"fa-icon",49)(2,Pt,1,1,"fa-icon",50),s(3," Publish "),n()}if(i&2){let e=d(2);l("disabled",!e.postingForm.valid),a(),l("ngIf",!e.isSaving),a(),l("ngIf",e.isSaving)}}function Tt(i,m){if(i&1&&(o(0,"div",33)(1,"div",34),_(2,bt,4,4,"div",35),n(),o(3,"div",36)(4,"div",37)(5,"span",11),s(6,"Text Details"),n(),o(7,"span",38),s(8,"Add details for the posting"),n()(),o(9,"div",39),s(10),n()(),o(11,"div",40)(12,"span",41),s(13,"Content"),n(),o(14,"div",42),c(15,"quill-editor",43),n()(),o(16,"div",44),_(17,Mt,5,4)(18,It,4,3,"button",45),n()()),i&2){let e=d();a(2),l("ngForOf",e.requirementList),a(8),v(" Coordinates: ",e.geoLocation?e.geoLocation.lat+", "+e.geoLocation.lng:""," "),a(5),l("modules",e.editorConfig),a(2),W(!e.postingForm.value.id||e.postingForm.value.id&&!e.postingForm.value.date_published?17:-1),a(),W(!e.postingForm.value.id||e.postingForm.value.id&&!e.postingForm.value.date_published?18:-1)}}function kt(i,m){if(i&1){let e=x();o(0,"app-delete-item",54),f("toggleModal",function(t){g(e);let p=d();return u(p.toggleMyModal(t))}),n()}if(i&2){let e=d();l("url","posting-information/")("delete_id",e.postingForm.value.id)("delete_desc","Posting Item")}}var ce=(()=>{class i{toggleMyModal(e){e==="item-deleted"?(this.modals["delete-item"]=!1,this.closeComponent()):this.modals[e]=!this.modals[e]}addMarker(e){e?.latLng&&(this.markerPositions[0]=e?.latLng?.toJSON())}onSubmit(e){if(this.isSaving=!0,e){let r=H(new Date,"yyyy-MM-dd","en","Asia/Manila");this.postingForm.patchValue({date_published:r})}this.http.post("posting-information",this.postingForm.value).subscribe({next:r=>{console.log(r),this.isSaving=!1,this.closeComponent()},error:r=>console.log(r)})}saveLongLat(){this.geoLocation=this.markerPositions[0],this.postingForm.patchValue({coordinates:{latitude:this.geoLocation.lat,longitude:this.geoLocation.lng}}),this.toggleMap()}toggleMap(){this.showGoogleMap=!this.showGoogleMap}loadDemog(){this.http.get("psgc/municipalities/"+this.municipality,{params:{include:"barangays"}}).subscribe({next:e=>{this.barangays=e.data.barangays},error:e=>console.log(e)})}updateValidators(){this.postingForm.value.lib_posting_category_id==="1"?this.postingForm.controls.coordinates.enable():this.postingForm.controls.coordinates.disable()}deletePost(){this.http.delete("posting-information/",this.postingForm.value.id).subscribe({next:e=>{console.log(e)},error:e=>console.log(e)})}createForm(){this.postingForm=this.formBuilder.nonNullable.group({id:[null],date_published:[null],date_end:[null,V.required],lib_posting_category_id:[null,V.required],title:[null,V.required],description:[null,V.required],slot:[null,V.required],address:[null,V.required],barangay_code:[null,V.required],coordinates:[null,V.required],no_scholar_flag:[!1],no_ofw_flag:[!1],no_shiftee_flag:[!1],no_irregular_flag:[!1]}),console.log(this.selected_posting),this.selected_posting&&(this.municipality=this.selected_posting.barangay.psgc_10_digit_code.substring(0,7).padEnd(10,"0"),this.loadDemog(),this.postingForm.patchValue(be(xe({},this.selected_posting),{coordinates:{latitude:this.selected_posting.latitude,longitude:this.selected_posting.longitude}})),this.markerPositions=[{lat:this.selected_posting.latitude,lng:this.selected_posting.longitude}],this.geoLocation=this.markerPositions[0],this.selected_posting.date_published&&this.postingForm.disable())}loadLibraries(){this.http.get("psgc/provinces/0306900000",{params:{include:"municipalities"}}).subscribe({next:e=>{this.municipalities=e.data.municipalities,this.createForm()},error:e=>console.log(e)})}closeComponent(){this.toggleModal.emit()}constructor(e,r){this.http=e,this.formBuilder=r,this.toggleModal=new F,this.faUpload=Je,this.faSave=G,this.faArrowLeft=O,this.faLocationDot=Ze,this.faCircleNotch=N,this.postingForm=ot(),this.isSaving=!1,this.min_date=H(new Date,"yyyy-MM-dd","en","Asia/manila"),this.editorContent="",this.submittedContent="",this.editorConfig={toolbar:[["bold","italic","underline"],[{indent:"-1"},{indent:"+1"}],[{list:"ordered"},{list:"bullet"}]]},this.requirementList=[{label:"No existing scholarship",var_name:"no_scholar_flag"},{label:"Non-OFW parents",var_name:"no_ofw_flag"},{label:"No shiftee",var_name:"no_shiftee_flag"},{label:"No Irregular",var_name:"no_irregular_flag"}],this.partTimeList=[],this.modals=[],this.municipalities=[],this.barangays=[],this.isLoading=!1,this.showGoogleMap=!1,this.options={mapId:"DEMO_MAP_ID",center:{lat:15.475578308105469,lng:120.59635162353516},zoom:14,fullscreenControl:!1,draggableCursor:"default",draggingCursor:"grab"},this.center={lat:15.475578308105469,lng:120.59635162353516},this.zoom=4,this.markerOptions={draggable:!1},this.markerPositions=[]}ngOnInit(){this.isSaving=!1,this.loadLibraries()}static{this.\u0275fac=function(r){return new(r||i)(E(L),E(Qe))}}static{this.\u0275cmp=P({type:i,selectors:[["app-posting-page"]],inputs:{selected_posting:"selected_posting"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[Z],decls:47,vars:14,consts:[[1,"flex","flex-col","min-h-screen"],[1,"font-bold","text-xl","text-blue-600","mb-3"],[3,"click"],[3,"icon"],[3,"formGroup"],[1,"flex","flex-col"],[1,"flex","flex-row","w-full","bg-white"],[1,"w-full","p-3","grid","grid-cols-4","gap-x-5"],[1,"col-span-2"],[1,"font-semibold","w-36","mt-1"],["type","text","formControlName","title",1,"input-txt"],[1,"font-semibold"],["formControlName","lib_posting_category_id",1,"input-txt",3,"change"],[3,"value"],["type","number","formControlName","slot",1,"input-txt"],["type","date","formControlName","date_end",1,"input-txt",3,"min"],[1,"input-txt",3,"change","ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],["formControlName","barangay_code",1,"input-txt"],["type","text","formControlName","address",1,"input-txt"],["class","flex justify-center mt-5 col-span-4",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["class","flex flex-col bg-white py-3 px-8 mt-3",4,"ngIf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[1,"flex","justify-center","mt-5","col-span-4"],[1,"btn-blue-nr","px-3",3,"click"],[1,"pr-2",3,"icon"],[1,"flex","justify-center"],["width","700px",1,"w-fit",3,"mapClick","options"],[3,"position","options"],[1,"flex","flex-col","justify-center","mt-3"],[1,"flex","justify-center","italic"],[1,"bg-blue-600","px-5","py-2","rounded-md","text-white","text-sm","disabled:bg-gray-400",3,"click","disabled"],[1,"flex","flex-col","bg-white","py-3","px-8","mt-3"],[1,"grid","grid-cols-4","gap-x-4","my-3"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"text-left","flex","flex-col"],[1,"text-sm"],[1,"flex","justify-end","italic","text-xs"],[1,"flex","flex-col","mt-5"],[1,"font-semibold","text-sm"],[1,"w-full"],["formControlName","description",1,"h-96","w-full","rounded",3,"modules"],[1,"flex","justify-end","my-3"],[1,"disabled:bg-gray-400","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full",3,"disabled"],["type","checkbox",1,"rounded-md","mr-1","text-lg",3,"formControlName"],["class","disabled:bg-gray-400 bg-rose-500 text-white px-8 py-2 font-semibold rounded-full mr-2",3,"click",4,"ngIf"],[1,"disabled:bg-gray-400","bg-orange-400","text-white","px-8","py-2","font-semibold","rounded-full","mr-2",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"disabled:bg-gray-400","bg-rose-500","text-white","px-8","py-2","font-semibold","rounded-full","mr-2",3,"click"],["animation","spin",3,"icon"],[1,"disabled:bg-gray-400","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full",3,"click","disabled"],[3,"toggleModal","url","delete_id","delete_desc"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"span",1)(2,"button",2),f("click",function(){return t.closeComponent()}),c(3,"fa-icon",3),s(4," POST "),n()(),o(5,"form",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),s(11,"Title"),n(),c(12,"input",10),n(),o(13,"div")(14,"label",11),s(15,"Post Type"),n(),o(16,"select",12),f("change",function(){return t.updateValidators()}),o(17,"option",13),s(18,"Part-time Jobs"),n(),o(19,"option",13),s(20,"Scholarship"),n()()(),o(21,"div")(22,"label",11),s(23,"Slots"),n(),c(24,"input",14),n(),o(25,"div")(26,"label",11),s(27,"Deadline date"),n(),c(28,"input",15),n(),o(29,"div")(30,"label",11),s(31,"Municipality"),n(),o(32,"select",16),f("change",function(){return t.loadDemog()}),w("ngModelChange",function(h){return C(t.municipality,h)||(t.municipality=h),h}),_(33,gt,2,2,"option",17),n()(),o(34,"div")(35,"label",11),s(36,"Barangay"),n(),o(37,"select",18),_(38,ut,2,2,"option",17),n()(),o(39,"div")(40,"label",11),s(41,"Address"),n(),c(42,"input",19),n(),_(43,ft,4,2,"div",20),n()()(),_(44,xt,11,3,"div",21)(45,Tt,19,5,"div",22),n()(),_(46,kt,1,3,"app-delete-item",23)),r&2&&(a(3),l("icon",t.faArrowLeft),a(2),l("formGroup",t.postingForm),a(12),l("value",1),a(2),l("value",2),a(9),l("min",t.min_date),a(4),y("ngModel",t.municipality),l("ngModelOptions",Le(13,_t)),a(),l("ngForOf",t.municipalities),a(5),l("ngForOf",t.barangays),a(5),l("ngIf",t.postingForm.value.lib_posting_category_id==="1"),a(),l("ngIf",t.showGoogleMap),a(),l("ngIf",t.geoLocation||t.postingForm.value.lib_posting_category_id==="2"),a(),l("ngIf",t.modals["delete-item"]))},dependencies:[ee,qe,X,R,D,Xe,Oe,q,I,We,Re,Ue,z,k,U,T,se,tt,it,$,B,j,re,at]})}}return i})();var lt=ve(et());var At=(i,m,e)=>({"bg-orange-500 text-white":i,"bg-green-500 text-white":m,"bg-red-500 text-white":e});function jt(i,m){if(i&1&&(o(0,"option",39),s(1),n()),i&2){let e=m.$implicit;l("value",e),a(),S(e)}}function Dt(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=d();l("icon",e.faFilter)}}function Nt(i,m){if(i&1&&c(0,"fa-icon",40),i&2){let e=d();l("icon",e.faCircleNotch)}}function Ot(i,m){if(i&1){let e=x();o(0,"tr",42)(1,"td",43),c(2,"span",44),s(3),n(),o(4,"td"),s(5),c(6,"br"),s(7),c(8,"br"),s(9),n(),o(10,"td",45)(11,"button",46),f("click",function(){let t=g(e).$implicit,p=d(2);return u(p.toggleMyModal("user-details",t))}),s(12," view details "),n()()()}if(i&2){let e=m.$implicit;a(2),l("ngClass",Ve(7,At,e.is_approved===null,e.is_approved===1,e.is_approved===0)),a(),ke(" ",e.user.last_name,", ",e.user.first_name," ",e.user.middle_name," "),a(2),v(" ",e.user.school.desc," "),a(2),v(" ",e.user.email," "),a(2),v(" ",e.user.contact_number," ")}}function Wt(i,m){if(i&1&&(o(0,"tbody"),_(1,Ot,13,11,"tr",41),n()),i&2){let e=d();a(),l("ngForOf",e.applicantList)}}function Bt(i,m){if(i&1&&(o(0,"div",47)(1,"div",48),c(2,"fa-icon",40),n(),o(3,"div",49),s(4," Loading list... "),n()()),i&2){let e=d();a(2),l("icon",e.faCircleNotch)}}function qt(i,m){if(i&1&&c(0,"app-page-controller",50),i&2){let e=d();l("meta",e.meta)}}function Xt(i,m){if(i&1&&c(0,"fa-icon",40),i&2){let e=d(3);l("icon",e.faCircleNotch)}}function Rt(i,m){if(i&1&&c(0,"fa-icon",40),i&2){let e=d(3);l("icon",e.faCircleNotch)}}function Ut(i,m){if(i&1){let e=x();o(0,"div",60)(1,"button",61),f("click",function(){g(e);let t=d(2);return u(t.updateApplicationStatus(!1))}),_(2,Xt,1,1,"fa-icon",20),s(3," Reject "),n(),o(4,"button",62),f("click",function(){g(e);let t=d(2);return u(t.updateApplicationStatus(!0))}),_(5,Rt,1,1,"fa-icon",20),s(6," Approve "),n()()}if(i&2){let e=d(2);a(),l("disabled",e.updating_status),a(),l("ngIf",e.updating_status),a(2),l("disabled",e.updating_status),a(),l("ngIf",e.updating_status)}}function Gt(i,m){if(i&1){let e=x();o(0,"div",51)(1,"div",52)(2,"div",53)(3,"div",54)(4,"div")(5,"button",55),f("click",function(){g(e);let t=d();return u(t.toggleMyModal("user-details"))}),c(6,"fa-icon",3),s(7," Back "),n()(),o(8,"h3",56),s(9," Applicant Information "),n(),c(10,"div"),n(),o(11,"div",57),c(12,"app-user-information",58),n(),_(13,Ut,7,4,"div",59),n()()()}if(i&2){let e=d();a(6),l("icon",e.faArrowLeft),a(6),l("selected_user",e.selected_application.user),a(),l("ngIf",!e.selected_application.is_approved)}}function zt(i,m){i&1&&c(0,"div",63)}var st=(()=>{class i{loadApplicants(e){this.isLoading=!0;let r={posting_id:this.selected_posting.id,show_list:1,per_page:this.per_page,application_status:this.application_status,is_applied:1};this.http.get("posting-application",{params:r}).subscribe({next:t=>{this.applicantList=t.data,this.meta=t.meta,console.log(this.applicantList),this.isLoading=!1},error:t=>console.log(t)})}closeComponent(){this.toggleModal.emit()}toggleMyModal(e,r){this.selected_application=r,this.modals[e]=!this.modals[e]}updateApplicationStatus(e){this.updating_status=!0,this.selected_application.is_approved=e,this.http.update("posting-application/",this.selected_application.id,this.selected_application).subscribe({next:r=>{this.updating_status=!1,this.toggleMyModal("user-details")},error:r=>console.log(r)})}getAllData(){let e={posting_id:this.selected_posting.id,show_list:1,per_page:20,application_status:this.application_status,page:1,is_applied:1};this.allApplicantArray=[];let r=t=>{e.page=t,this.http.get("posting-application",{params:e}).subscribe({next:p=>{let h=p.data.map(b=>({last_name:b.user.last_name,first_name:b.user.first_name,email:b.user.email,contact_number:b.user.contact_number,is_scholar:b.user.scholar_flag?"Yes":"No",is_irregular:b.user.irregular_flag?"Yes":"No",is_shiftee:b.user.shiftee_flag?"Yes":"No",is_parent_ofw:b.user.parents.ofw_flag?"Yes":"No",course:b.user.academic_program.desc,year_level:b.user.year_level.desc,school:b.user.school.desc,date_applied:b.date_applied,application_status:b.is_approved===null?"pending":b.is_approved===1?"approved":"rejected"}));this.allApplicantArray.push(...h),t<p.meta.last_page?r(t+1):this.exportToExcel(this.allApplicantArray)},error:p=>console.log(p)})};r(1)}exportToExcel(e){let t={Sheets:{data:le.json_to_sheet(e)},SheetNames:["data"]},p=ae(t,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(p,this.selected_posting.title.toLowerCase()+"_applicant_list")}saveAsExcelFile(e,r){let t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",p=new Blob([e],{type:t});(0,lt.saveAs)(p,`${r}.xlsx`)}constructor(e){this.http=e,this.toggleModal=new F,this.faArrowLeft=O,this.faCircleNotch=N,this.faFilter=te,this.faFileExcel=ie,this.applicantList=[],this.isLoading=!1,this.per_page=10,this.statusList=["pending","approved","rejected"],this.modals=[],this.updating_status=!1}ngOnInit(){console.log(this.selected_posting),this.loadApplicants()}static{this.\u0275fac=function(r){return new(r||i)(E(L))}}static{this.\u0275cmp=P({type:i,selectors:[["app-applicant-list"]],inputs:{selected_posting:"selected_posting"},outputs:{toggleModal:"toggleModal"},decls:65,vars:15,consts:[[1,"flex","flex-col","w-full","bg-white","p-3","min-h-96"],[1,"font-bold","text-xl","text-blue-600","flex","justify-between","border-b","border-b-gray-300","pb-2","mb-2"],[3,"click"],[3,"icon"],[1,"text-sm","text-gray-600","font-normal"],[1,"flex","text-xs","w-1/2","text-gray-600"],[1,"mr-2"],[1,"mt-1"],[1,"input-txt","capitalize",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"input-txt",3,"ngModelChange","ngModel"],["value","10"],["value","15"],["value","20"],["value","30"],["value","50"],[1,"flex","justify-end","mt-1.5","ml-2"],[1,"bg-blue-500","my-3","px-2","text-white","rounded","hover:opacity-75","disabled:bg-gray-300",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"btn-blue-nr","bg-green-700","my-3","px-2","ml-1",3,"click"],[1,"flex","w-full","bg-white","text-xs"],[1,"-mt-0.5","mr-3"],[1,"flex"],[1,"block","rounded","h-4","w-4","shadow-sm","mr-1","bg-orange-500"],[1,"-mt-0.5"],[1,"flex","mx-3"],[1,"block","rounded","h-4","w-4","shadow-sm","mr-1","bg-red-500"],[1,"block","rounded","h-4","w-4","shadow-sm","mr-1","bg-green-500"],[1,"table-auto","max-h-4/5","overflow-y-auto","mt-3","select-none"],[1,"w-4/12"],[1,"w-6/12"],[1,"w-2/12"],[4,"ngIf"],["class","flex flex-col w-full py-10",4,"ngIf"],[3,"meta",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[3,"value"],["animation","spin",3,"icon"],["class","hover:bg-sky-100 text-xs",4,"ngFor","ngForOf"],[1,"hover:bg-sky-100","text-xs"],[1,"text-center","flex","align-middle","select-none"],[1,"block","rounded","h-4","w-4","shadow-sm","mr-2",3,"ngClass"],[1,"text-center"],[1,"px-3","py-1","bg-blue-500","text-xs","rounded-full","text-white",3,"click"],[1,"flex","flex-col","w-full","py-10"],[1,"flex","justify-center","text-blue-500","w-full"],[1,"flex","justify-center","w-full"],[3,"meta"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","text-blue-600"],[1,"mt-3",3,"click"],[1,"my-2","text-2xl","font-bold"],[1,"overflow-y-auto","max-h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100","p-5"],[3,"selected_user"],["class","flex justify-center py-3 px-5 space-x-4 rounded-b border-t border-gray-200",4,"ngIf"],[1,"flex","justify-center","py-3","px-5","space-x-4","rounded-b","border-t","border-gray-200"],[1,"btn-blue","bg-red-500","mr-2","w-28",3,"click","disabled"],[1,"btn-blue","bg-blue-500","w-28",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"span",1)(2,"div")(3,"button",2),f("click",function(){return t.closeComponent()}),c(4,"fa-icon",3),n(),s(5," Applicant List "),o(6,"span",4),s(7),n()(),o(8,"div",5)(9,"div",6)(10,"label",7),s(11,"Application Status "),n(),o(12,"select",8),w("ngModelChange",function(h){return C(t.application_status,h)||(t.application_status=h),h}),o(13,"option",9),s(14,"All"),n(),_(15,jt,2,2,"option",10),n()(),o(16,"div")(17,"label",7),s(18,"Items per page"),n(),o(19,"select",11),w("ngModelChange",function(h){return C(t.per_page,h)||(t.per_page=h),h}),o(20,"option",12),s(21,"10"),n(),o(22,"option",13),s(23,"15"),n(),o(24,"option",14),s(25,"20"),n(),o(26,"option",15),s(27,"30"),n(),o(28,"option",16),s(29,"50"),n()()(),o(30,"div",17)(31,"button",18),f("click",function(){return t.loadApplicants()}),_(32,Dt,1,1,"fa-icon",19)(33,Nt,1,1,"fa-icon",20),n(),o(34,"button",21),f("click",function(){return t.getAllData()}),c(35,"fa-icon",3),n()()()(),o(36,"div",22)(37,"span",23),s(38,"Legends: "),n(),o(39,"div",24),c(40,"span",25),o(41,"span",26),s(42,"Pending"),n()(),o(43,"div",27),c(44,"span",28),o(45,"span",26),s(46,"Rejected"),n()(),o(47,"div",24),c(48,"span",29),o(49,"span",26),s(50,"Approved"),n()()(),o(51,"table",30)(52,"thead")(53,"tr")(54,"th",31),s(55,"Name"),n(),o(56,"th",32),s(57,"Details"),n(),o(58,"th",33),s(59,"Action"),n()()(),_(60,Wt,2,1,"tbody",34),n(),_(61,Bt,5,1,"div",35)(62,qt,1,1,"app-page-controller",36),n(),_(63,Gt,14,3,"div",37)(64,zt,1,0,"div",38)),r&2&&(a(4),l("icon",t.faArrowLeft),a(3),v(" (",t.meta==null?null:t.meta.total,") "),a(5),y("ngModel",t.application_status),a(),l("ngValue",null),a(2),l("ngForOf",t.statusList),a(4),y("ngModel",t.per_page),a(12),l("disabled",t.isLoading),a(),l("ngIf",!t.isLoading),a(),l("ngIf",t.isLoading),a(2),l("icon",t.faFileExcel),a(25),l("ngIf",!t.isLoading),a(),l("ngIf",t.isLoading),a(),l("ngIf",t.applicantList.length>t.per_page),a(),l("ngIf",t.modals["user-details"]),a(),l("ngIf",t.modals["user-details"]))},dependencies:[Fe,B,j,k,X,R,q,I,T,Q,oe],styles:["td[_ngcontent-%COMP%]{padding:0 5px}"]})}}return i})();function Yt(i,m){i&1&&(o(0,"span",13),s(1," SMS Sending Queued "),n())}function Ht(i,m){if(i&1&&c(0,"fa-icon",26),i&2){let e=d(2);l("icon",e.faCircleNotch)}}function Jt(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=d(2);l("icon",e.faSave)}}function Kt(i,m){if(i&1){let e=x();o(0,"button",23),f("click",function(){g(e);let t=d();return u(t.saveTemplate())}),_(1,Ht,1,1,"fa-icon",24)(2,Jt,1,1,"fa-icon",25),s(3," Update Template "),n()}if(i&2){let e=d();l("disabled",e.is_saving||(e.message_template==null?null:e.message_template.mobile_message_approved)===e.mobile_message_approved&&(e.message_template==null?null:e.message_template.mobile_message_rejected)===e.mobile_message_rejected&&(e.message_template==null?null:e.message_template.email_message_approved)===e.email_message_approved&&(e.message_template==null?null:e.message_template.email_message_rejected)===e.email_message_rejected),a(),l("ngIf",e.is_saving),a(),l("ngIf",!e.is_saving)}}function Zt(i,m){if(i&1&&c(0,"fa-icon",26),i&2){let e=d(2);l("icon",e.faCircleNotch)}}function $t(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=d(2);l("icon",e.faSave)}}function ei(i,m){if(i&1){let e=x();o(0,"button",23),f("click",function(){g(e);let t=d();return u(t.saveTemplate())}),_(1,Zt,1,1,"fa-icon",24)(2,$t,1,1,"fa-icon",25),s(3," Save Template "),n()}if(i&2){let e=d();l("disabled",e.is_saving),a(),l("ngIf",e.is_saving),a(),l("ngIf",!e.is_saving)}}function ti(i,m){if(i&1&&c(0,"fa-icon",26),i&2){let e=d(2);l("icon",e.faCircleNotch)}}function ii(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=d(2);l("icon",e.faPaperPlane)}}function ni(i,m){if(i&1){let e=x();o(0,"button",27),f("click",function(){g(e);let t=d();return u(t.sendMessage())}),_(1,ti,1,1,"fa-icon",24)(2,ii,1,1,"fa-icon",25),s(3," Send Messages "),n()}if(i&2){let e=d();l("disabled",e.is_saving||(e.message_template==null?null:e.message_template.mobile_message_approved)!==e.mobile_message_approved||(e.message_template==null?null:e.message_template.mobile_message_rejected)!==e.mobile_message_rejected||(e.message_template==null?null:e.message_template.email_message_approved)!==e.email_message_approved||(e.message_template==null?null:e.message_template.email_message_rejected)!==e.email_message_rejected),a(),l("ngIf",e.is_saving),a(),l("ngIf",!e.is_saving)}}var rt=(()=>{class i{getSegmentCount(e){return Math.ceil(e/160)}sendMessage(){this.is_saving=!0;let e={posting_id:this.selected_posting.id};this.http.post("send-bulk-sms",e).subscribe({next:r=>{console.log(r),this.job_sent=!0,this.is_saving=!1},error:r=>console.log(r)})}saveTemplate(){this.is_saving=!0;let e={posting_id:this.selected_posting.id,mobile_message_approved:this.mobile_message_approved,mobile_message_rejected:this.mobile_message_rejected,email_message_approved:this.email_message_approved,email_message_rejected:this.email_message_rejected};this.http.post("message-template",e).subscribe({next:r=>{console.log(r),this.message_template=r.data,this.message_template&&(this.mobile_message_approved=this.message_template.mobile_message_approved,this.mobile_message_rejected=this.message_template.mobile_message_rejected,this.email_message_approved=this.message_template.email_message_approved,this.email_message_rejected=this.message_template.email_message_rejected),this.is_saving=!1},error:r=>console.log(r)})}getMessageTemplate(e){this.is_saving=!0;let r={posting_id:e.id};this.http.get("message-template",{params:r}).subscribe({next:t=>{console.log(t),this.message_template=t.data[0],this.message_template&&(this.mobile_message_approved=this.message_template.mobile_message_approved,this.mobile_message_rejected=this.message_template.mobile_message_rejected,this.email_message_approved=this.message_template.email_message_approved,this.email_message_rejected=this.message_template.email_message_rejected),this.is_saving=!1},error:t=>console.log(t)})}closeModal(){this.toggleModal.emit()}constructor(e){this.http=e,this.toggleModal=new F,this.faSave=G,this.faCircleNotch=N,this.faPaperPlane=ne,this.faArrowLeft=O,this.is_saving=!1,this.job_sent=!1}ngOnInit(){console.log(this.selected_posting),this.getMessageTemplate(this.selected_posting)}static{this.\u0275fac=function(r){return new(r||i)(E(L))}}static{this.\u0275cmp=P({type:i,selectors:[["app-messaging"]],inputs:{selected_posting:"selected_posting"},outputs:{toggleModal:"toggleModal"},decls:63,vars:19,consts:[[1,"flex","flex-col","mt-5","min-h-screen"],[1,"font-bold","text-xl","text-blue-600"],[3,"click"],[3,"icon"],[1,"flex","flex-col","rounded-lg"],[1,"flex","flex-row","w-full","bg-white"],[1,"w-8/12","p-3","flex","flex-col"],[1,"font-semibold"],[1,"text-gray-400","text-sm"],[1,"w-4/12","p-3","flex","flex-col","text-right"],[1,"flex","flex-col","bg-white","py-3","px-5","mt-3","rounded-lg"],[1,"flex","justify-between","text-left"],[1,"flex","flex-col"],[1,"bg-green-500","text-white","rounded-full","px-2","py-1","text-xs"],[1,"flex","flex-col","mt-5"],[1,"font-semibold","text-sm"],[1,"w-full"],["rows","4",1,"input-txt",3,"ngModelChange","ngModel"],[1,"flex","justify-end"],[1,"flex","flex-col","mt-2"],[1,"flex","justify-end","text-sm"],["class","mr-2 mt-3 mb-5 bg-blue-600 text-white px-8 py-2 font-semibold rounded-full disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["class","mt-3 mb-5 bg-blue-600 text-white px-8 py-2 font-semibold rounded-full disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"mr-2","mt-3","mb-5","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full","disabled:bg-gray-300",3,"click","disabled"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mt-3","mb-5","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full","disabled:bg-gray-300",3,"click","disabled"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"span",1)(2,"button",2),f("click",function(){return t.closeModal()}),c(3,"fa-icon",3),n(),s(4," Bulk Messaging (SMS/Email) "),n(),o(5,"div",4)(6,"div",5)(7,"div",6)(8,"span",7),s(9),n(),o(10,"span",8),s(11),n()(),o(12,"div",9)(13,"span",7),s(14,"Message will be sent to "),n(),o(15,"span"),s(16),n()()()(),o(17,"div",10)(18,"div",11)(19,"div",12)(20,"span",7),s(21,"SMS Message"),n()(),o(22,"div"),_(23,Yt,2,0,"span",13),n()(),o(24,"div")(25,"div",14)(26,"span",15),s(27,"Approved Message"),n(),o(28,"div",16)(29,"textarea",17),w("ngModelChange",function(h){return C(t.mobile_message_approved,h)||(t.mobile_message_approved=h),h}),n()(),o(30,"div",18),s(31),n()(),o(32,"div",19)(33,"span",15),s(34,"Reject Message"),n(),o(35,"div",16)(36,"textarea",17),w("ngModelChange",function(h){return C(t.mobile_message_rejected,h)||(t.mobile_message_rejected=h),h}),n()(),o(37,"div",18),s(38),n()()()(),o(39,"div",10)(40,"div",11)(41,"div",12)(42,"span",7),s(43,"Email Message"),n()()(),o(44,"div")(45,"div",14)(46,"span",15),s(47,"Approved Message"),n(),o(48,"div",16)(49,"textarea",17),w("ngModelChange",function(h){return C(t.email_message_approved,h)||(t.email_message_approved=h),h}),n()(),o(50,"div",18),s(51),n()(),o(52,"div",19)(53,"span",15),s(54,"Reject Message"),n(),o(55,"div",16)(56,"textarea",17),w("ngModelChange",function(h){return C(t.email_message_rejected,h)||(t.email_message_rejected=h),h}),n()(),o(57,"div",18),s(58),n()()()(),o(59,"div",20),_(60,Kt,4,3,"button",21)(61,ei,4,3,"button",21)(62,ni,4,3,"button",22),n()()),r&2&&(a(3),l("icon",t.faArrowLeft),a(6),S(t.selected_posting.title),a(2),S(t.selected_posting.lib_posting_category_id==="1"?"Part-time":"Scholarship"),a(5),A("",t.selected_posting.posting_applications_count," Applicant",t.selected_posting.posting_applications_count>1?"s":"",""),a(7),W(t.job_sent?23:-1),a(6),y("ngModel",t.mobile_message_approved),a(2),A(" ",t.mobile_message_approved?t.mobile_message_approved.length:0,"/",t.mobile_message_approved?t.getSegmentCount(t.mobile_message_approved.length):1," "),a(5),y("ngModel",t.mobile_message_rejected),a(2),A(" ",t.mobile_message_rejected?t.mobile_message_rejected.length:0,"/",t.mobile_message_rejected?t.getSegmentCount(t.mobile_message_rejected.length):1," "),a(11),y("ngModel",t.email_message_approved),a(2),v(" ",t.email_message_approved?t.email_message_approved.length:0," "),a(5),y("ngModel",t.email_message_rejected),a(2),v(" ",t.email_message_rejected?t.email_message_rejected.length:0," "),a(2),l("ngIf",(t.message_template==null?null:t.message_template.mobile_message_approved)||(t.message_template==null?null:t.message_template.mobile_message_rejected)||(t.message_template==null?null:t.message_template.email_message_approved)||(t.message_template==null?null:t.message_template.email_message_rejected)),a(),l("ngIf",!(t.message_template!=null&&t.message_template.mobile_message_approved)||!(t.message_template!=null&&t.message_template.mobile_message_rejected)||!(t.message_template!=null&&t.message_template.email_message_approved)||!(t.message_template!=null&&t.message_template.email_message_rejected)),a(),l("ngIf",(t.message_template==null?null:t.message_template.mobile_message_approved)&&(t.message_template==null?null:t.message_template.mobile_message_rejected)&&(t.message_template==null?null:t.message_template.email_message_approved)&&(t.message_template==null?null:t.message_template.email_message_rejected)))},dependencies:[j,k,D,I,T]})}}return i})();function ai(i,m){if(i&1){let e=x();o(0,"div")(1,"button",9),f("click",function(){g(e);let t=d();return u(t.toggleModal("show-posting"))}),c(2,"fa-icon",10),s(3," Create Post "),n()()}if(i&2){let e=d();a(2),l("icon",e.faPenToSquare)}}function li(i,m){if(i&1&&(o(0,"option",36),s(1),n()),i&2){let e=m.$implicit;l("value",e.code),a(),S(e.name)}}function si(i,m){if(i&1&&(o(0,"option",36),s(1),n()),i&2){let e=m.$implicit;l("value",e.id),a(),S(e.title)}}function ri(i,m){if(i&1&&(o(0,"option",36),s(1),n()),i&2){let e=m.$implicit;l("value",e.id),a(),S(e.title)}}function pi(i,m){if(i&1){let e=x();o(0,"button",48),f("click",function(){g(e);let t=d().$implicit,p=d(3);return u(p.toggleModal("show-messaging",t))}),s(1," Messaging "),n(),o(2,"button",49),f("click",function(){g(e);let t=d().$implicit,p=d(3);return u(p.toggleModal("show-applicants",t))}),s(3," Applicant list "),n()}}function di(i,m){if(i&1&&(o(0,"span",47),s(1),n()),i&2){let e=d().$implicit;a(),S(e.date_published?"No applicants":"Unpublished")}}function mi(i,m){if(i&1){let e=x();o(0,"tr",38)(1,"td",39),f("click",function(){let t=g(e).$implicit,p=d(3);return u(p.toggleModal("show-posting",t))}),o(2,"div",40)(3,"span",41),s(4),n()(),o(5,"div",42)(6,"span",43),s(7),n(),c(8,"br"),o(9,"span",44),s(10),n()()(),o(11,"td",45),s(12),ge(13,"date"),c(14,"br"),s(15),ge(16,"date"),n(),o(17,"td",45),s(18),n(),o(19,"td",46),_(20,pi,4,0)(21,di,2,1,"span",47),n()()}if(i&2){let e=m.$implicit;a(4),S(e.title[0]),a(3),v("",e.title," "),a(3),S(e.lib_posting_category_id===1?"Part-time job":"Scholarship"),a(2),v(" ",e.date_published?ue(13,8,e.date_published,"MMM dd, yyyy"):"-"," "),a(3),v(" ",ue(16,11,e.date_end,"MMM dd, yyyy")," "),a(3),A("",e.posting_applications_count,"/",e.slot,""),a(2),W(e.applicants.length>0?20:21)}}function ci(i,m){i&1&&(o(0,"tr")(1,"td",50),s(2," No records found... "),n()())}function _i(i,m){if(i&1&&(o(0,"tbody"),_(1,mi,22,14,"tr",37)(2,ci,3,0,"tr",6),n()),i&2){let e=d(2);a(),l("ngForOf",e.postList),a(),l("ngIf",e.postList.length===0)}}function gi(i,m){if(i&1&&(o(0,"div",51)(1,"div",52),c(2,"fa-icon",53),n(),o(3,"div",54),s(4," Loading list... "),n()()),i&2){let e=d(2);a(2),l("icon",e.faCircleNotch)}}function ui(i,m){if(i&1){let e=x();o(0,"app-page-controller",55),f("movePage",function(t){g(e);let p=d(2);return u(p.loadList(t))}),n()}if(i&2){let e=d(2);l("meta",e.meta)}}function fi(i,m){if(i&1){let e=x();o(0,"div",11)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"label",15),s(6,"Search"),n(),o(7,"input",16),w("ngModelChange",function(t){g(e);let p=d();return C(p.searchTerm,t)||(p.searchTerm=t),u(t)}),n()(),o(8,"div",14)(9,"label",15),s(10,"Municipality"),n(),o(11,"select",17),w("ngModelChange",function(t){g(e);let p=d();return C(p.municipality_code,t)||(p.municipality_code=t),u(t)}),o(12,"option",18),s(13,"All"),n(),_(14,li,2,2,"option",19),n()()(),o(15,"div",20)(16,"div")(17,"label",21),s(18,"Category"),n(),o(19,"select",17),w("ngModelChange",function(t){g(e);let p=d();return C(p.category,t)||(p.category=t),u(t)}),o(20,"option",18),s(21,"All"),n(),_(22,si,2,2,"option",19),n()(),o(23,"div")(24,"label",22),s(25,"Published"),n(),o(26,"select",17),w("ngModelChange",function(t){g(e);let p=d();return C(p.is_published,t)||(p.is_published=t),u(t)}),o(27,"option",18),s(28,"All"),n(),_(29,ri,2,2,"option",19),n()(),o(30,"div")(31,"label",22),s(32,"Date"),n(),o(33,"input",23),w("ngModelChange",function(t){g(e);let p=d();return C(p.start_date,t)||(p.start_date=t),u(t)}),n()(),o(34,"div")(35,"label",24),s(36,"to"),n(),o(37,"input",23),w("ngModelChange",function(t){g(e);let p=d();return C(p.end_date,t)||(p.end_date=t),u(t)}),n()()(),o(38,"div",25)(39,"button",26),f("click",function(){g(e);let t=d();return u(t.loadList())}),c(40,"fa-icon",27),o(41,"span",28),s(42,"Apply Filter"),n()()()()(),o(43,"div",29)(44,"table",30)(45,"thead")(46,"tr")(47,"th",31),s(48,"Title"),n(),o(49,"th",32),s(50," Date Published "),c(51,"br"),s(52," Deadline date "),n(),o(53,"th",32),s(54,"Slots"),n(),o(55,"th",33),s(56,"Actions"),n()()(),_(57,_i,3,2,"tbody",6),n(),_(58,gi,5,1,"div",34),n(),_(59,ui,1,1,"app-page-controller",35),n()}if(i&2){let e=d();a(7),y("ngModel",e.searchTerm),a(4),y("ngModel",e.municipality_code),a(),l("ngValue",null),a(2),l("ngForOf",e.municipalities),a(5),y("ngModel",e.category),a(),l("ngValue",null),a(2),l("ngForOf",e.categoryList),a(4),y("ngModel",e.is_published),a(),l("ngValue",null),a(2),l("ngForOf",e.publishedList),a(4),l("max",e.max_date),y("ngModel",e.start_date),a(4),l("max",e.max_date),y("ngModel",e.end_date),a(3),l("icon",e.faFilter),a(17),l("ngIf",!e.isLoading),a(),l("ngIf",e.isLoading),a(),l("ngIf",e.postList.length>0)}}function hi(i,m){if(i&1){let e=x();o(0,"app-messaging",56),f("toggleModal",function(){g(e);let t=d();return u(t.toggleModal("show-messaging"))}),n()}if(i&2){let e=d();l("selected_posting",e.selected_posting)}}function xi(i,m){if(i&1){let e=x();o(0,"app-applicant-list",56),f("toggleModal",function(){g(e);let t=d();return u(t.toggleModal("show-applicants"))}),n()}if(i&2){let e=d();l("selected_posting",e.selected_posting)}}function bi(i,m){if(i&1){let e=x();o(0,"app-posting-page",56),f("toggleModal",function(){g(e);let t=d();return u(t.toggleModal("show-posting"))}),n()}if(i&2){let e=d();l("selected_posting",e.selected_posting)}}var dt=(()=>{class i{toggleMessaging(e){this.showMessaging=!this.showMessaging}toggleApplicants(e){this.selected_posting=e,this.showApplicants=!this.showApplicants}toggleModal(e,r){this.selected_posting=r,this.modals[e]=!this.modals[e],e!=="show-email"&&e!=="show-sms"&&(this.modals["show-posting"]===!1?(this.router.navigate(["/admin/dashboard"]),this.loadList()):this.loadList())}togglePosting(e){this.showPostingComponent=!this.showPostingComponent}loadLibraries(){this.http.get("psgc/provinces/0306900000",{params:{include:"municipalities"}}).subscribe({next:e=>{this.municipalities=e.data.municipalities,this.loadList(1,!0)},error:e=>console.log(e)})}loadList(e,r){this.isLoading=!0;let t={};t.page=e??1,t.include="applicants",t.per_page=10,this.start_date&&(t.start_date=this.start_date),this.end_date&&(t.end_date=this.end_date),this.category&&(t.lib_posting_category_id=this.category),this.is_published&&(t.is_published=this.is_published),this.searchTerm&&(t.search=this.searchTerm),this.municipality_code&&(t.municipality_code=this.municipality_code),this.http.get("posting-information",{params:t}).subscribe({next:p=>{console.log(p),this.postList=p.data,this.meta=p.meta,this.isLoading=!1,this.modals["show-posting"]||this.checkUrlParams()},error:p=>console.log(p)})}checkUrlParams(){this.route.queryParams.subscribe(e=>{console.log(e),console.log(e.create_post),this.modals["show-posting"]=e.create_post==="true"})}getAllData(){let e={};e.include="applicants",e.per_page=10,this.start_date&&(e.start_date=this.start_date),this.end_date&&(e.end_date=this.end_date),this.category&&(e.lib_posting_category_id=this.category),this.is_published&&(e.is_published=this.is_published),this.allPostingArray=[];let r=t=>{e.page=t,this.http.get("posting-information",{params:e}).subscribe({next:p=>{let h=p.data.map(b=>({title:b.title,address:b.address,applied_slot:b.posting_applications_count,slot:b.slot,date_published:b.date_published,date_end:b.date_end}));this.allPostingArray.push(...h),t<p.meta.last_page?r(t+1):this.exportToExcel(this.allPostingArray)},error:p=>console.log(p)})};r(1)}exportToExcel(e){let t={Sheets:{data:le.json_to_sheet(e)},SheetNames:["data"]},p=ae(t,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(p,"posting_list")}saveAsExcelFile(e,r){let t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",p=new Blob([e],{type:t});(0,pt.saveAs)(p,`${r}.xlsx`)}constructor(e,r,t){this.http=e,this.route=r,this.router=t,this.faFilter=te,this.faEllipsis=Ke,this.faPaperPlane=ne,this.faArrowLeft=O,this.faPenToSquare=Ye,this.faCircleNotch=N,this.faSave=G,this.faPrint=$e,this.faFileExcel=ie,this.max_date=H(new Date,"yyyy-MM-dd","en","Asia/manila"),this.showMessaging=!1,this.showApplicants=!1,this.showPostingComponent=!1,this.isLoading=!1,this.postList=[],this.applicantList=[],this.modals=[],this.categoryList=[{title:"Part-time Jobs",id:"1"},{title:"Scholarships",id:"2"}],this.publishedList=[{title:"Published",id:"published"},{title:"Unpublished",id:"unpublished"}],this.editorContent="",this.submittedContent="",this.editorConfig={toolbar:[["bold","italic","underline"],[{indent:"-1"},{indent:"+1"}],[{list:"ordered"},{list:"bullet"}]]},this.municipalities=[],this.navigationEnd$=this.router.events.pipe(ye(p=>p instanceof je),Ce(()=>{this.modals["show-posting"],localStorage.getItem("access_token")&&this.loadList()}))}ngOnInit(){this.loadLibraries(),this.navigationEnd$.subscribe()}static{this.\u0275fac=function(r){return new(r||i)(E(L),E(De),E(Ne))}}static{this.\u0275cmp=P({type:i,selectors:[["app-dashboard"]],decls:13,vars:5,consts:[[1,"flex","flex-col","w-full","px-5","overflow-y-auto"],[1,"flex","flex-col","min-h-screen"],[1,"flex","justify-between"],[1,"my-3","flex","flex-col"],[1,"font-bold","text-2xl","text-blue-600"],[1,"text-sm"],[4,"ngIf"],["class","bg-white w-full",4,"ngIf"],[3,"selected_posting","toggleModal",4,"ngIf"],[1,"btn-blue-nr","my-3","px-2",3,"click"],[3,"icon"],[1,"bg-white","w-full"],[1,"flex","flex-col","m-3","px-2","bg-gray-200","text-xs","rounded-md"],[1,"grid","grid-cols-4","pt-2","gap-4"],[1,"col-span-2"],[1,"pt-1","mr-4"],["type","text","placeholder","Search Posting",1,"input-txt","placeholder:italic",3,"ngModelChange","ngModel"],[1,"input-txt",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-4","gap-4","py-2"],[1,"pt-1","mr-1"],[1,"pt-1","ml-2","mr-1"],["type","date",1,"input-txt",3,"ngModelChange","max","ngModel"],[1,"pt-1","mx-1"],[1,"flex","justify-end","mb-3","text-sm"],[1,"mt-1","bg-blue-600","rounded-md","px-2","text-white","hover:opacity-75","py-1",3,"click"],[1,"pr-1",3,"icon"],[1,"text-xs","ml-1"],[1,"flex","flex-col","w-full","bg-white","p-3"],[1,"table-auto"],[1,"w-4/12"],[1,"w-2/12"],[1,"w-3/12"],["class","flex flex-col w-full my-20",4,"ngIf"],[3,"meta","movePage",4,"ngIf"],[3,"value"],["class","hover:bg-sky-100 select-none",4,"ngFor","ngForOf"],[1,"hover:bg-sky-100","select-none"],[1,"flex","flex-row","hover:cursor-pointer",3,"click"],[1,"mt-2","mr-3","name-icon-nr","hover:opacity-75"],[1,"font-medium","text-gray-900","text-sm","xl:text-lg","select-none","capitalize"],[1,"w-10/12"],[1,"text-lg","font-semibold","capitalize"],[1,"text-sm","text-gray-500"],[1,"text-center","text-sm"],[1,"text-center","text-xs"],[1,"italic"],[1,"px-3","py-1","rounded-md","bg-gray-300","mr-2","hover:opacity-75",3,"click"],[1,"px-3","py-1","rounded-md","bg-blue-300","hover:opacity-75",3,"click"],["colspan","4",1,"text-center","italic"],[1,"flex","flex-col","w-full","my-20"],[1,"flex","justify-center","text-blue-500"],["animation","spin",3,"icon"],[1,"flex","justify-center"],[3,"movePage","meta"],[3,"toggleModal","selected_posting"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),s(5," Posting | Communicate "),n(),o(6,"span",5),s(7," Manage Posts and Send Messages "),n()(),_(8,ai,4,1,"div",6),n(),_(9,fi,60,18,"div",7)(10,hi,1,1,"app-messaging",8)(11,xi,1,1,"app-applicant-list",8)(12,bi,1,1,"app-posting-page",8),n()()),r&2&&(a(8),l("ngIf",!t.modals["show-email"]&&!t.modals["show-applicants"]&&!t.modals["show-posting"]),a(),l("ngIf",!t.modals["show-messaging"]&&!t.modals["show-applicants"]&&!t.modals["show-posting"]),a(),l("ngIf",t.modals["show-messaging"]),a(),l("ngIf",t.modals["show-applicants"]),a(),l("ngIf",t.modals["show-posting"]))},dependencies:[B,j,k,X,R,D,q,I,T,Q,ce,st,rt,Ae],styles:["td[_ngcontent-%COMP%]{padding:5px}th[_ngcontent-%COMP%]{padding:10px 0}"]})}}return i})();var vi=[{path:"",component:dt}],mt=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=K({type:i})}static{this.\u0275inj=J({imports:[fe.forChild(vi),fe]})}}return i})();var In=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=K({type:i})}static{this.\u0275inj=J({imports:[$,mt,z,nt.forRoot(),re,U,se,ee,Q,oe,ce]})}}return i})();export{In as DashboardModule};
