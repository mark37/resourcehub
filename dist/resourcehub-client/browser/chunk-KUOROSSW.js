import{a as T}from"./chunk-O7DKDHOS.js";import"./chunk-QYWSPK3A.js";import"./chunk-PZYZ7O55.js";import{c as Z,f as E,j as V,p as ee,q as te,r as ie,u as oe,v as ne,x as I}from"./chunk-POSQ46WM.js";import{a as H}from"./chunk-EDMWRYVU.js";import{A as C,Ab as ae,Ba as M,Ca as S,Cb as re,Da as k,Db as se,E as b,F as v,Fa as Q,Ia as X,J as D,K as d,L as m,La as U,Ma as z,P,Wa as J,Wb as pe,X as a,Xa as Y,Y as w,Ya as $,Za as G,_a as K,aa as x,ac as ce,ca as s,cc as F,dc as A,ja as l,ka as n,la as y,ma as h,na as g,nb as j,oa as c,ra as R,sa as B,ta as W,va as r,wa as q,xa as f,xb as le}from"./chunk-7PEPAECK.js";import"./chunk-GAL4ENT6.js";var _e=["confirmCode"],L=(()=>{class t{onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete("posting-application/",this.selected_application_id).subscribe({next:()=>{this.is_loading=!1,this.message="Code Match, Item was deleted",this.closeModal()},error:e=>{console.log(e),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.message="Code mismatch, please try again")}generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(Math.random()*1e3).toString().padStart(4,"0")}closeModal(){this.toggleCancelModal.emit()}constructor(e){this.http=e,this.toggleCancelModal=new P,this.faBan=le,this.confirm_code="0000",this.is_loading=!1,this.message=null}ngOnChanges(e){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}static{this.\u0275fac=function(i){return new(i||t)(w(H))}}static{this.\u0275cmp=b({type:t,selectors:[["app-cancel-application"]],viewQuery:function(i,o){if(i&1&&R(_e,5),i&2){let p;B(p=W())&&(o.inputElement=p.first)}},inputs:{selected_application_id:"selected_application_id"},outputs:{toggleCancelModal:"toggleCancelModal"},standalone:!0,features:[D,Q],decls:31,vars:6,consts:[["confirmCode",""],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-blue-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","minlength","4","maxlength","4","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup.enter","ngModelChange","ngModel"],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-blue-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-blue-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"px-5","mx-10","mt-5","italic","text-sm","text-blue-500"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(i,o){if(i&1){let p=h();l(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),r(5," Cancel Application "),n()(),l(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),r(10," Your are about to cancel your pending application. Please enter the generated cancel code in order to proceed. "),n(),l(11,"div",10)(12,"span",11),r(13,"Cancel Code"),n(),l(14,"span",12),r(15),n()(),l(16,"div",10)(17,"label",13),r(18,"Enter Code"),n(),l(19,"input",14,0),g("keyup.enter",function(){return d(p),m(o.onSubmit())}),k("ngModelChange",function(N){return d(p),S(o.confirmation_code,N)||(o.confirmation_code=N),m(N)}),n()(),l(21,"div",15)(22,"button",16),g("click",function(){return d(p),m(o.onSubmit())}),y(23,"fa-icon",17),r(24," Cancel "),n()()(),l(25,"div",18),r(26),n()()(),l(27,"div",19)(28,"button",20),g("click",function(){return d(p),m(o.closeModal())}),r(29,"Close"),n()()()()(),y(30,"div",21)}i&2&&(a(15),q(o.confirm_code),a(4),M("ngModel",o.confirmation_code),a(3),s("disabled",!o.confirmation_code||o.is_loading),a(),s("icon",o.faBan),a(3),f(" ",o.message," "),a(2),s("disabled",o.is_loading))},dependencies:[A,F,I,Z,E,oe,ne,V]})}}return t})();var xe=(t,u)=>({"text-green-500":t,"text-red-500":u});function ye(t,u){if(t&1&&(l(0,"option",12),r(1),n()),t&2){let e=u.$implicit;s("value",e.id),a(),f(" ",e.name," ")}}function Ce(t,u){if(t&1&&y(0,"fa-icon",23),t&2){let e=c().$implicit,i=c();s("icon",i.faCircleCheck)("ngClass",X(2,xe,e.is_approved===1,e.is_approved===0))}}function be(t,u){if(t&1){let e=h();l(0,"button",24),g("click",function(){d(e);let o=c().$implicit,p=c();return m(p.toggleCancelModal(o.id))}),r(1," Cancel Application "),n()}}function ve(t,u){if(t&1){let e=h();l(0,"div",13)(1,"div",14)(2,"span",15)(3,"button",16),g("click",function(){let o=d(e).$implicit,p=c();return m(p.toggleModal("post-details",o))}),y(4,"fa-icon",17),n(),r(5),n(),l(6,"span",18),r(7),n(),l(8,"span",19),r(9),U(10,"date"),n()(),l(11,"div",20)(12,"span"),x(13,Ce,1,5,"fa-icon",21),r(14),n()(),l(15,"div",20),x(16,be,2,0,"button",22),n()()}if(t&2){let e=u.$implicit,i=c();a(4),s("icon",i.faArrowUpRightFromSquare),a(),f(" ",e.posting.title," "),a(2),f(" ",e.posting.lib_posting_category_id===1?"Part-time Job":"Scholarship"," "),a(2),f(" Date Applied: ",z(10,7,e.date_applied,"MMM dd, yyyy")," "),a(4),s("ngIf",e.is_approved!==null),a(),f(" ",e.is_approved!==null?e.is_approved===1?"Approved":"Denied":"Pending"," "),a(2),s("ngIf",e.is_approved===null)}}function we(t,u){if(t&1){let e=h();l(0,"app-post-details",25),g("toggleModal",function(){d(e);let o=c();return m(o.toggleModal("post-details"))}),n()}if(t&2){let e=c();s("selected_posting",e.selected_posting)}}function Me(t,u){if(t&1){let e=h();l(0,"app-cancel-application",26),g("toggleCancelModal",function(){d(e);let o=c();return m(o.toggleCancelModal())}),n()}if(t&2){let e=c();s("selected_application_id",e.selected_application_id)}}var de=(()=>{class t{onSubmit(){let e={};this.http.post("",e).subscribe({next:i=>{console.log(i)},error:i=>console.log(i)})}loadList(){this.isLoading=!0;let e={include:"posting",is_applied:1,per_page:"all"};this.category&&(e.lib_posting_category_id=this.category),this.http.get("posting-application",{params:e}).subscribe({next:i=>{console.log(i),this.applicationList=i.data,this.isLoading=!1},error:i=>console.log(i)})}toggleModal(e,i){this.selected_posting=i?i.posting:null,i&&(this.selected_posting.applicants=[i]),this.modals[e]=!this.modals[e]}toggleCancelModal(e){console.log(e),this.selected_application_id=e,this.modals["cancel-application"]=!this.modals["cancel-application"],e||this.loadList()}constructor(e){this.http=e,this.faFilter=re,this.faXmark=pe,this.faCircleCheck=ae,this.faXmarkCircle=ce,this.faArrowUpRightFromSquare=se,this.category=null,this.isLoading=!1,this.categoryList=[{name:"Scholarship",id:"2"},{name:"Part-time",id:"1"}],this.applicationList=[],this.modals=[]}ngOnInit(){this.loadList()}static{this.\u0275fac=function(i){return new(i||t)(w(H))}}static{this.\u0275cmp=b({type:t,selectors:[["app-history"]],decls:14,vars:6,consts:[[1,"w-full","flex","justify-center","min-h-svh"],[1,"w-5/6"],[1,"flex","justify-between","mt-5"],[1,"text-blue-600","font-semibold","text-2xl"],[1,"flex","justify-end"],[1,"input-txt","w-44",3,"change","ngModelChange","ngModel"],["selected","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-col"],["class","border border-gray-400 shadow-md rounded-lg w-full flex flex-col md:flex-row p-3 mt-3",4,"ngFor","ngForOf"],[3,"selected_posting","toggleModal",4,"ngIf"],[3,"selected_application_id","toggleCancelModal",4,"ngIf"],[3,"value"],[1,"border","border-gray-400","shadow-md","rounded-lg","w-full","flex","flex-col","md:flex-row","p-3","mt-3"],[1,"md:w-8/12","flex","flex-col"],[1,"text-xl","font-semibold"],[1,"text-sm","text-blue-600","px-2",3,"click"],[3,"icon"],[1,"text-gray-400","font-semibold","ml-2"],[1,"text-gray-400","ml-2"],[1,"md:w-2/12","mt-5"],[3,"icon","ngClass",4,"ngIf"],["class","btn-blue px-5 text-xs",3,"click",4,"ngIf"],[3,"icon","ngClass"],[1,"btn-blue","px-5","text-xs",3,"click"],[3,"toggleModal","selected_posting"],[3,"toggleCancelModal","selected_application_id"]],template:function(i,o){i&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),r(4," Application History "),n(),l(5,"div",4)(6,"select",5),g("change",function(){return o.loadList()}),k("ngModelChange",function(_){return S(o.category,_)||(o.category=_),_}),l(7,"option",6),r(8,"Show all"),n(),x(9,ye,2,2,"option",7),n()()(),l(10,"div",8),x(11,ve,17,10,"div",9),n()()(),x(12,we,1,1,"app-post-details",10)(13,Me,1,1,"app-cancel-application",11)),i&2&&(a(6),M("ngModel",o.category),a(),s("ngValue",null),a(2),s("ngForOf",o.categoryList),a(2),s("ngForOf",o.applicationList),a(),s("ngIf",o.modals["post-details"]),a(),s("ngIf",o.modals["cancel-application"]))},dependencies:[J,Y,$,te,ie,ee,E,V,F,T,L,G]})}}return t})();var Se=[{path:"",component:de}],me=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=C({imports:[j.forChild(Se),j]})}}return t})();var Ye=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=C({imports:[K,me,I,A,T,L]})}}return t})();export{Ye as HistoryModule};
