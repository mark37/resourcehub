import{a as O}from"./chunk-MD4WEALW.js";import{a as D}from"./chunk-AX4ML4T7.js";import{a as W}from"./chunk-7RGY2OD3.js";import{b as Y,c as Z,f as V,j as P,p as $,q as ee,r as te,v as F}from"./chunk-V2SSCOFE.js";import{Ab as se,B as w,Ba as J,C as S,Eb as le,Fa as I,H as f,I as u,Qa as G,Qb as A,Ra as K,Sa as Q,Sb as ce,T as o,Ta as T,U,Ub as L,Va as E,Vb as j,Y as _,_ as s,ba as x,fa as a,ga as r,ha as p,hb as q,ia as v,ja as g,jb as N,ka as m,mb as ie,qb as ne,ra as l,sa as X,sb as oe,ta as b,ua as k,ub as re,wa as z,x as M,xa as h,xb as ae,ya as C,za as y}from"./chunk-WXNTJ4HU.js";import"./chunk-GAL4ENT6.js";function xe(t,c){if(t&1&&p(0,"fa-icon",10),t&2){let e=m();s("icon",e.faCircleNotch)}}function ve(t,c){if(t&1&&p(0,"fa-icon",11),t&2){let e=m();s("icon",e.faPaperPlane)}}var R=(()=>{class t{sendSMS(){if(this.message&&this.message!==""){this.is_saving=!0;let e={message:this.message,contact_number:this.selected_user.contact_number};this.http.post("send-sms",e).subscribe({next:n=>{console.log(n),this.is_saving=!1},error:n=>console.log(n)})}}getSegmentCount(e){return Math.ceil(e/160)}constructor(e){this.http=e,this.faPaperPlane=A,this.faCircleNotch=N,this.is_saving=!1}ngOnInit(){console.log(this.selected_user)}static{this.\u0275fac=function(n){return new(n||t)(U(W))}}static{this.\u0275cmp=w({type:t,selectors:[["app-messaging-sms"]],inputs:{selected_user:"selected_user"},standalone:!0,features:[J],decls:16,vars:6,consts:[[1,"p-3","bg-white"],[1,"flex","justify-center"],[1,"flex","flex-col","w-3/5","shadow-md","p-3","rounded-md","border","border-gray-300","my-5","bg-slate-50"],["rows","4",1,"input-txt",3,"ngModelChange","ngModel"],[1,"flex","justify-end","mb-5"],[1,"pb-5"],[1,"flex","justify-end"],[1,"btn-blue",3,"click","disabled"],["animation","spin","class","mr-1",3,"icon",4,"ngIf"],["class","mr-1",3,"icon",4,"ngIf"],["animation","spin",1,"mr-1",3,"icon"],[1,"mr-1",3,"icon"]],template:function(n,i){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div")(5,"label"),l(6,"Message Content"),r(),a(7,"textarea",3),y("ngModelChange",function(B){return C(i.message,B)||(i.message=B),B}),r()(),a(8,"div",4),l(9),r()(),a(10,"div",5)(11,"div",6)(12,"button",7),g("click",function(){return i.sendSMS()}),_(13,xe,1,1,"fa-icon",8)(14,ve,1,1,"fa-icon",9),l(15," Send "),r()()()()()()),n&2&&(o(7),h("ngModel",i.message),o(2),k(" ",i.message?i.message.length:0,"/",i.message?i.getSegmentCount(i.message.length):1," "),o(3),s("disabled",i.is_saving||!i.message&&i.message!==""),o(),s("ngIf",i.is_saving),o(),s("ngIf",!i.is_saving))},dependencies:[F,Z,V,P,E,T,j,L]})}}return t})();var Ce=(t,c,e)=>({"bg-orange-100 hover:bg-orange-200":t,"bg-red-200 hover:bg-red-300":c,"hover:bg-sky-100":e}),me=(t,c,e)=>({"bg-orange-500":t,"bg-green-500":c,"bg-red-500":e});function ye(t,c){if(t&1){let e=v();a(0,"span",11)(1,"button",12),g("click",function(){f(e);let i=m();return u(i.toggleModal("user-information"))}),p(2,"fa-icon",13),r()()}if(t&2){let e=m();o(2),s("icon",e.faArrowLeft)}}function be(t,c){if(t&1&&(a(0,"option",35),l(1),r()),t&2){let e=c.$implicit;s("value",e),o(),X(e)}}function Me(t,c){if(t&1&&(a(0,"option",35),l(1),r()),t&2){let e=c.$implicit;s("value",e),o(),X(e)}}function we(t,c){t&1&&l(0," Unverified ")}function Se(t,c){t&1&&l(0," Rejected ")}function Ue(t,c){t&1&&l(0," Verified ")}function ke(t,c){if(t&1){let e=v();a(0,"tr",37)(1,"td",22)(2,"button",38),g("click",function(){let i=f(e).$implicit,d=m(3);return u(d.toggleModal("user-information",i))}),a(3,"span",39),l(4),r()(),l(5),r(),a(6,"td",40),l(7),p(8,"br"),a(9,"span",41),l(10),p(11,"br"),l(12),p(13,"br"),l(14," \xA0 "),r()(),a(15,"td",42)(16,"span",43),p(17,"fa-icon",44),_(18,we,1,0)(19,Se,1,0)(20,Ue,1,0),r()(),a(21,"td",42)(22,"button",45),g("click",function(){let i=f(e).$implicit,d=m(3);return u(d.toggleModal("show-sms",i))}),l(23," SMS "),p(24,"fa-icon",46),r()(),a(25,"td",42)(26,"label",47)(27,"input",48),y("ngModelChange",function(i){let d=f(e).$implicit;return C(d.is_active,i)||(d.is_active=i),u(i)}),g("click",function(){let i=f(e).$implicit,d=m(3);return u(d.toggleActive(i))}),r(),p(28,"div",49),r()()()}if(t&2){let e=c.$implicit,n=m(3);s("ngClass",I(17,Ce,e.user_verified===null,e.user_verified===0,e.user_verified===1)),o(4),k("",e.first_name[0],"",e.last_name[0],""),o(),z(" ",e.first_name," ",e.middle_name," ",e.suffix_name!=="NA"?e.suffix_name:""," ",e.last_name," "),o(2),b(" ",e.school.desc," "),o(3),b(" ",e.email," "),o(2),b(" ",e.contact_number," "),o(4),s("ngClass",I(21,me,!e.user_verified,e.user_verified===1,e.user_verified===0)),o(),s("icon",e.user_verified?e.user_verified===1?n.faCircleCheck:n.faXmarkCircle:n.faClock),o(),x(e.user_verified===null?18:-1),o(),x(e.user_verified===0?19:-1),o(),x(e.user_verified===1?20:-1),o(4),s("icon",n.faPaperPlane),o(3),h("ngModel",e.is_active)}}function Ie(t,c){t&1&&(a(0,"tr")(1,"td",50),l(2,"No records found..."),r()())}function Te(t,c){if(t&1&&(a(0,"tbody"),_(1,ke,29,25,"tr",36)(2,Ie,3,0,"tr",32),r()),t&2){let e=m(2);o(),s("ngForOf",e.userList),o(),s("ngIf",e.userList.length===0)}}function Ee(t,c){if(t&1&&(a(0,"div",51)(1,"div",52),p(2,"fa-icon",53),r(),a(3,"div",54),l(4," Loading list... "),r()()),t&2){let e=m(2);o(2),s("icon",e.faCircleNotch)}}function Ve(t,c){if(t&1){let e=v();a(0,"app-page-controller",55),g("movePage",function(i){f(e);let d=m(2);return u(d.loadList(i))}),r()}if(t&2){let e=m(2);s("meta",e.meta)}}function Pe(t,c){if(t&1){let e=v();a(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"span",18),l(5,"Category"),r(),a(6,"select",19),y("ngModelChange",function(i){f(e);let d=m();return C(d.is_verified,i)||(d.is_verified=i),u(i)}),a(7,"option",20),l(8,"All"),r(),_(9,be,2,2,"option",21),r()(),a(10,"div",22)(11,"span",18),l(12,"Active Status"),r(),a(13,"select",19),y("ngModelChange",function(i){f(e);let d=m();return C(d.active_status,i)||(d.active_status=i),u(i)}),a(14,"option",20),l(15,"All"),r(),_(16,Me,2,2,"option",21),r()(),a(17,"div",23)(18,"button",24),g("click",function(){f(e);let i=m();return u(i.loadList())}),p(19,"fa-icon",25),a(20,"span",5),l(21,"Apply"),r()()()()(),a(22,"div",26)(23,"table",27)(24,"thead")(25,"tr",5)(26,"th",28),l(27,"Name"),r(),a(28,"th",28),l(29,"Details"),r(),a(30,"th",29),l(31,"Status"),r(),a(32,"th",30),l(33,"Action"),r(),a(34,"th",31),l(35,"Active Status"),r()()(),_(36,Te,3,2,"tbody",32),r(),_(37,Ee,5,1,"div",33),r(),_(38,Ve,1,1,"app-page-controller",34),r()}if(t&2){let e=m();o(6),h("ngModel",e.is_verified),o(),s("ngValue",null),o(2),s("ngForOf",e.category),o(4),h("ngModel",e.active_status),o(),s("ngValue",null),o(2),s("ngForOf",e.activeStatus),o(3),s("icon",e.faFilter),o(17),s("ngIf",!e.isLoading),o(),s("ngIf",e.isLoading),o(),s("ngIf",e.userList.length>0)}}function Fe(t,c){if(t&1&&(a(0,"div",8)(1,"span",56),p(2,"fa-icon",13),l(3),r()()),t&2){let e=m();o(),s("ngClass",I(3,me,e.selected_user.user_verified===null,e.selected_user.user_verified===1,e.selected_user.user_verified===0)),o(),s("icon",e.selected_user.user_verified===null?e.faClock:e.selected_user.user_verified===1?e.faCircleCheck:e.faXmarkCircle),o(),b(" ",e.selected_user.user_verified===null?"Pending":e.selected_user.user_verified===1?"Verified":"Rejected"," ")}}function Ne(t,c){if(t&1&&p(0,"app-messaging-sms",57),t&2){let e=m();s("selected_user",e.selected_user)}}function Ae(t,c){if(t&1&&p(0,"app-user-information",57),t&2){let e=m();s("selected_user",e.selected_user)}}function Le(t,c){if(t&1&&p(0,"fa-icon",53),t&2){let e=m(2);s("icon",e.faCircleNotch)}}function je(t,c){if(t&1&&p(0,"fa-icon",53),t&2){let e=m(2);s("icon",e.faCircleNotch)}}function We(t,c){if(t&1){let e=v();a(0,"div",10)(1,"button",58),g("click",function(){f(e);let i=m();return u(i.verifyUser(!1))}),_(2,Le,1,1,"fa-icon",59),l(3," Reject "),r(),a(4,"button",60),g("click",function(){f(e);let i=m();return u(i.verifyUser(!0))}),_(5,je,1,1,"fa-icon",59),l(6," Verify "),r()()}if(t&2){let e=m();o(),s("disabled",e.updating_user),o(),s("ngIf",e.updating_user),o(2),s("disabled",e.updating_user),o(),s("ngIf",e.updating_user)}}var de=(()=>{class t{loadList(e){this.isLoading=!0;let n={};n.page=e??1,n.user_info=1,this.active_status&&(n.active_status=this.active_status),this.is_verified&&(n.is_verified=this.is_verified),this.lib_cat_id&&(n.lib_cat_id=this.lib_cat_id),this.start_date&&(n.start_date=this.start_date),this.end_date&&(n.end_date=this.end_date),this.http.get("user-information",{params:n}).subscribe({next:i=>{console.log(i),this.userList=i.data,this.meta=i.meta,this.isLoading=!1},error:i=>console.log(i)})}toggleActive(e){e.is_active=!e.is_active,this.http.update("user-information/",e.id,e).subscribe({next:()=>console.log("updated successfully"),error:n=>console.log(n)})}toggleModal(e,n){this.selected_user=n,console.log(this.selected_user),this.modals[e]=!this.modals[e]}verifyUser(e){this.updating_user=!0,this.selected_user.user_verified=e===!0?1:0,this.http.update("user-information/",this.selected_user.id,this.selected_user).subscribe({next:n=>{console.log(this.selected_user),this.updating_user=!1},error:n=>console.log(n)})}constructor(e){this.http=e,this.faPenToSquare=ie,this.faTableColumns=ne,this.faFilter=re,this.faCircleNotch=N,this.faArrowLeft=se,this.faCircleCheck=oe,this.faXmarkCircle=ce,this.faClock=le,this.faArrowRight=ae,this.faPaperPlane=A,this.userList=[],this.active_status=!1,this.category=["pending","verified","rejected"],this.activeStatus=["active","inactive"],this.scholarPartTime=[{id:2,title:"Scholarship"},{id:1,title:"Part-time Jobs"}],this.max_date=G(new Date,"yyyy-MM-dd","en","Asia/manila"),this.isLoading=!1,this.modals=[],this.updating_user=!1}ngOnInit(){this.loadList()}static{this.\u0275fac=function(n){return new(n||t)(U(W))}}static{this.\u0275cmp=w({type:t,selectors:[["app-manage-user"]],decls:15,vars:6,consts:[[1,"flex","flex-col","w-full","px-5","overflow-y-auto"],[1,"flex","flex-col","mt-5","min-h-screen"],[1,"flex","justify-between"],["class","text-blue-600",4,"ngIf"],[1,"font-semibold","text-xl"],[1,"text-sm"],["class","bg-white select-none",4,"ngIf"],[1,"flex","flex-col"],[1,"flex","justify-end","bg-white","rounded-md","-mb-3","p-3"],[3,"selected_user",4,"ngIf"],[1,"flex","justify-center","bg-white","rounded-md","shadow-md","my-3","py-3","px-3","-mt-3"],[1,"text-blue-600"],[3,"click"],[3,"icon"],[1,"bg-white","select-none"],[1,"bg-white","w-full"],[1,"flex","flex-row","justify-end","bg-gray-200","m-3","rounded-md","py-2","text-xs"],[1,"mr-3"],[1,"pt-2","mr-1"],[1,"input-txt","capitalize",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,""],[1,"mt-2.5"],[1,"mt-1","bg-blue-600","rounded-md","px-2","text-white","mx-2","py-1",3,"click"],[1,"mr-1",3,"icon"],[1,"flex","flex-col","w-full","bg-white","p-3","min-h-96"],[1,"table-auto"],[1,"w-4/12"],[1,"w-2/12"],[1,"w-1/12"],[1,"w-1/12","text-xs"],[4,"ngIf"],["class","flex flex-col my-20 text-lg",4,"ngIf"],[3,"meta","movePage",4,"ngIf"],[3,"value"],["class","text-sm",3,"ngClass",4,"ngFor","ngForOf"],[1,"text-sm",3,"ngClass"],[1,"mt-2","mr-3","name-icon","hover:opacity-75",3,"click"],[1,"font-medium","text-gray-900","text-sm","xl:text-lg","select-none"],[1,"text-left","text-xs"],[1,"italic"],[1,"text-center"],[1,"px-2","py-1","text-xs","rounded-full","text-white",3,"ngClass"],[1,"mr-2",3,"icon"],[1,"rounded-md","bg-gray-500","w-14","py-1","text-xs","text-white","hover:opacity-75",3,"click"],[1,"ml-1",3,"icon"],[1,"inline-flex","relative","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModelChange","click","ngModel"],[1,"w-12","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[3px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600","disabled:opacity-7"],["colspan","4",1,"text-center","italic"],[1,"flex","flex-col","my-20","text-lg"],[1,"flex","justify-center","text-center","text-blue-500"],["animation","spin",3,"icon"],[1,"flex","justify-center"],[3,"movePage","meta"],[1,"px-3","py-1","rounded-full","text-sm","text-white","select-none",3,"ngClass"],[3,"selected_user"],[1,"btn-blue","bg-red-500","mr-3","px-10",3,"click","disabled"],["animation","spin",3,"icon",4,"ngIf"],[1,"btn-blue","px-10",3,"click","disabled"]],template:function(n,i){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),_(4,ye,3,1,"span",3),a(5,"span",4),l(6," User Accounts "),r()()(),a(7,"span",5),l(8," Listing of Users, List of User Reports, Delete User Accounts, Data Backups, Audit Trail "),r(),_(9,Pe,39,10,"div",6),a(10,"div",7),_(11,Fe,4,7,"div",8)(12,Ne,1,1,"app-messaging-sms",9)(13,Ae,1,1,"app-user-information",9)(14,We,7,4,"div",10),r()()()),n&2&&(o(4),s("ngIf",i.modals["user-information"]),o(5),s("ngIf",!i.modals["user-information"]&&!i.modals["show-sms"]),o(2),x(i.selected_user?11:-1),o(),s("ngIf",i.modals["show-sms"]),o(),s("ngIf",i.modals["user-information"]),o(),x(i.modals["user-information"]&&(i.updating_user||i.selected_user&&i.selected_user.user_verified===null)?14:-1))},dependencies:[K,Q,T,L,O,ee,te,Y,$,V,P,D,R],styles:["td[_ngcontent-%COMP%]{padding:0 5px}"]})}}return t})();var Oe=[{path:"",component:de}],pe=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=S({type:t})}static{this.\u0275inj=M({imports:[q.forChild(Oe),q]})}}return t})();var st=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=S({type:t})}static{this.\u0275inj=M({imports:[E,pe,j,O,F,D,R]})}}return t})();export{st as ManageUserModule};
