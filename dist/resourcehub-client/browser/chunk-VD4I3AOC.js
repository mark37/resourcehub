import{a as L}from"./chunk-UWOP32XS.js";import{b as me,c as V,e as h,f as T,g as ce,h as w,i as p,j as de,k as se,l as pe,n as ue,o as fe,p as _e,q as xe,r as ge,s as ve,t as he,u as ye,v as be,w as Ce,x as Ee,y as we}from"./chunk-POSQ46WM.js";import{a as O}from"./chunk-EDMWRYVU.js";import{A as S,Ba as K,Ca as Z,Da as ee,E as M,F as I,Fa as te,Ha as k,Ia as ie,J,K as g,L as v,La as R,Ma as Y,P as H,Va as ne,Vb as Ie,Wa as oe,X as a,Xa as re,Y as E,Ya as N,Za as ae,_a as P,aa as u,ca as l,cc as D,dc as j,ja as n,ka as t,kb as le,la as d,ma as y,na as _,nb as q,oa as s,pb as A,ra as Q,sa as z,ta as X,tb as Fe,va as o,vb as Se,wa as x,xa as b,xb as Me,ya as G}from"./chunk-7PEPAECK.js";import{a as F}from"./chunk-GAL4ENT6.js";function ke(){return new w({ofw_flag:new p(!1),fathers_name:new p(null),fathers_occupation:new p(null),fathers_company:new p(null),mothers_name:new p(null),mothers_occupation:new p(null),mothers_company:new p(null),average_monthly_income:new p(null)})}function Ne(){return new w({id:new p(null),lib_education_level_id:new p(null),lib_academic_program_id:new p(null),school_name:new p(null),start_year:new p(null),end_year:new p(null)})}function Pe(){return new w({id:new p(null),full_name:new p(null),company_name:new p(null),contact_number:new p(null)})}function Ve(){return new w({id:new p(null),employer_name:new p(null),position:new p(null),job_description:new p(null),start_date:new p(null),end_date:new p(null)})}function Te(){return new w({id:new p(null),lib_school_id:new p(null),lib_academic_program_id:new p(null),lib_year_level_id:new p(null),cor_url:new p(null),grade_url:new p(null),scholar_flag:new p(!1),shiftee_flag:new p(!1),irregular_flag:new p(!1)})}var Be=["confirmCode"];function Ge(i,c){if(i&1&&d(0,"fa-icon",23),i&2){let e=s();l("icon",e.faCircleNotch)}}function Re(i,c){if(i&1&&d(0,"fa-icon",24),i&2){let e=s();l("icon",e.faBan)}}var U=(()=>{class i{onSubmit(){this.is_loading=!0;let e={is_active:!1};this.confirm_code===this.confirmation_code?this.http.update("user-information/",this.selected_application_id,e).subscribe({next:()=>{this.is_loading=!1,this.message="Code Match, account deactivated",localStorage.clear(),this.router.navigate(["/"])},error:m=>{console.log(m),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.message="Code mismatch, please try again")}generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(Math.random()*1e3).toString().padStart(4,"0")}closeModal(){this.toggleCancelModal.emit()}constructor(e,m){this.http=e,this.router=m,this.toggleCancelModal=new H,this.faBan=Me,this.faCircleNotch=A,this.confirm_code="0000",this.is_loading=!1,this.message=null}ngOnChanges(e){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}static{this.\u0275fac=function(m){return new(m||i)(E(O),E(le))}}static{this.\u0275cmp=M({type:i,selectors:[["app-deactivate-account"]],viewQuery:function(m,r){if(m&1&&Q(Be,5),m&2){let f;z(f=X())&&(r.inputElement=f.first)}},inputs:{selected_application_id:"selected_application_id"},outputs:{toggleCancelModal:"toggleCancelModal"},standalone:!0,features:[J,te],decls:32,vars:7,consts:[["confirmCode",""],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-blue-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","minlength","4","maxlength","4","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup.enter","ngModelChange","ngModel"],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-blue-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-blue-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],["class","mx-0 my-0 text-white","animation","spin",3,"icon",4,"ngIf"],["class","mx-0 my-0 text-white",3,"icon",4,"ngIf"],[1,"px-5","mx-10","mt-5","italic","text-sm","text-blue-500"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"],["animation","spin",1,"mx-0","my-0","text-white",3,"icon"],[1,"mx-0","my-0","text-white",3,"icon"]],template:function(m,r){if(m&1){let f=y();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),o(5," Deactivate Account "),t()(),n(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),o(10," Your are about to deactivate your account. Please enter the generated cancel code in order to proceed. "),t(),n(11,"div",10)(12,"span",11),o(13,"Deactivate Code"),t(),n(14,"span",12),o(15),t()(),n(16,"div",10)(17,"label",13),o(18,"Enter Code"),t(),n(19,"input",14,0),_("keyup.enter",function(){return g(f),v(r.onSubmit())}),ee("ngModelChange",function(B){return g(f),Z(r.confirmation_code,B)||(r.confirmation_code=B),v(B)}),t()(),n(21,"div",15)(22,"button",16),_("click",function(){return g(f),v(r.onSubmit())}),u(23,Ge,1,1,"fa-icon",17)(24,Re,1,1,"fa-icon",18),o(25," Deactivate "),t()()(),n(26,"div",19),o(27),t()()(),n(28,"div",20)(29,"button",21),_("click",function(){return g(f),v(r.closeModal())}),o(30,"Close"),t()()()()(),d(31,"div",22)}m&2&&(a(15),x(r.confirm_code),a(4),K("ngModel",r.confirmation_code),a(3),l("disabled",!r.confirmation_code||r.is_loading),a(),l("ngIf",r.is_loading),a(),l("ngIf",!r.is_loading),a(3),b(" ",r.message," "),a(2),l("disabled",r.is_loading))},dependencies:[j,D,Ee,V,T,ye,be,de,P,N]})}}return i})();var qe=(i,c)=>({"bg-blue-500":i,"bg-orange-500":c}),W=i=>({"bg-slate-50":i});function $e(i,c){if(i&1&&d(0,"fa-icon",9),i&2){let e=s();l("icon",e.faEdit)}}function We(i,c){if(i&1&&d(0,"app-user-information",11),i&2){let e=s(2);l("selected_user",e.selected_user)}}function Je(i,c){if(i&1&&(n(0,"div"),u(1,We,1,1,"app-user-information",10),t()),i&2){let e=s();a(),l("ngIf",e.show_form)}}function He(i,c){if(i&1&&(n(0,"option",79),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function Qe(i,c){if(i&1&&(n(0,"option",79),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function ze(i,c){if(i&1&&(n(0,"option",79),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function Xe(i,c){if(i&1&&d(0,"fa-icon",80),i&2){let e=s(2);l("icon",e.faCircleNotch)}}function Ke(i,c){if(i&1&&(n(0,"option",79),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function Ze(i,c){if(i&1&&d(0,"fa-icon",80),i&2){let e=s(2);l("icon",e.faCircleNotch)}}function et(i,c){if(i&1&&(n(0,"option",79),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function tt(i,c){if(i&1&&(n(0,"option",79),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function it(i,c){if(i&1&&d(0,"fa-icon",81),i&2){let e=s(2);l("icon",e.faAdd)}}function nt(i,c){if(i&1&&d(0,"fa-icon",80),i&2){let e=s(2);l("icon",e.faCircleNotch)}}function ot(i,c){if(i&1){let e=y();n(0,"tr",83)(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td")(8,"button",84),_("click",function(){let r=g(e).$implicit,f=s(3);return v(f.loadSelected(f.educationForm,r))}),d(9,"fa-icon",85),t()()()}if(i&2){let e=c.$implicit,m=c.odd,r=s(3);l("ngClass",k(6,W,m)),a(2),x(e.school_name),a(2),x(e.educationLevel.desc),a(2),G("",e.start_year," to ",e.end_year,""),a(3),l("icon",r.faEdit)}}function rt(i,c){if(i&1&&(n(0,"tbody"),u(1,ot,10,8,"tr",82),t()),i&2){let e=s(2);a(),l("ngForOf",e.educationList)}}function at(i,c){if(i&1&&(n(0,"div",86),d(1,"fa-icon",80),t()),i&2){let e=s(2);a(),l("icon",e.faCircleNotch)}}function lt(i,c){if(i&1&&d(0,"fa-icon",81),i&2){let e=s(2);l("icon",e.faAdd)}}function mt(i,c){if(i&1&&d(0,"fa-icon",80),i&2){let e=s(2);l("icon",e.faCircleNotch)}}function ct(i,c){if(i&1){let e=y();n(0,"tr",88)(1,"td"),o(2),t(),n(3,"td",89)(4,"span",90),o(5),t(),d(6,"br"),n(7,"span"),o(8,"Job Description:"),t(),o(9),t(),n(10,"td"),o(11),R(12,"date"),R(13,"date"),t(),n(14,"td")(15,"button",84),_("click",function(){let r=g(e).$implicit,f=s(3);return v(f.loadSelected(f.workExperienceForm,r))}),d(16,"fa-icon",85),t()()()}if(i&2){let e=c.$implicit,m=c.odd,r=s(3);l("ngClass",k(13,W,m)),a(2),x(e.employer_name),a(3),x(e.position),a(4),b(" ",e.job_description," "),a(2),G("",Y(12,7,e.start_date,"MMM yyyy")," to ",e.end_date?Y(13,10,e.end_date,"MMM yyyy"):"Present",""),a(5),l("icon",r.faEdit)}}function dt(i,c){i&1&&(n(0,"tr")(1,"td",91),o(2,"No work experience recorded"),t()())}function st(i,c){if(i&1&&(n(0,"tbody"),u(1,ct,17,15,"tr",87)(2,dt,3,0,"tr",7),t()),i&2){let e=s(2);a(),l("ngForOf",e.workExperienceList),a(),l("ngIf",!e.workExperienceList)}}function pt(i,c){if(i&1&&(n(0,"div",92),d(1,"fa-icon",80),t()),i&2){let e=s(2);a(),l("icon",e.faCircleNotch)}}function ut(i,c){if(i&1&&d(0,"fa-icon",81),i&2){let e=s(2);l("icon",e.faAdd)}}function ft(i,c){if(i&1&&d(0,"fa-icon",80),i&2){let e=s(2);l("icon",e.faCircleNotch)}}function _t(i,c){if(i&1){let e=y();n(0,"tr",83)(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td")(8,"button",84),_("click",function(){let r=g(e).$implicit,f=s(3);return v(f.loadSelected(f.referenceForm,r))}),d(9,"fa-icon",85),t()()()}if(i&2){let e=c.$implicit,m=c.odd,r=s(3);l("ngClass",k(5,W,m)),a(2),x(e.full_name),a(2),x(e.company_name),a(2),x(e.contact_number),a(3),l("icon",r.faEdit)}}function xt(i,c){if(i&1&&(n(0,"tbody"),u(1,_t,10,7,"tr",82),t()),i&2){let e=s(2);a(),l("ngForOf",e.referenceList)}}function gt(i,c){if(i&1&&(n(0,"div",86),d(1,"fa-icon",80),t()),i&2){let e=s(2);a(),l("icon",e.faCircleNotch)}}function vt(i,c){if(i&1){let e=y();n(0,"div")(1,"fieldset",12)(2,"legend",13),o(3,"School Information"),t(),n(4,"form",14)(5,"div",15)(6,"div",16),d(7,"input",17),n(8,"label"),o(9,"Are you already a GRANTEE of a scholarship program?"),t()(),n(10,"div",16),d(11,"input",18),n(12,"label"),o(13,"Are you a SHIFTEE?"),t()(),n(14,"div",16),d(15,"input",19),n(16,"label"),o(17,"Are you an IRREGULAR student?"),t()()(),n(18,"div")(19,"label",20),o(20,"School"),t(),n(21,"select",21),u(22,He,2,2,"option",22),t()(),n(23,"div")(24,"label",20),o(25,"Course"),t(),n(26,"select",23),u(27,Qe,2,2,"option",22),t()(),n(28,"div")(29,"label",20),o(30,"Year Level"),t(),n(31,"select",24),u(32,ze,2,2,"option",22),t()(),n(33,"div",25)(34,"button",26),_("click",function(){g(e);let r=s();return v(r.updateAcademicInfo())}),u(35,Xe,1,1,"fa-icon",27),o(36," Update "),t()()()(),n(37,"fieldset",28)(38,"legend",29),o(39,"Parents Information"),t(),n(40,"form",30)(41,"div",31)(42,"div",32),d(43,"input",33),n(44,"label",34),o(45,"One or both parents is an overseas filipino worker (OFW)"),t()(),n(46,"div")(47,"label"),o(48,"Father's Name"),t(),d(49,"input",35),t(),n(50,"div")(51,"label"),o(52,"Mother's Name"),t(),d(53,"input",36),t(),n(54,"div")(55,"label"),o(56,"Father's Occupation"),t(),d(57,"input",37),t(),n(58,"div")(59,"label"),o(60,"Mother's Occupation"),t(),d(61,"input",38),t(),n(62,"div")(63,"label"),o(64,"Father's Company"),t(),d(65,"input",39),t(),n(66,"div")(67,"label"),o(68,"Mother's Company"),t(),d(69,"input",40),t(),n(70,"div",41)(71,"label"),o(72,"Households Average Monthly Income"),t(),n(73,"select",42),u(74,Ke,2,2,"option",22),t()(),n(75,"div",43)(76,"button",26),_("click",function(){g(e);let r=s();return v(r.onSubmit("parent-information",r.parentsForm,"parentsInformation","parentsForm"))}),u(77,Ze,1,1,"fa-icon",27),o(78," Update "),t()()()()(),n(79,"fieldset",28)(80,"legend",44),o(81,"Educational Background"),t(),n(82,"form",45)(83,"div",46)(84,"div")(85,"label"),o(86,"Name of School"),t(),d(87,"input",47),t(),n(88,"div")(89,"label"),o(90,"Education Level"),t(),n(91,"select",48)(92,"option",49),o(93,"-"),t(),u(94,et,2,2,"option",22),t()(),n(95,"div")(96,"label"),o(97,"Program (optional)"),t(),n(98,"select",50)(99,"option",49),o(100,"-"),t(),u(101,tt,2,2,"option",22),t()(),n(102,"div")(103,"label"),o(104,"Year Attended (Start)"),t(),d(105,"input",51),t(),n(106,"div")(107,"label"),o(108,"Year Attended (End)"),t(),d(109,"input",52),t()(),n(110,"div",53)(111,"button",54),_("click",function(){g(e);let r=s();return v(r.onSubmit("user-education",r.educationForm,"educationList","educationForm"))}),u(112,it,1,1,"fa-icon",55)(113,nt,1,1,"fa-icon",27),o(114),t()()(),n(115,"div",56)(116,"table",57)(117,"thead")(118,"tr")(119,"th"),o(120,"Name of school"),t(),n(121,"th"),o(122,"Education Level"),t(),n(123,"th"),o(124,"Year Attended"),t(),n(125,"th"),o(126,"Action"),t()()(),u(127,rt,2,1,"tbody",7),t(),u(128,at,2,1,"div",58),t()(),n(129,"fieldset",28)(130,"legend",59),o(131,"Work Experience"),t(),n(132,"form",60)(133,"div",61)(134,"div")(135,"label",62),o(136,"Employer name"),t(),d(137,"input",63),t(),n(138,"div")(139,"label",64),o(140,"Position"),t(),d(141,"input",65),t(),n(142,"div")(143,"label",66),o(144,"Appointment Date"),t(),d(145,"input",67),t(),n(146,"div")(147,"label",68),o(148,"End of Contract"),t(),d(149,"input",69),t(),n(150,"div",70)(151,"div")(152,"label"),o(153,"Job Description"),t(),d(154,"textarea",71),t()(),n(155,"div",72)(156,"button",54),_("click",function(){g(e);let r=s();return v(r.onSubmit("user-employment",r.workExperienceForm,"workExperienceList","workExperienceForm"))}),u(157,lt,1,1,"fa-icon",55)(158,mt,1,1,"fa-icon",27),o(159),t()()()(),n(160,"div",56)(161,"table",57)(162,"thead")(163,"tr")(164,"th"),o(165,"Name of Employer"),t(),n(166,"th"),o(167,"Job Position"),t(),n(168,"th"),o(169,"Date"),t(),n(170,"th"),o(171,"Action"),t()()(),u(172,st,3,2,"tbody",7),t(),u(173,pt,2,1,"div",73),t()(),n(174,"fieldset",28)(175,"legend",74),o(176,"References"),t(),n(177,"form",45)(178,"div",75)(179,"div")(180,"label"),o(181,"Name"),t(),d(182,"input",76),t(),n(183,"div")(184,"label"),o(185,"Company name / Job title (optional)"),t(),d(186,"input",77),t(),n(187,"div")(188,"label"),o(189,"Contact Number"),t(),d(190,"input",78),t()(),n(191,"div",53)(192,"button",54),_("click",function(){g(e);let r=s();return v(r.onSubmit("user-reference",r.referenceForm,"referenceList","referenceForm"))}),u(193,ut,1,1,"fa-icon",55)(194,ft,1,1,"fa-icon",27),o(195),t()()(),n(196,"div",56)(197,"table",57)(198,"thead")(199,"tr")(200,"th"),o(201,"Name of school"),t(),n(202,"th"),o(203,"Company / Job Title"),t(),n(204,"th"),o(205,"Contact Number"),t(),n(206,"th"),o(207,"Action"),t()()(),u(208,xt,2,1,"tbody",7),t(),u(209,gt,2,1,"div",58),t()()()}if(i&2){let e=s();a(4),l("formGroup",e.userForm),a(18),l("ngForOf",e.school_list),a(5),l("ngForOf",e.academic_programs),a(5),l("ngForOf",e.year_level_list),a(2),l("disabled",!e.userForm.valid||e.isFormSaving["user-information"]),a(),l("ngIf",e.isFormSaving["user-information"]),a(5),l("formGroup",e.parentsForm),a(34),l("ngForOf",e.income_list),a(2),l("disabled",!e.parentsForm.valid||e.isFormSaving["parent-information"]),a(),l("ngIf",e.isFormSaving["parent-information"]),a(5),l("formGroup",e.educationForm),a(10),l("ngValue",null),a(2),l("ngForOf",e.education_levels),a(5),l("ngValue",null),a(2),l("ngForOf",e.academic_programs),a(10),l("disabled",!e.educationForm.valid||e.isFormSaving["user-education"]),a(),l("ngIf",!e.isFormSaving["user-education"]&&!e.educationForm.value.id),a(),l("ngIf",e.isFormSaving["user-education"]),a(),b(" ",e.educationForm.value.id?"Update":"Add"," "),a(13),l("ngIf",!e.isFormSaving["user-education"]),a(),l("ngIf",e.isFormSaving["user-education"]),a(4),l("formGroup",e.workExperienceForm),a(24),l("disabled",!e.workExperienceForm.valid||e.isFormSaving["user-employment"]),a(),l("ngIf",!e.isFormSaving["user-employment"]&&!e.workExperienceForm.value.id),a(),l("ngIf",e.isFormSaving["user-employment"]),a(),b(" ",e.workExperienceForm.value.id?"Update":"Add"," "),a(13),l("ngIf",!e.isFormSaving["user-employment"]),a(),l("ngIf",e.isFormSaving["user-employment"]),a(4),l("formGroup",e.referenceForm),a(15),l("disabled",!e.referenceForm.valid||e.isFormSaving["user-reference"]),a(),l("ngIf",!e.isFormSaving["user-reference"]&&!e.referenceForm.value.id),a(),l("ngIf",e.isFormSaving["user-reference"]),a(),b(" ",e.referenceForm.value.id?"Update":"Add"," "),a(13),l("ngIf",!e.isFormSaving["user-reference"]),a(),l("ngIf",e.isFormSaving["user-reference"])}}function ht(i,c){if(i&1){let e=y();n(0,"app-deactivate-account",93),_("toggleCancelModal",function(){g(e);let r=s();return v(r.toggleCancelModal())}),t()}if(i&2){let e=s();l("selected_application_id",e.selected_user_id)}}var Ae=(()=>{class i{onFileSelected(e,m){this.file_err_message=null;let r=e.target.files?.[0];r&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(r.type)?this.userForm.patchValue({[m]:r}):(this.file_err_message="Invalid file type. Only PDF, DOC, DOCX, JPG, and PNG files are allowed.",this.userForm.patchValue({[m]:null})),console.log(this.userForm.value)}convertDates(e){return e?ne(e,"yyyy-MM","en","Asia/manila"):null}updateAcademicInfo(){this.isFormSaving["user-information"]=!0,this.userForm.patchValue({scholar_flag:this.userForm.value.scholar_flag?1:0,shiftee_flag:this.userForm.value.shiftee_flag?1:0,irregular_flag:this.userForm.value.irregular_flag?1:0});let e=new FormData;Object.keys(this.userForm.controls).forEach(m=>{let r=this.userForm.get(m);console.log(r),r?.value instanceof File?e.append(m,r.value):r&&e.append(m,r.value??"")}),console.log(e),this.http.update("user-information/",this.userForm.value.id,this.userForm.value).subscribe({next:m=>{this.isFormSaving["user-information"]=!1,console.log(m)},error:m=>console.log(m)})}onSubmit(e,m,r,f){m.value.start_date&&m.patchValue({start_date:this.convertDates(m.value.start_date),end_date:this.convertDates(m.value.end_date)}),this.http.post(e,m.value).subscribe({next:C=>{this[f].reset(),this.loadData(e,r)},error:C=>console.log(C)})}loadData(e,m){this.isFormSaving[e]=!0;let r={user_id:this.selected_user.id};this.http.get(e,{params:r}).subscribe({next:f=>{this[m]=f.data,m==="parentsInformation"&&this.parentsForm.patchValue(F({},f.data)),this.isFormSaving[e]=!1},error:f=>console.log(f)})}loadSelected(e,m){e.patchValue(F({},m))}loadUserInformation(e){this.show_form=!1;let m={user_info:1};this.http.get("user-information",{params:m}).subscribe({next:r=>{console.log(r),this.selected_user=r.data[0],this.show_form=!0,this.userForm.patchValue(F({},r.data[0])),console.log(this.userForm.value),e||this.createForms()},error:r=>console.log(r)})}deactivateAccount(){this.selected_user_id=this.userForm.value.id,this.toggleCancelModal()}toggleCancelModal(){console.log("test"),this.modals["deactivate-account"]=!this.modals["deactivate-account"]}createForms(){this.loadData("user-education","educationList"),this.loadData("user-employment","workExperienceList"),this.loadData("user-reference","referenceList"),this.loadData("parent-information","parentsInformation"),this.createEducationForm(),this.createReferenceForm(),this.createWorkExperienceForm(),this.createParentsForm()}loadLibraries(e,m){this.http.get("libraries/"+e).subscribe({next:r=>{this[m]=r.data},error:r=>console.log(r)})}createEducationForm(){this.educationForm=this.formBuilder.group({id:[null],lib_education_level_id:[null,h.required],lib_academic_program_id:[null],school_name:[null,h.required],start_year:[null,h.required],end_year:[null,h.required]})}createReferenceForm(){this.referenceForm=this.formBuilder.group({id:[null],full_name:[null,h.required],company_name:[null],contact_number:[null,h.required]})}createWorkExperienceForm(){this.workExperienceForm=this.formBuilder.group({id:[null],employer_name:[null,h.required],position:[null,h.required],job_description:[null],start_date:[null,h.required],end_date:[null,h.required]})}createParentsForm(){this.parentsForm=this.formBuilder.group({ofw_flag:[!1],fathers_name:[null],fathers_occupation:[null],fathers_company:[null],mothers_name:[null],mothers_occupation:[null],mothers_company:[null],average_monthly_income:[null,h.required]})}toggleEditForm(){this.showUpdateForm=!this.showUpdateForm,this.education_levels||this.loadLibraries("education-level","education_levels"),this.academic_programs||this.loadLibraries("academic-programs","academic_programs"),this.income_list||this.loadLibraries("monthly-income","income_list"),this.school_list||this.loadLibraries("school","school_list"),this.year_level_list||this.loadLibraries("year-level","year_level_list"),this.loadUserInformation(!0)}constructor(e,m){this.http=e,this.formBuilder=m,this.faEdit=Fe,this.faAdd=Ie,this.faCircleNotch=A,this.faArrowUpFromBracket=Se,this.educationForm=Ne(),this.referenceForm=Pe(),this.workExperienceForm=Ve(),this.parentsForm=ke(),this.userForm=Te(),this.show_form=!1,this.showUpdateForm=!1,this.isFormSaving=[],this.modals=[]}ngOnInit(){this.loadUserInformation()}static{this.\u0275fac=function(m){return new(m||i)(E(O),E(Ce))}}static{this.\u0275cmp=M({type:i,selectors:[["app-manage-profile"]],decls:13,vars:9,consts:[[1,"bg-gray-100","p-5","min-h-screen"],[1,"flex","justify-between","mb-3"],[1,"font-semibold","text-lg","text-blue-600"],[1,"flex","justify-end","text-sm"],[1,"btn-blue","bg-gray-400",3,"click"],[1,"btn-blue",3,"click","ngClass"],["class","text-white",3,"icon",4,"ngIf"],[4,"ngIf"],[3,"selected_application_id","toggleCancelModal",4,"ngIf"],[1,"text-white",3,"icon"],[3,"selected_user",4,"ngIf"],[3,"selected_user"],[1,"rounded-md","border","border-gray-400","bg-white"],[1,"ml-5","px-4","font-semibold","bg-gray-200","py-2","rounded-mx"],[1,"flex","flex-col","md:grid","md:grid-cols-3","gap-4","p-3","mx-4","border-b-2","border-gray-200",3,"formGroup"],[1,"md:col-span-3","md:grid","md:grid-cols-3","flex","flex-col"],[1,"flex"],["type","checkbox","formControlName","scholar_flag",1,"input-checkbox","mr-1"],["type","checkbox","formControlName","shiftee_flag",1,"input-checkbox","mr-1"],["type","checkbox","formControlName","irregular_flag",1,"input-checkbox","mr-1"],["for","school"],["formControlName","lib_school_id","name","lib_school_id","id","lib_school_id",1,"input-txt"],[3,"value",4,"ngFor","ngForOf"],["formControlName","lib_academic_program_id","name","lib_academic_program_id","id","lib_academic_program_id",1,"input-txt"],["formControlName","lib_year_level_id","name","lib_year_level_id","id","lib_year_level_id",1,"input-txt"],[1,"flex","justify-center","col-span-3"],[1,"btn-blue-nr","w-32","text-sm","py-1.5",3,"click","disabled"],["animation","spin",3,"icon",4,"ngIf"],[1,"rounded-md","border","border-gray-400","bg-white","mt-3"],[1,"ml-5","px-4","font-semibold","bg-rose-200","py-2","rounded-mx"],[1,"flex","p-3","mx-4","border-b-2","border-gray-200",3,"formGroup"],[1,"flex","flex-col","md:grid","md:grid-cols-2","md:gap-x-16","md:mx-24"],[1,"col-span-2","flex","justify-center","mb-3"],["id","ofw_flag","formControlName","ofw_flag","type","checkbox",1,"rounded-md","text-lg","mr-1"],["for","ofw_flag"],["formControlName","fathers_name","type","text",1,"input-txt"],["formControlName","mothers_name","type","text",1,"input-txt"],["formControlName","fathers_occupation","type","text",1,"input-txt"],["formControlName","mothers_occupation","type","text",1,"input-txt"],["formControlName","fathers_company","type","text",1,"input-txt"],["formControlName","mothers_company","type","text",1,"input-txt"],[1,"col-span-2"],["id","average_monthly_income","formControlName","average_monthly_income",1,"input-txt"],[1,"col-span-2","flex","justify-end","md:justify-center","mt-3"],[1,"ml-5","px-4","font-semibold","bg-blue-200","py-2","rounded-mx"],[1,"flex","flex-col","md:flex-row","p-3","mx-4","border-b-2","border-gray-200",3,"formGroup"],[1,"flex","flex-col","md:grid","md:grid-cols-5","md:gap-x-4"],["formControlName","school_name","type","text",1,"input-txt"],["formControlName","lib_education_level_id",1,"input-txt"],[3,"ngValue"],["formControlName","lib_academic_program_id",1,"input-txt"],["formControlName","start_year","type","number","id","year","name","year","min","1900","max","2100","placeholder","YYYY",1,"input-txt"],["formControlName","end_year","type","number","id","year","name","year","min","1900","max","2100","placeholder","YYYY",1,"input-txt"],[1,"ml-3","mt-6","flex","justify-end"],[1,"btn-blue-nr","w-20","text-sm","py-1.5",3,"click","disabled"],[3,"icon",4,"ngIf"],[1,"shadow-md","p-4","border","border-gray-400","rounded-md","m-4"],[1,"table-auto","w-full","bg-white","select-none"],["class","w-full flex justify-center text-blue-500",4,"ngIf"],[1,"ml-5","px-4","font-semibold","bg-orange-200","py-2","rounded-mx"],[1,"flex","flex-col","p-3","mx-4","border-b-2","border-gray-200",3,"formGroup"],[1,"flex","flex-col","md:grid","grid-cols-4","gap-x-4"],["for","employer_name"],["formControlName","employer_name","id","employer_name","type","text",1,"input-txt"],["for","position"],["formControlName","position","id","position","type","text",1,"input-txt"],["for","start_date"],["formControlName","start_date","type","month","id","start_date","name","start_date","placeholder","yyyy/MM/dd",1,"input-txt"],["for","end_date"],["formControlName","end_date","type","month","id","end_date","name","end_date","placeholder","yyyy/MM/dd",1,"input-txt"],[1,"col-span-4"],["rows","2","formControlName","job_description","type","text",1,"input-txt"],[1,"col-span-4","flex","justify-end"],["class","w-full flex justify-center",4,"ngIf"],[1,"ml-5","px-4","font-semibold","bg-green-200","py-2","rounded-mx"],[1,"flex","flex-col","md:grid","grid-cols-3","gap-x-4"],["formControlName","full_name","type","text",1,"input-txt"],["formControlName","company_name","type","text",1,"input-txt"],["formControlName","contact_number","type","text",1,"input-txt"],[3,"value"],["animation","spin",3,"icon"],[3,"icon"],["class","hover:bg-blue-50",3,"ngClass",4,"ngFor","ngForOf"],[1,"hover:bg-blue-50",3,"ngClass"],[3,"click"],[1,"text-orange-500",3,"icon"],[1,"w-full","flex","justify-center","text-blue-500"],["class","hover:bg-blue-100",3,"ngClass",4,"ngFor","ngForOf"],[1,"hover:bg-blue-100",3,"ngClass"],[1,"text-left"],[1,"font-semibold"],["colspan","4",1,"text-center","italic","py-5"],[1,"w-full","flex","justify-center"],[3,"toggleCancelModal","selected_application_id"]],template:function(m,r){m&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),o(3," User Profile "),t(),n(4,"div",3)(5,"button",4),_("click",function(){return r.deactivateAccount()}),o(6," Deactivate Account "),t(),n(7,"button",5),_("click",function(){return r.toggleEditForm()}),u(8,$e,1,1,"fa-icon",6),o(9),t()()(),u(10,Je,2,1,"div",7)(11,vt,210,35,"div",7),t(),u(12,ht,1,1,"app-deactivate-account",8)),m&2&&(a(7),l("ngClass",ie(6,qe,r.showUpdateForm,!r.showUpdateForm)),a(),l("ngIf",!r.showUpdateForm),a(),b(" ",r.showUpdateForm?"Back":"Update"," "),a(),l("ngIf",!r.showUpdateForm),a(),l("ngIf",r.showUpdateForm),a(),l("ngIf",r.modals["deactivate-account"]))},dependencies:[oe,re,N,D,L,se,xe,ge,V,pe,me,_e,T,ce,he,ve,ue,fe,U,ae],styles:["td[_ngcontent-%COMP%]{text-align:center}"]})}}return i})();var yt=[{path:"",component:Ae}],De=(()=>{class i{static{this.\u0275fac=function(m){return new(m||i)}}static{this.\u0275mod=I({type:i})}static{this.\u0275inj=S({imports:[q.forChild(yt),q]})}}return i})();var Xt=(()=>{class i{static{this.\u0275fac=function(m){return new(m||i)}}static{this.\u0275mod=I({type:i})}static{this.\u0275inj=S({imports:[P,De,j,L,we,U]})}}return i})();export{Xt as ManageProfileModule};
