import{a as L}from"./chunk-WJYA3GMW.js";import{b as me,c as V,e as h,f as T,g as ce,h as E,i as s,j as de,k as se,l as pe,n as ue,o as fe,p as _e,q as xe,r as ge,s as ve,t as he,u as ye,v as be,w as Ce,x as we,y as Ee}from"./chunk-POSQ46WM.js";import{a as O}from"./chunk-EDMWRYVU.js";import{A as S,Ba as K,Ca as Z,Da as ee,E as M,F as I,Fa as te,Ha as k,Ia as ie,J,K as g,L as v,La as R,Ma as Y,P as H,Va as ne,Vb as Ie,Wa as oe,X as a,Xa as re,Y as w,Ya as N,Za as ae,_a as P,aa as u,ca as l,cc as D,dc as j,ja as n,ka as t,kb as le,la as d,ma as y,na as _,nb as q,oa as p,pb as A,ra as Q,sa as z,ta as X,tb as Fe,va as o,vb as Se,wa as x,xa as b,xb as Me,ya as B}from"./chunk-7PEPAECK.js";import{a as F}from"./chunk-GAL4ENT6.js";function ke(){return new E({ofw_flag:new s(!1),fathers_name:new s(null),fathers_occupation:new s(null),fathers_company:new s(null),mothers_name:new s(null),mothers_occupation:new s(null),mothers_company:new s(null),average_monthly_income:new s(null)})}function Ne(){return new E({id:new s(null),lib_education_level_id:new s(null),lib_academic_program_id:new s(null),school_name:new s(null),start_year:new s(null),end_year:new s(null)})}function Pe(){return new E({id:new s(null),full_name:new s(null),company_name:new s(null),contact_number:new s(null)})}function Ve(){return new E({id:new s(null),employer_name:new s(null),position:new s(null),job_description:new s(null),start_date:new s(null),end_date:new s(null)})}function Te(){return new E({id:new s(null),lib_school_id:new s(null),lib_academic_program_id:new s(null),lib_year_level_id:new s(null),cor_url:new s(null),grade_url:new s(null),scholar_flag:new s(!1),shiftee_flag:new s(!1),irregular_flag:new s(!1),pwd_flag:new s(!1),gwa:new s(null)})}var Ge=["confirmCode"];function Be(i,c){if(i&1&&d(0,"fa-icon",23),i&2){let e=p();l("icon",e.faCircleNotch)}}function Re(i,c){if(i&1&&d(0,"fa-icon",24),i&2){let e=p();l("icon",e.faBan)}}var U=(()=>{class i{onSubmit(){this.is_loading=!0;let e={is_active:!1};this.confirm_code===this.confirmation_code?this.http.update("user-information/",this.selected_application_id,e).subscribe({next:()=>{this.is_loading=!1,this.message="Code Match, account deactivated",localStorage.clear(),this.router.navigate(["/"])},error:m=>{console.log(m),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.message="Code mismatch, please try again")}generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(Math.random()*1e3).toString().padStart(4,"0")}closeModal(){this.toggleCancelModal.emit()}constructor(e,m){this.http=e,this.router=m,this.toggleCancelModal=new H,this.faBan=Me,this.faCircleNotch=A,this.confirm_code="0000",this.is_loading=!1,this.message=null}ngOnChanges(e){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}static{this.\u0275fac=function(m){return new(m||i)(w(O),w(le))}}static{this.\u0275cmp=M({type:i,selectors:[["app-deactivate-account"]],viewQuery:function(m,r){if(m&1&&Q(Ge,5),m&2){let f;z(f=X())&&(r.inputElement=f.first)}},inputs:{selected_application_id:"selected_application_id"},outputs:{toggleCancelModal:"toggleCancelModal"},standalone:!0,features:[J,te],decls:32,vars:7,consts:[["confirmCode",""],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-blue-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","minlength","4","maxlength","4","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup.enter","ngModelChange","ngModel"],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-blue-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-blue-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],["class","mx-0 my-0 text-white","animation","spin",3,"icon",4,"ngIf"],["class","mx-0 my-0 text-white",3,"icon",4,"ngIf"],[1,"px-5","mx-10","mt-5","italic","text-sm","text-blue-500"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"],["animation","spin",1,"mx-0","my-0","text-white",3,"icon"],[1,"mx-0","my-0","text-white",3,"icon"]],template:function(m,r){if(m&1){let f=y();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),o(5," Deactivate Account "),t()(),n(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),o(10," Your are about to deactivate your account. Please enter the generated cancel code in order to proceed. "),t(),n(11,"div",10)(12,"span",11),o(13,"Deactivate Code"),t(),n(14,"span",12),o(15),t()(),n(16,"div",10)(17,"label",13),o(18,"Enter Code"),t(),n(19,"input",14,0),_("keyup.enter",function(){return g(f),v(r.onSubmit())}),ee("ngModelChange",function(G){return g(f),Z(r.confirmation_code,G)||(r.confirmation_code=G),v(G)}),t()(),n(21,"div",15)(22,"button",16),_("click",function(){return g(f),v(r.onSubmit())}),u(23,Be,1,1,"fa-icon",17)(24,Re,1,1,"fa-icon",18),o(25," Deactivate "),t()()(),n(26,"div",19),o(27),t()()(),n(28,"div",20)(29,"button",21),_("click",function(){return g(f),v(r.closeModal())}),o(30,"Close"),t()()()()(),d(31,"div",22)}m&2&&(a(15),x(r.confirm_code),a(4),K("ngModel",r.confirmation_code),a(3),l("disabled",!r.confirmation_code||r.is_loading),a(),l("ngIf",r.is_loading),a(),l("ngIf",!r.is_loading),a(3),b(" ",r.message," "),a(2),l("disabled",r.is_loading))},dependencies:[j,D,we,V,T,ye,be,de,P,N]})}}return i})();var qe=(i,c)=>({"bg-blue-500":i,"bg-orange-500":c}),W=i=>({"bg-slate-50":i});function $e(i,c){if(i&1&&d(0,"fa-icon",9),i&2){let e=p();l("icon",e.faEdit)}}function We(i,c){if(i&1&&d(0,"app-user-information",11),i&2){let e=p(2);l("selected_user",e.selected_user)}}function Je(i,c){if(i&1&&(n(0,"div"),u(1,We,1,1,"app-user-information",10),t()),i&2){let e=p();a(),l("ngIf",e.show_form)}}function He(i,c){if(i&1&&(n(0,"option",81),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function Qe(i,c){if(i&1&&(n(0,"option",81),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function ze(i,c){if(i&1&&(n(0,"option",81),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function Xe(i,c){if(i&1&&d(0,"fa-icon",82),i&2){let e=p(2);l("icon",e.faCircleNotch)}}function Ke(i,c){if(i&1&&(n(0,"option",81),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function Ze(i,c){if(i&1&&d(0,"fa-icon",82),i&2){let e=p(2);l("icon",e.faCircleNotch)}}function et(i,c){if(i&1&&(n(0,"option",81),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function tt(i,c){if(i&1&&(n(0,"option",81),o(1),t()),i&2){let e=c.$implicit;l("value",e.id),a(),x(e.desc)}}function it(i,c){if(i&1&&d(0,"fa-icon",83),i&2){let e=p(2);l("icon",e.faAdd)}}function nt(i,c){if(i&1&&d(0,"fa-icon",82),i&2){let e=p(2);l("icon",e.faCircleNotch)}}function ot(i,c){if(i&1){let e=y();n(0,"tr",85)(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td")(8,"button",86),_("click",function(){let r=g(e).$implicit,f=p(3);return v(f.loadSelected(f.educationForm,r))}),d(9,"fa-icon",87),t()()()}if(i&2){let e=c.$implicit,m=c.odd,r=p(3);l("ngClass",k(6,W,m)),a(2),x(e.school_name),a(2),x(e.educationLevel.desc),a(2),B("",e.start_year," to ",e.end_year,""),a(3),l("icon",r.faEdit)}}function rt(i,c){if(i&1&&(n(0,"tbody"),u(1,ot,10,8,"tr",84),t()),i&2){let e=p(2);a(),l("ngForOf",e.educationList)}}function at(i,c){if(i&1&&(n(0,"div",88),d(1,"fa-icon",82),t()),i&2){let e=p(2);a(),l("icon",e.faCircleNotch)}}function lt(i,c){if(i&1&&d(0,"fa-icon",83),i&2){let e=p(2);l("icon",e.faAdd)}}function mt(i,c){if(i&1&&d(0,"fa-icon",82),i&2){let e=p(2);l("icon",e.faCircleNotch)}}function ct(i,c){if(i&1){let e=y();n(0,"tr",90)(1,"td"),o(2),t(),n(3,"td",91)(4,"span",92),o(5),t(),d(6,"br"),n(7,"span"),o(8,"Job Description:"),t(),o(9),t(),n(10,"td"),o(11),R(12,"date"),R(13,"date"),t(),n(14,"td")(15,"button",86),_("click",function(){let r=g(e).$implicit,f=p(3);return v(f.loadSelected(f.workExperienceForm,r))}),d(16,"fa-icon",87),t()()()}if(i&2){let e=c.$implicit,m=c.odd,r=p(3);l("ngClass",k(13,W,m)),a(2),x(e.employer_name),a(3),x(e.position),a(4),b(" ",e.job_description," "),a(2),B("",Y(12,7,e.start_date,"MMM yyyy")," to ",e.end_date?Y(13,10,e.end_date,"MMM yyyy"):"Present",""),a(5),l("icon",r.faEdit)}}function dt(i,c){i&1&&(n(0,"tr")(1,"td",93),o(2,"No work experience recorded"),t()())}function st(i,c){if(i&1&&(n(0,"tbody"),u(1,ct,17,15,"tr",89)(2,dt,3,0,"tr",7),t()),i&2){let e=p(2);a(),l("ngForOf",e.workExperienceList),a(),l("ngIf",!e.workExperienceList)}}function pt(i,c){if(i&1&&(n(0,"div",94),d(1,"fa-icon",82),t()),i&2){let e=p(2);a(),l("icon",e.faCircleNotch)}}function ut(i,c){if(i&1&&d(0,"fa-icon",83),i&2){let e=p(2);l("icon",e.faAdd)}}function ft(i,c){if(i&1&&d(0,"fa-icon",82),i&2){let e=p(2);l("icon",e.faCircleNotch)}}function _t(i,c){if(i&1){let e=y();n(0,"tr",85)(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td")(8,"button",86),_("click",function(){let r=g(e).$implicit,f=p(3);return v(f.loadSelected(f.referenceForm,r))}),d(9,"fa-icon",87),t()()()}if(i&2){let e=c.$implicit,m=c.odd,r=p(3);l("ngClass",k(5,W,m)),a(2),x(e.full_name),a(2),x(e.company_name),a(2),x(e.contact_number),a(3),l("icon",r.faEdit)}}function xt(i,c){if(i&1&&(n(0,"tbody"),u(1,_t,10,7,"tr",84),t()),i&2){let e=p(2);a(),l("ngForOf",e.referenceList)}}function gt(i,c){if(i&1&&(n(0,"div",88),d(1,"fa-icon",82),t()),i&2){let e=p(2);a(),l("icon",e.faCircleNotch)}}function vt(i,c){if(i&1){let e=y();n(0,"div")(1,"fieldset",12)(2,"legend",13),o(3,"School Information"),t(),n(4,"form",14)(5,"div",15)(6,"div",16),d(7,"input",17),n(8,"label"),o(9,"Are you already a GRANTEE of a scholarship program?"),t()(),n(10,"div",16),d(11,"input",18),n(12,"label"),o(13,"Are you a SHIFTEE?"),t()(),n(14,"div",16),d(15,"input",19),n(16,"label"),o(17,"Are you an IRREGULAR student?"),t()()(),n(18,"div",20)(19,"div",16)(20,"label"),o(21,"General Weighted Average (GWA)"),t(),d(22,"input",21),t()(),n(23,"div")(24,"label",22),o(25,"School"),t(),n(26,"select",23),u(27,He,2,2,"option",24),t()(),n(28,"div")(29,"label",22),o(30,"Course"),t(),n(31,"select",25),u(32,Qe,2,2,"option",24),t()(),n(33,"div")(34,"label",22),o(35,"Year Level"),t(),n(36,"select",26),u(37,ze,2,2,"option",24),t()(),n(38,"div",27)(39,"button",28),_("click",function(){g(e);let r=p();return v(r.updateAcademicInfo())}),u(40,Xe,1,1,"fa-icon",29),o(41," Update "),t()()()(),n(42,"fieldset",30)(43,"legend",31),o(44,"Parents Information"),t(),n(45,"form",32)(46,"div",33)(47,"div",34),d(48,"input",35),n(49,"label",36),o(50,"One or both parents is an overseas filipino worker (OFW)"),t()(),n(51,"div")(52,"label"),o(53,"Father's Name"),t(),d(54,"input",37),t(),n(55,"div")(56,"label"),o(57,"Mother's Name"),t(),d(58,"input",38),t(),n(59,"div")(60,"label"),o(61,"Father's Occupation"),t(),d(62,"input",39),t(),n(63,"div")(64,"label"),o(65,"Mother's Occupation"),t(),d(66,"input",40),t(),n(67,"div")(68,"label"),o(69,"Father's Company"),t(),d(70,"input",41),t(),n(71,"div")(72,"label"),o(73,"Mother's Company"),t(),d(74,"input",42),t(),n(75,"div",43)(76,"label"),o(77,"Households Average Monthly Income"),t(),n(78,"select",44),u(79,Ke,2,2,"option",24),t()(),n(80,"div",45)(81,"button",28),_("click",function(){g(e);let r=p();return v(r.onSubmit("parent-information",r.parentsForm,"parentsInformation","parentsForm"))}),u(82,Ze,1,1,"fa-icon",29),o(83," Update "),t()()()()(),n(84,"fieldset",30)(85,"legend",46),o(86,"Educational Background"),t(),n(87,"form",47)(88,"div",48)(89,"div")(90,"label"),o(91,"Name of School"),t(),d(92,"input",49),t(),n(93,"div")(94,"label"),o(95,"Education Level"),t(),n(96,"select",50)(97,"option",51),o(98,"-"),t(),u(99,et,2,2,"option",24),t()(),n(100,"div")(101,"label"),o(102,"Program (optional)"),t(),n(103,"select",52)(104,"option",51),o(105,"-"),t(),u(106,tt,2,2,"option",24),t()(),n(107,"div")(108,"label"),o(109,"Year Attended (Start)"),t(),d(110,"input",53),t(),n(111,"div")(112,"label"),o(113,"Year Attended (End)"),t(),d(114,"input",54),t()(),n(115,"div",55)(116,"button",56),_("click",function(){g(e);let r=p();return v(r.onSubmit("user-education",r.educationForm,"educationList","educationForm"))}),u(117,it,1,1,"fa-icon",57)(118,nt,1,1,"fa-icon",29),o(119),t()()(),n(120,"div",58)(121,"table",59)(122,"thead")(123,"tr")(124,"th"),o(125,"Name of school"),t(),n(126,"th"),o(127,"Education Level"),t(),n(128,"th"),o(129,"Year Attended"),t(),n(130,"th"),o(131,"Action"),t()()(),u(132,rt,2,1,"tbody",7),t(),u(133,at,2,1,"div",60),t()(),n(134,"fieldset",30)(135,"legend",61),o(136,"Work Experience"),t(),n(137,"form",62)(138,"div",63)(139,"div")(140,"label",64),o(141,"Employer name"),t(),d(142,"input",65),t(),n(143,"div")(144,"label",66),o(145,"Position"),t(),d(146,"input",67),t(),n(147,"div")(148,"label",68),o(149,"Appointment Date"),t(),d(150,"input",69),t(),n(151,"div")(152,"label",70),o(153,"End of Contract"),t(),d(154,"input",71),t(),n(155,"div",72)(156,"div")(157,"label"),o(158,"Job Description"),t(),d(159,"textarea",73),t()(),n(160,"div",74)(161,"button",56),_("click",function(){g(e);let r=p();return v(r.onSubmit("user-employment",r.workExperienceForm,"workExperienceList","workExperienceForm"))}),u(162,lt,1,1,"fa-icon",57)(163,mt,1,1,"fa-icon",29),o(164),t()()()(),n(165,"div",58)(166,"table",59)(167,"thead")(168,"tr")(169,"th"),o(170,"Name of Employer"),t(),n(171,"th"),o(172,"Job Position"),t(),n(173,"th"),o(174,"Date"),t(),n(175,"th"),o(176,"Action"),t()()(),u(177,st,3,2,"tbody",7),t(),u(178,pt,2,1,"div",75),t()(),n(179,"fieldset",30)(180,"legend",76),o(181,"References"),t(),n(182,"form",47)(183,"div",77)(184,"div")(185,"label"),o(186,"Name"),t(),d(187,"input",78),t(),n(188,"div")(189,"label"),o(190,"Company name / Job title (optional)"),t(),d(191,"input",79),t(),n(192,"div")(193,"label"),o(194,"Contact Number"),t(),d(195,"input",80),t()(),n(196,"div",55)(197,"button",56),_("click",function(){g(e);let r=p();return v(r.onSubmit("user-reference",r.referenceForm,"referenceList","referenceForm"))}),u(198,ut,1,1,"fa-icon",57)(199,ft,1,1,"fa-icon",29),o(200),t()()(),n(201,"div",58)(202,"table",59)(203,"thead")(204,"tr")(205,"th"),o(206,"Name of school"),t(),n(207,"th"),o(208,"Company / Job Title"),t(),n(209,"th"),o(210,"Contact Number"),t(),n(211,"th"),o(212,"Action"),t()()(),u(213,xt,2,1,"tbody",7),t(),u(214,gt,2,1,"div",60),t()()()}if(i&2){let e=p();a(4),l("formGroup",e.userForm),a(23),l("ngForOf",e.school_list),a(5),l("ngForOf",e.academic_programs),a(5),l("ngForOf",e.year_level_list),a(2),l("disabled",!e.userForm.valid||e.isFormSaving["user-information"]),a(),l("ngIf",e.isFormSaving["user-information"]),a(5),l("formGroup",e.parentsForm),a(34),l("ngForOf",e.income_list),a(2),l("disabled",!e.parentsForm.valid||e.isFormSaving["parent-information"]),a(),l("ngIf",e.isFormSaving["parent-information"]),a(5),l("formGroup",e.educationForm),a(10),l("ngValue",null),a(2),l("ngForOf",e.education_levels),a(5),l("ngValue",null),a(2),l("ngForOf",e.academic_programs),a(10),l("disabled",!e.educationForm.valid||e.isFormSaving["user-education"]),a(),l("ngIf",!e.isFormSaving["user-education"]&&!e.educationForm.value.id),a(),l("ngIf",e.isFormSaving["user-education"]),a(),b(" ",e.educationForm.value.id?"Update":"Add"," "),a(13),l("ngIf",!e.isFormSaving["user-education"]),a(),l("ngIf",e.isFormSaving["user-education"]),a(4),l("formGroup",e.workExperienceForm),a(24),l("disabled",!e.workExperienceForm.valid||e.isFormSaving["user-employment"]),a(),l("ngIf",!e.isFormSaving["user-employment"]&&!e.workExperienceForm.value.id),a(),l("ngIf",e.isFormSaving["user-employment"]),a(),b(" ",e.workExperienceForm.value.id?"Update":"Add"," "),a(13),l("ngIf",!e.isFormSaving["user-employment"]),a(),l("ngIf",e.isFormSaving["user-employment"]),a(4),l("formGroup",e.referenceForm),a(15),l("disabled",!e.referenceForm.valid||e.isFormSaving["user-reference"]),a(),l("ngIf",!e.isFormSaving["user-reference"]&&!e.referenceForm.value.id),a(),l("ngIf",e.isFormSaving["user-reference"]),a(),b(" ",e.referenceForm.value.id?"Update":"Add"," "),a(13),l("ngIf",!e.isFormSaving["user-reference"]),a(),l("ngIf",e.isFormSaving["user-reference"])}}function ht(i,c){if(i&1){let e=y();n(0,"app-deactivate-account",95),_("toggleCancelModal",function(){g(e);let r=p();return v(r.toggleCancelModal())}),t()}if(i&2){let e=p();l("selected_application_id",e.selected_user_id)}}var Ae=(()=>{class i{onFileSelected(e,m){this.file_err_message=null;let r=e.target.files?.[0];r&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(r.type)?this.userForm.patchValue({[m]:r}):(this.file_err_message="Invalid file type. Only PDF, DOC, DOCX, JPG, and PNG files are allowed.",this.userForm.patchValue({[m]:null})),console.log(this.userForm.value)}convertDates(e){return e?ne(e,"yyyy-MM","en","Asia/manila"):null}updateAcademicInfo(){this.isFormSaving["user-information"]=!0,this.userForm.patchValue({scholar_flag:this.userForm.value.scholar_flag?1:0,shiftee_flag:this.userForm.value.shiftee_flag?1:0,irregular_flag:this.userForm.value.irregular_flag?1:0,pwd_flag:this.userForm.value.pwd_flag?1:0});let e=new FormData;Object.keys(this.userForm.controls).forEach(m=>{let r=this.userForm.get(m);console.log(r),r?.value instanceof File?e.append(m,r.value):r&&e.append(m,r.value??"")}),console.log(e),this.http.update("user-information/",this.userForm.value.id,this.userForm.value).subscribe({next:m=>{this.isFormSaving["user-information"]=!1,console.log(m)},error:m=>console.log(m)})}onSubmit(e,m,r,f){m.value.start_date&&m.patchValue({start_date:this.convertDates(m.value.start_date),end_date:this.convertDates(m.value.end_date)}),this.http.post(e,m.value).subscribe({next:C=>{this[f].reset(),this.loadData(e,r)},error:C=>console.log(C)})}loadData(e,m){this.isFormSaving[e]=!0;let r={user_id:this.selected_user.id};this.http.get(e,{params:r}).subscribe({next:f=>{this[m]=f.data,m==="parentsInformation"&&this.parentsForm.patchValue(F({},f.data)),this.isFormSaving[e]=!1},error:f=>console.log(f)})}loadSelected(e,m){e.patchValue(F({},m))}loadUserInformation(e){this.show_form=!1;let m={user_info:1};this.http.get("user-information",{params:m}).subscribe({next:r=>{console.log(r),this.selected_user=r.data[0],this.show_form=!0,this.userForm.patchValue(F({},r.data[0])),console.log(this.userForm.value),e||this.createForms()},error:r=>console.log(r)})}deactivateAccount(){this.selected_user_id=this.userForm.value.id,this.toggleCancelModal()}toggleCancelModal(){console.log("test"),this.modals["deactivate-account"]=!this.modals["deactivate-account"]}createForms(){this.loadData("user-education","educationList"),this.loadData("user-employment","workExperienceList"),this.loadData("user-reference","referenceList"),this.loadData("parent-information","parentsInformation"),this.createEducationForm(),this.createReferenceForm(),this.createWorkExperienceForm(),this.createParentsForm()}loadLibraries(e,m){this.http.get("libraries/"+e).subscribe({next:r=>{this[m]=r.data},error:r=>console.log(r)})}createEducationForm(){this.educationForm=this.formBuilder.group({id:[null],lib_education_level_id:[null,h.required],lib_academic_program_id:[null],school_name:[null,h.required],start_year:[null,h.required],end_year:[null,h.required]})}createReferenceForm(){this.referenceForm=this.formBuilder.group({id:[null],full_name:[null,h.required],company_name:[null],contact_number:[null,h.required]})}createWorkExperienceForm(){this.workExperienceForm=this.formBuilder.group({id:[null],employer_name:[null,h.required],position:[null,h.required],job_description:[null],start_date:[null,h.required],end_date:[null,h.required]})}createParentsForm(){this.parentsForm=this.formBuilder.group({ofw_flag:[!1],fathers_name:[null],fathers_occupation:[null],fathers_company:[null],mothers_name:[null],mothers_occupation:[null],mothers_company:[null],average_monthly_income:[null,h.required]})}toggleEditForm(){this.showUpdateForm=!this.showUpdateForm,this.education_levels||this.loadLibraries("education-level","education_levels"),this.academic_programs||this.loadLibraries("academic-programs","academic_programs"),this.income_list||this.loadLibraries("monthly-income","income_list"),this.school_list||this.loadLibraries("school","school_list"),this.year_level_list||this.loadLibraries("year-level","year_level_list"),this.loadUserInformation(!0)}constructor(e,m){this.http=e,this.formBuilder=m,this.faEdit=Fe,this.faAdd=Ie,this.faCircleNotch=A,this.faArrowUpFromBracket=Se,this.educationForm=Ne(),this.referenceForm=Pe(),this.workExperienceForm=Ve(),this.parentsForm=ke(),this.userForm=Te(),this.show_form=!1,this.showUpdateForm=!1,this.isFormSaving=[],this.modals=[]}ngOnInit(){this.loadUserInformation()}static{this.\u0275fac=function(m){return new(m||i)(w(O),w(Ce))}}static{this.\u0275cmp=M({type:i,selectors:[["app-manage-profile"]],decls:13,vars:9,consts:[[1,"bg-gray-100","p-5","min-h-screen"],[1,"flex","justify-between","mb-3"],[1,"font-semibold","text-lg","text-blue-600"],[1,"flex","justify-end","text-sm"],[1,"btn-blue","bg-gray-400",3,"click"],[1,"btn-blue",3,"click","ngClass"],["class","text-white",3,"icon",4,"ngIf"],[4,"ngIf"],[3,"selected_application_id","toggleCancelModal",4,"ngIf"],[1,"text-white",3,"icon"],[3,"selected_user",4,"ngIf"],[3,"selected_user"],[1,"rounded-md","border","border-gray-400","bg-white"],[1,"ml-5","px-4","font-semibold","bg-gray-200","py-2","rounded-mx"],[1,"flex","flex-col","md:grid","md:grid-cols-3","gap-4","p-3","mx-4","border-b-2","border-gray-200",3,"formGroup"],[1,"md:col-span-3","md:grid","md:grid-cols-3","flex","flex-col"],[1,"flex"],["type","checkbox","formControlName","scholar_flag",1,"input-checkbox","mr-1"],["type","checkbox","formControlName","shiftee_flag",1,"input-checkbox","mr-1"],["type","checkbox","formControlName","irregular_flag",1,"input-checkbox","mr-1"],[1,"md:col-span-3","md:grid","md:grid-cols-2","flex","flex-col"],["type","text","formControlName","gwa",1,"input-txt","ml-1","w-32"],["for","school"],["formControlName","lib_school_id","name","lib_school_id","id","lib_school_id",1,"input-txt"],[3,"value",4,"ngFor","ngForOf"],["formControlName","lib_academic_program_id","name","lib_academic_program_id","id","lib_academic_program_id",1,"input-txt"],["formControlName","lib_year_level_id","name","lib_year_level_id","id","lib_year_level_id",1,"input-txt"],[1,"flex","justify-center","col-span-3"],[1,"btn-blue-nr","w-32","text-sm","py-1.5",3,"click","disabled"],["animation","spin",3,"icon",4,"ngIf"],[1,"rounded-md","border","border-gray-400","bg-white","mt-3"],[1,"ml-5","px-4","font-semibold","bg-rose-200","py-2","rounded-mx"],[1,"flex","p-3","mx-4","border-b-2","border-gray-200",3,"formGroup"],[1,"flex","flex-col","md:grid","md:grid-cols-2","md:gap-x-16","md:mx-24"],[1,"col-span-2","flex","justify-center","mb-3"],["id","ofw_flag","formControlName","ofw_flag","type","checkbox",1,"rounded-md","text-lg","mr-1"],["for","ofw_flag"],["formControlName","fathers_name","type","text",1,"input-txt"],["formControlName","mothers_name","type","text",1,"input-txt"],["formControlName","fathers_occupation","type","text",1,"input-txt"],["formControlName","mothers_occupation","type","text",1,"input-txt"],["formControlName","fathers_company","type","text",1,"input-txt"],["formControlName","mothers_company","type","text",1,"input-txt"],[1,"col-span-2"],["id","average_monthly_income","formControlName","average_monthly_income",1,"input-txt"],[1,"col-span-2","flex","justify-end","md:justify-center","mt-3"],[1,"ml-5","px-4","font-semibold","bg-blue-200","py-2","rounded-mx"],[1,"flex","flex-col","md:flex-row","p-3","mx-4","border-b-2","border-gray-200",3,"formGroup"],[1,"flex","flex-col","md:grid","md:grid-cols-5","md:gap-x-4"],["formControlName","school_name","type","text",1,"input-txt"],["formControlName","lib_education_level_id",1,"input-txt"],[3,"ngValue"],["formControlName","lib_academic_program_id",1,"input-txt"],["formControlName","start_year","type","number","id","year","name","year","min","1900","max","2100","placeholder","YYYY",1,"input-txt"],["formControlName","end_year","type","number","id","year","name","year","min","1900","max","2100","placeholder","YYYY",1,"input-txt"],[1,"ml-3","mt-6","flex","justify-end"],[1,"btn-blue-nr","w-20","text-sm","py-1.5",3,"click","disabled"],[3,"icon",4,"ngIf"],[1,"shadow-md","p-4","border","border-gray-400","rounded-md","m-4"],[1,"table-auto","w-full","bg-white","select-none"],["class","w-full flex justify-center text-blue-500",4,"ngIf"],[1,"ml-5","px-4","font-semibold","bg-orange-200","py-2","rounded-mx"],[1,"flex","flex-col","p-3","mx-4","border-b-2","border-gray-200",3,"formGroup"],[1,"flex","flex-col","md:grid","grid-cols-4","gap-x-4"],["for","employer_name"],["formControlName","employer_name","id","employer_name","type","text",1,"input-txt"],["for","position"],["formControlName","position","id","position","type","text",1,"input-txt"],["for","start_date"],["formControlName","start_date","type","month","id","start_date","name","start_date","placeholder","yyyy/MM/dd",1,"input-txt"],["for","end_date"],["formControlName","end_date","type","month","id","end_date","name","end_date","placeholder","yyyy/MM/dd",1,"input-txt"],[1,"col-span-4"],["rows","2","formControlName","job_description","type","text",1,"input-txt"],[1,"col-span-4","flex","justify-end"],["class","w-full flex justify-center",4,"ngIf"],[1,"ml-5","px-4","font-semibold","bg-green-200","py-2","rounded-mx"],[1,"flex","flex-col","md:grid","grid-cols-3","gap-x-4"],["formControlName","full_name","type","text",1,"input-txt"],["formControlName","company_name","type","text",1,"input-txt"],["formControlName","contact_number","type","text",1,"input-txt"],[3,"value"],["animation","spin",3,"icon"],[3,"icon"],["class","hover:bg-blue-50",3,"ngClass",4,"ngFor","ngForOf"],[1,"hover:bg-blue-50",3,"ngClass"],[3,"click"],[1,"text-orange-500",3,"icon"],[1,"w-full","flex","justify-center","text-blue-500"],["class","hover:bg-blue-100",3,"ngClass",4,"ngFor","ngForOf"],[1,"hover:bg-blue-100",3,"ngClass"],[1,"text-left"],[1,"font-semibold"],["colspan","4",1,"text-center","italic","py-5"],[1,"w-full","flex","justify-center"],[3,"toggleCancelModal","selected_application_id"]],template:function(m,r){m&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),o(3," User Profile "),t(),n(4,"div",3)(5,"button",4),_("click",function(){return r.deactivateAccount()}),o(6," Deactivate Account "),t(),n(7,"button",5),_("click",function(){return r.toggleEditForm()}),u(8,$e,1,1,"fa-icon",6),o(9),t()()(),u(10,Je,2,1,"div",7)(11,vt,215,35,"div",7),t(),u(12,ht,1,1,"app-deactivate-account",8)),m&2&&(a(7),l("ngClass",ie(6,qe,r.showUpdateForm,!r.showUpdateForm)),a(),l("ngIf",!r.showUpdateForm),a(),b(" ",r.showUpdateForm?"Back":"Update"," "),a(),l("ngIf",!r.showUpdateForm),a(),l("ngIf",r.showUpdateForm),a(),l("ngIf",r.modals["deactivate-account"]))},dependencies:[oe,re,N,D,L,se,xe,ge,V,pe,me,_e,T,ce,he,ve,ue,fe,U,ae],styles:["td[_ngcontent-%COMP%]{text-align:center}"]})}}return i})();var yt=[{path:"",component:Ae}],De=(()=>{class i{static{this.\u0275fac=function(m){return new(m||i)}}static{this.\u0275mod=I({type:i})}static{this.\u0275inj=S({imports:[q.forChild(yt),q]})}}return i})();var Xt=(()=>{class i{static{this.\u0275fac=function(m){return new(m||i)}}static{this.\u0275mod=I({type:i})}static{this.\u0275inj=S({imports:[P,De,j,L,Ee,U]})}}return i})();export{Xt as ManageProfileModule};
