import{a as ke,d as _e}from"./chunk-V2SSCOFE.js";import{A as C,Aa as pe,B as te,Ba as me,D as se,E as ie,G as W,J as re,M as J,Oa as Q,P as ae,T as U,Ta as fe,V as ne,Va as de,Y as X,_ as he,ba as le,fa as D,ga as O,ja as ce,ka as oe,ra as H,w as G,wa as ue,y as B}from"./chunk-WXNTJ4HU.js";import{a as A,g as ee}from"./chunk-GAL4ENT6.js";function we(p,I){p&1&&(D(0,"ul",2)(1,"li"),H(2,"Password should have atleast 6 characters"),O(),D(3,"li"),H(4,"Password should contain atleast 1 special character"),O(),D(5,"li"),H(6,"Password should contain atleast 1 numeric value"),O()())}function Ne(p,I){if(p&1&&(D(0,"span",1),X(1,we,7,0,"ul",2),H(2),O()),p&2){let t=oe();U(),le(t.f[t.childFormName].errors!=null&&t.f[t.childFormName].errors.pattern?1:-1),U(),ue(" ",t.f[t.childFormName].errors!=null&&t.f[t.childFormName].errors.email?"not a valid email format":""," ",t.f[t.childFormName].errors!=null&&t.f[t.childFormName].errors.required?"this is required":""," ",t.f[t.childFormName].errors!=null&&t.f[t.childFormName].errors.minlength?"minimum length: "+(t.f[t.childFormName].errors==null?null:t.f[t.childFormName].errors.minlength.requiredLength):""," ",t.f[t.childFormName].errors!=null&&t.f[t.childFormName].errors.maxlength?"maximum length: "+(t.f[t.childFormName].errors==null?null:t.f[t.childFormName].errors.maxlength.requiredLength):"",`
`)}}var Ae=(()=>{class p{get f(){return this.childForm.controls}ngOnChanges(t){}static{this.\u0275fac=function(e){return new(e||p)}}static{this.\u0275cmp=te({type:p,selectors:[["app-error-label"]],inputs:{childForm:"childForm",childFormName:"childFormName"},standalone:!0,features:[W,me],decls:1,vars:1,consts:[["class","error-label",4,"ngIf"],[1,"error-label"],[1,"list-disc","mt-2","ml-3"]],template:function(e,r){e&1&&X(0,Ne,3,5,"span",0),e&2&&he("ngIf",r.f[r.childFormName]==null?null:r.f[r.childFormName].errors)},dependencies:[de,fe]})}}return p})();var z=new B("ngx-mask config"),ge=new B("new ngx-mask config"),Se=new B("initial ngx-mask config"),be={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:!1,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:p=>p,outputTransformFn:p=>p,maskFilled:new J,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Ve=["Hh:m0:s0","Hh:m0","m0:s0"],Ee=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"],$e=(()=>{class p{constructor(){this._config=C(z),this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.hiddenInput=this._config.hiddenInput,this.clearIfNotMatch=this._config.clearIfNotMatch,this.specialCharacters=this._config.specialCharacters,this.patterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime,this.leadZero=this._config.leadZero,this.apm=this._config.apm,this.inputTransformFn=this._config.inputTransformFn,this.outputTransformFn=this._config.outputTransformFn,this.keepCharacterPositions=this._config.keepCharacterPositions,this._shift=new Set,this.plusOnePosition=!1,this.maskExpression="",this.actualValue="",this.showKeepCharacterExp="",this.shownMaskExpression="",this.deletedSpecialCharacter=!1,this._formatWithSeparators=(t,e,r,s)=>{let n=[],c="";if(Array.isArray(r)){let k=new RegExp(r.map(g=>"[\\^$.|?*+()".indexOf(g)>=0?`\\${g}`:g).join("|"));n=t.split(k),c=t.match(k)?.[0]??""}else n=t.split(r),c=r;let a=n.length>1?`${c}${n[1]}`:"",h=n[0]??"",u=this.separatorLimit.replace(/\s/g,"");u&&+u&&(h[0]==="-"?h=`-${h.slice(1,h.length).slice(0,u.length)}`:h=h.slice(0,u.length));let f=/(\d+)(\d{3})/;for(;e&&f.test(h);)h=h.replace(f,"$1"+e+"$2");return typeof s>"u"?h+a:s===0?h:h+a.substring(0,s+1)},this.percentage=t=>{let e=t.replace(",","."),r=Number(this.allowNegativeNumbers&&t.includes("-")?e.slice(1,t.length):e);return!isNaN(r)&&r>=0&&r<=100},this.getPrecision=t=>{let e=t.split(".");return e.length>1?Number(e[e.length-1]):1/0},this.checkAndRemoveSuffix=t=>{for(let e=this.suffix?.length-1;e>=0;e--){let r=this.suffix.substring(e,this.suffix?.length);if(t.includes(r)&&e!==this.suffix?.length-1&&(e-1<0||!t.includes(this.suffix.substring(e-1,this.suffix?.length))))return t.replace(r,"")}return t},this.checkInputPrecision=(t,e,r)=>{let s=t,n=r;if(e<1/0){if(Array.isArray(n)){let u=n.find(f=>f!==this.thousandSeparator);n=u||n[0]}let c=new RegExp(this._charToRegExpExpression(n)+`\\d{${e}}.*$`),a=s.match(c),h=(a&&a[0]?.length)??0;if(h-1>e){let u=h-1-e;s=s.substring(0,s.length-u)}e===0&&this._compareOrIncludes(s[s.length-1],n,this.thousandSeparator)&&(s=s.substring(0,s.length-1))}return s}}applyMaskWithPattern(t,e){let[r,s]=e;return this.customPattern=s,this.applyMask(t,r)}applyMask(t,e,r=0,s=!1,n=!1,c=()=>{}){if(!e||typeof t!="string")return"";let a=0,h="",u=!1,f=!1,k=1,g=!1,i=t,o=r;i.slice(0,this.prefix.length)===this.prefix&&(i=i.slice(this.prefix.length,i.length)),this.suffix&&i.length>0&&(i=this.checkAndRemoveSuffix(i)),i==="("&&this.prefix&&(i="");let _=i.toString().split("");if(this.allowNegativeNumbers&&i.slice(a,a+1)==="-"&&(h+=i.slice(a,a+1)),e==="IP"){let m=i.split(".");this.ipError=this._validIP(m),e="099.099.099.099"}let y=[];for(let m=0;m<i.length;m++)i[m]?.match("\\d")&&y.push(i[m]??"");if(e==="CPF_CNPJ"&&(this.cpfCnpjError=y.length!==11&&y.length!==14,y.length>11?e="00.000.000/0000-00":e="000.000.000-00"),e.startsWith("percent")){if(i.match("[a-z]|[A-Z]")||i.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!n){i=this._stripToDecimal(i);let v=this.getPrecision(e);i=this.checkInputPrecision(i,v,this.decimalMarker)}let m=typeof this.decimalMarker=="string"?this.decimalMarker:".";if(i.indexOf(m)>0&&!this.percentage(i.substring(0,i.indexOf(m)))){let v=i.substring(0,i.indexOf(m)-1);this.allowNegativeNumbers&&i.slice(a,a+1)==="-"&&!n&&(v=i.substring(0,i.indexOf(m))),i=`${v}${i.substring(i.indexOf(m),i.length)}`}let l="";this.allowNegativeNumbers&&i.slice(a,a+1)==="-"?l=`-${i.slice(a+1,a+i.length)}`:l=i,this.percentage(l)?h=this._splitPercentZero(i):h=this._splitPercentZero(i.substring(0,i.length-1))}else if(e.startsWith("separator")){(i.match("[w\u0430-\u044F\u0410-\u042F]")||i.match("[\u0401\u0451\u0410-\u044F]")||i.match("[a-z]|[A-Z]")||i.match(/[-@#!$%\\^&*()_£¬'+|~=`{}\]:";<>.?/]/)||i.match("[^A-Za-z0-9,]"))&&(i=this._stripToDecimal(i));let m=this.getPrecision(e),l=Array.isArray(this.decimalMarker)?this.thousandSeparator==="."?",":".":this.decimalMarker;if(m===0?i=this.allowNegativeNumbers?i.length>2&&i[0]==="-"&&i[1]==="0"&&i[2]!==this.thousandSeparator&&i[2]!==","&&i[2]!=="."?"-"+i.slice(2,i.length):i[0]==="0"&&i.length>1&&i[1]!==this.thousandSeparator&&i[1]!==","&&i[1]!=="."?i.slice(1,i.length):i:i.length>1&&i[0]==="0"&&i[1]!==this.thousandSeparator&&i[1]!==","&&i[1]!=="."?i.slice(1,i.length):i:(i[0]===l&&i.length>1&&(i="0"+i.slice(0,i.length+1),this.plusOnePosition=!0),i[0]==="0"&&i[1]!==l&&i[1]!==this.thousandSeparator&&(i=i.length>1?i.slice(0,1)+l+i.slice(1,i.length+1):i,this.plusOnePosition=!0),this.allowNegativeNumbers&&i[0]==="-"&&(i[1]===l||i[1]==="0")&&(i=i[1]===l&&i.length>2?i.slice(0,1)+"0"+i.slice(1,i.length):i[1]==="0"&&i.length>2&&i[2]!==l?i.slice(0,2)+l+i.slice(2,i.length):i,this.plusOnePosition=!0)),n){let d=i.slice(this._findFirstNonZeroDigitIndex(i),i.length),V=i[o]==="0"||i[o]===l,N=i[0]==="0",$=i[0]==="-",L=i[0]===this.thousandSeparator,F=i[1]===l,j=i[1]==="0",K=i[2]===l;N&&F&&V&&o<2&&(i=d),$&&j&&K&&V&&o<3&&(i="-"+d),d!=="-"&&(o===0&&(N||L)||this.allowNegativeNumbers&&o===1&&$&&!j)&&(i=$?"-"+d:d)}let v=this._charToRegExpExpression(this.thousandSeparator),S='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(v,"");if(Array.isArray(this.decimalMarker))for(let d of this.decimalMarker)S=S.replace(this._charToRegExpExpression(d),"");else S=S.replace(this._charToRegExpExpression(this.decimalMarker),"");let x=new RegExp("["+S+"]");i.match(x)&&(i=i.substring(0,i.length-1)),i=this.checkInputPrecision(i,m,this.decimalMarker);let w=i.replace(new RegExp(v,"g"),"");h=this._formatWithSeparators(w,this.thousandSeparator,this.decimalMarker,m);let q=h.indexOf(",")-i.indexOf(","),M=h.length-i.length,Z=n&&h.length<t.length&&this.separatorLimit;if((h[o-1]===this.thousandSeparator||h[o-this.prefix.length])&&this.prefix&&n)o=o-1;else if(M>0&&h[o]!==this.thousandSeparator||Z){f=!0;let d=0;do this._shift.add(o+d),d++;while(d<M)}else h[o-1]===this.thousandSeparator||M===-4||M===-3||h[o]===this.thousandSeparator?(this._shift.clear(),this._shift.add(o-1)):q!==0&&o>0&&!(h.indexOf(",")>=o&&o>3)||!(h.indexOf(".")>=o&&o>3)&&M<=0?(this._shift.clear(),f=!0,k=M,o+=M,this._shift.add(o)):this._shift.clear()}else for(let m=0,l=_[0];m<_.length&&a!==e.length;m++,l=_[m]??""){let v="*"in this.patterns;if(this._checkSymbolMask(l,e[a]??"")&&e[a+1]==="?")h+=l,a+=2;else if(e[a+1]==="*"&&u&&this._checkSymbolMask(l,e[a+2]??""))h+=l,a+=3,u=!1;else if(this._checkSymbolMask(l,e[a]??"")&&e[a+1]==="*"&&!v)h+=l,u=!0;else if(e[a+1]==="?"&&this._checkSymbolMask(l,e[a+2]??""))h+=l,a+=3;else if(this._checkSymbolMask(l,e[a]??"")){if(e[a]==="H"&&(this.apm?Number(l)>9:Number(l)>2)){o=this.leadZeroDateTime?o:o+1,a+=1,this._shiftStep(e,a,_.length),m--,this.leadZeroDateTime&&(h+="0");continue}if(e[a]==="h"&&(this.apm?h.length===1&&Number(h)>1||h==="1"&&Number(l)>2||i.slice(a-1,a).length===1&&Number(i.slice(a-1,a))>2||i.slice(a-1,a)==="1"&&Number(l)>2:h==="2"&&Number(l)>3||(h.slice(a-2,a)==="2"||h.slice(a-3,a)==="2"||h.slice(a-4,a)==="2"||h.slice(a-1,a)==="2")&&Number(l)>3&&a>10)){o=o+1,a+=1,m--;continue}if((e[a]==="m"||e[a]==="s")&&Number(l)>5){o=this.leadZeroDateTime?o:o+1,a+=1,this._shiftStep(e,a,_.length),m--,this.leadZeroDateTime&&(h+="0");continue}let S=31,x=i[a],w=i[a+1],q=i[a+2],M=i[a-1],Z=i[a-2],d=i.slice(a-3,a-1),V=i.slice(a-1,a+1),N=i.slice(a,a+2),$=i.slice(a-2,a);if(e[a]==="d"){let L=e.slice(0,2)==="M0",F=e.slice(0,2)==="M0"&&this.specialCharacters.includes(Z);if(Number(l)>3&&this.leadZeroDateTime||!L&&(Number(N)>S||Number(V)>S||this.specialCharacters.includes(w))||(F?Number(V)>S||!this.specialCharacters.includes(x)&&this.specialCharacters.includes(q)||this.specialCharacters.includes(x):Number(N)>S||this.specialCharacters.includes(w)&&!n)){o=this.leadZeroDateTime?o:o+1,a+=1,this._shiftStep(e,a,_.length),m--,this.leadZeroDateTime&&(h+="0");continue}}if(e[a]==="M"){let F=a===0&&(Number(l)>2||Number(N)>12||this.specialCharacters.includes(w)&&!n),j=e.slice(a+2,a+3),K=d.includes(j)&&e.includes("d0")&&(this.specialCharacters.includes(Z)&&Number(V)>12&&!this.specialCharacters.includes(x)||this.specialCharacters.includes(x)),ve=Number(d)<=S&&!this.specialCharacters.includes(d)&&this.specialCharacters.includes(M)&&(Number(N)>12||this.specialCharacters.includes(w)),Ce=Number(N)>12&&a===5||this.specialCharacters.includes(w)&&a===5,xe=Number(d)>S&&!this.specialCharacters.includes(d)&&!this.specialCharacters.includes($)&&Number($)>12&&e.includes("d0"),Me=Number(d)<=S&&!this.specialCharacters.includes(d)&&!this.specialCharacters.includes(M)&&Number(V)>12;if(Number(l)>1&&this.leadZeroDateTime||F||K||Me||xe||ve||Ce&&!this.leadZeroDateTime){o=this.leadZeroDateTime?o:o+1,a+=1,this._shiftStep(e,a,_.length),m--,this.leadZeroDateTime&&(h+="0");continue}}h+=l,a++}else this.specialCharacters.includes(l)&&e[a]===l?(h+=l,a++):this.specialCharacters.indexOf(e[a]??"")!==-1?(h+=e[a],a++,this._shiftStep(e,a,_.length),m--):e[a]==="9"&&this.showMaskTyped?this._shiftStep(e,a,_.length):this.patterns[e[a]??""]&&this.patterns[e[a]??""]?.optional?(_[a]&&e!=="099.099.099.099"&&e!=="000.000.000-00"&&e!=="00.000.000/0000-00"&&!e.match(/^9+\.0+$/)&&!this.patterns[e[a]??""]?.optional&&(h+=_[a]),e.includes("9*")&&e.includes("0*")&&a++,a++,m--):this.maskExpression[a+1]==="*"&&this._findSpecialChar(this.maskExpression[a+2]??"")&&this._findSpecialChar(l)===this.maskExpression[a+2]&&u||this.maskExpression[a+1]==="?"&&this._findSpecialChar(this.maskExpression[a+2]??"")&&this._findSpecialChar(l)===this.maskExpression[a+2]&&u?(a+=3,h+=l):this.showMaskTyped&&this.specialCharacters.indexOf(l)<0&&l!==this.placeHolderCharacter&&this.placeHolderCharacter.length===1&&(g=!0)}h.length+1===e.length&&this.specialCharacters.indexOf(e[e.length-1]??"")!==-1&&(h+=e[e.length-1]);let b=o+1;for(;this._shift.has(b);)k++,b++;let T=s&&!e.startsWith("separator")?a:this._shift.has(o)?k:0;g&&T--,c(T,f),k<0&&this._shift.clear();let P=!1;n&&(P=_.every(m=>this.specialCharacters.includes(m)));let E=`${this.prefix}${P?"":h}${this.showMaskTyped?"":this.suffix}`;h.length===0&&(E=this.dropSpecialCharacters?`${h}`:`${this.prefix}${h}`);let R=i.length===1&&this.specialCharacters.includes(e[0])&&i!==e[0];if(!this._checkSymbolMask(i,e[1])&&R)return"";if(h.includes("-")&&this.prefix&&this.allowNegativeNumbers){if(n&&h==="-")return"";E=`-${this.prefix}${h.split("-").join("")}${this.suffix}`}return E}_findDropSpecialChar(t){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(e=>e===t):this._findSpecialChar(t)}_findSpecialChar(t){return this.specialCharacters.find(e=>e===t)}_checkSymbolMask(t,e){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[e]?.pattern&&this.patterns[e]?.pattern.test(t))??!1}_stripToDecimal(t){return t.split("").filter((e,r)=>{let s=typeof this.decimalMarker=="string"?e===this.decimalMarker:this.decimalMarker.includes(e);return e.match("^-?\\d")||e===this.thousandSeparator||s||e==="-"&&r===0&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(t){return t&&(t===" "?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,e,r){let s=/[*?]/g.test(t.slice(0,e))?r:e;this._shift.add(s+this.prefix.length||0)}_compareOrIncludes(t,e,r){return Array.isArray(e)?e.filter(s=>s!==r).includes(t):t===e}_validIP(t){return!(t.length===4&&!t.some((e,r)=>t.length!==r+1?e===""||Number(e)>255:e===""||Number(e.substring(0,3))>255))}_splitPercentZero(t){if(t==="-"&&this.allowNegativeNumbers)return t;let e=typeof this.decimalMarker=="string"?t.indexOf(this.decimalMarker):t.indexOf("."),r=this.allowNegativeNumbers&&t.includes("-")?"-":"";if(e===-1){let s=parseInt(r?t.slice(1,t.length):t,10);return isNaN(s)?"":`${r}${s}`}else{let s=parseInt(t.replace("-","").substring(0,e),10),n=t.substring(e+1),c=isNaN(s)?"":s.toString(),a=typeof this.decimalMarker=="string"?this.decimalMarker:".";return c===""?"":`${r}${c}${a}${n}`}}_findFirstNonZeroDigitIndex(t){for(let e=0;e<t.length;e++){let r=t[e];if(r&&r>="1"&&r<="9")return e}return-1}static{this.\u0275fac=function(e){return new(e||p)}}static{this.\u0275prov=G({token:p,factory:p.\u0275fac})}}return p})(),Y=(()=>{class p extends $e{constructor(){super(...arguments),this.isNumberValue=!1,this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this._maskExpressionArray=[],this.triggerOnMaskChange=!1,this._previousValue="",this._currentValue="",this._emitValue=!1,this.onChange=t=>{},this._elementRef=C(ae,{optional:!0}),this.document=C(Q),this._config=C(z),this._renderer=C(ne,{optional:!0})}applyMask(t,e,r=0,s=!1,n=!1,c=()=>{}){if(!e)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"",this.maskExpression==="IP"&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),this.maskExpression==="CPF_CNPJ"&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),`${this.prefix}${this.maskIsShown}${this.suffix}`;let a=t&&typeof this.selStart=="number"?t[this.selStart]??"":"",h="",u=r;if(this.hiddenInput&&!this.writingValue){let i=t&&t.length===1?t.split(""):this.actualValue.split("");typeof this.selStart=="object"&&typeof this.selEnd=="object"?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):t!==""&&i.length?typeof this.selStart=="number"&&typeof this.selEnd=="number"&&(t.length>i.length?i.splice(this.selStart,0,a):t.length<i.length&&(i.length-t.length===1?n?i.splice(this.selStart-1,1):i.splice(t.length-1,1):i.splice(this.selStart,this.selEnd-this.selStart))):i=[],this.showMaskTyped&&!this.hiddenInput&&(h=this.removeMask(t)),h=this.actualValue.length&&i.length<=t.length?this.shiftTypedSymbols(i.join("")):t}if(s&&(this.hiddenInput||!this.hiddenInput)&&(h=t),n&&this.specialCharacters.indexOf(this.maskExpression[u]??"")!==-1&&this.showMaskTyped&&!this.prefix&&(h=this._currentValue),this.deletedSpecialCharacter&&u&&(this.specialCharacters.includes(this.actualValue.slice(u,u+1))?u=u+1:e.slice(u-1,u+1)!=="M0"&&(u=u-2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&this.placeHolderCharacter.length===1&&!this.leadZeroDateTime&&(h=this.removeMask(t)),this.maskChanged?h=t:h=h&&h.length?h:t,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!s&&!this.writingValue){let i=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(i),this.actualValue?this.actualValue:`${this.prefix}${this.maskIsShown}${this.suffix}`}let f=super.applyMask(h,e,u,s,n,c);if(this.actualValue=this.getActualValue(f),this.thousandSeparator==="."&&this.decimalMarker==="."&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&this.dropSpecialCharacters===!0&&(this.specialCharacters=this.specialCharacters.filter(i=>!this._compareOrIncludes(i,this.decimalMarker,this.thousandSeparator))),(f||f==="")&&(this._previousValue=this._currentValue,this._currentValue=f,this._emitValue=this._previousValue!==this._currentValue||this.maskChanged||this.writingValue||this._previousValue===this._currentValue&&s),this._emitValue&&(this.writingValue&&this.triggerOnMaskChange?requestAnimationFrame(()=>this.formControlResult(f)):this.formControlResult(f)),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?n?this.hideInput(f,this.maskExpression):`${this.hideInput(f,this.maskExpression)}${this.maskIsShown.slice(f.length)}`:f;let k=f.length,g=`${this.prefix}${this.maskIsShown}${this.suffix}`;if(this.maskExpression.includes("H")){let i=this._numberSkipedSymbols(f);return`${f}${g.slice(k+i)}`}else if(this.maskExpression==="IP"||this.maskExpression==="CPF_CNPJ")return`${f}${g}`;return`${f}${g.slice(k)}`}_numberSkipedSymbols(t){let e=/(^|\D)(\d\D)/g,r=e.exec(t),s=0;for(;r!=null;)s+=1,r=e.exec(t);return s}applyValueChanges(t,e,r,s=()=>{}){let n=this._elementRef?.nativeElement;n&&(n.value=this.applyMask(n.value,this.maskExpression,t,e,r,s),n!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(t,e){return t.split("").map((r,s)=>this.patterns&&this.patterns[e[s]??""]&&this.patterns[e[s]??""]?.symbol?this.patterns[e[s]??""]?.symbol:r).join("")}getActualValue(t){let e=t.split("").filter((r,s)=>{let n=this.maskExpression[s]??"";return this._checkSymbolMask(r,n)||this.specialCharacters.includes(n)&&r===n});return e.join("")===t?e.join(""):t}shiftTypedSymbols(t){let e="";return(t&&t.split("").map((s,n)=>{if(this.specialCharacters.includes(t[n+1]??"")&&t[n+1]!==this.maskExpression[n+1])return e=s,t[n+1];if(e.length){let c=e;return e="",c}return s})||[]).join("")}numberToString(t){return!t&&t!==0||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith("separator")&&this.separatorLimit.length>14&&String(t).length>14?String(t):Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace("/-/","-")}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}else if(this.showMaskTyped){if(t){if(this.maskExpression==="IP")return this._checkForIp(t);if(this.maskExpression==="CPF_CNPJ")return this._checkForCpfCnpj(t)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){let t=this._elementRef?.nativeElement;t&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(this.placeHolderCharacter,"").length&&(this.formElementProperty=["value",""],this.applyMask("",this.maskExpression))}set formElementProperty([t,e]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,t,e))}checkDropSpecialCharAmount(t){return t.split("").filter(r=>this._findDropSpecialChar(r)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){if(t==="#")return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;let e=[];for(let r=0;r<t.length;r++){let s=t[r]??"";s&&s.match("\\d")&&e.push(s)}return e.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:e.length>3&&e.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:e.length>6&&e.length<=9?this.placeHolderCharacter:(e.length>9&&e.length<=12,"")}_checkForCpfCnpj(t){let e=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,r=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if(t==="#")return e;let s=[];for(let n=0;n<t.length;n++){let c=t[n]??"";c&&c.match("\\d")&&s.push(c)}return s.length<=3?e.slice(s.length,e.length):s.length>3&&s.length<=6?e.slice(s.length+1,e.length):s.length>6&&s.length<=9?e.slice(s.length+2,e.length):s.length>9&&s.length<11?e.slice(s.length+3,e.length):s.length===11?"":s.length===12?t.length===17?r.slice(16,r.length):r.slice(15,r.length):s.length>12&&s.length<=14?r.slice(s.length+4,r.length):""}_getActiveElement(t=this.document){let e=t?.activeElement?.shadowRoot;return e?.activeElement?this._getActiveElement(e):t.activeElement}formControlResult(t){if(this.writingValue&&!t){this.onChange("");return}if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged){this.triggerOnMaskChange&&this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))),this.maskChanged=!1;return}Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))))):this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===t?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))):this.onChange(this.outputTransformFn(this._toNumber(t)))}_toNumber(t){if(!this.isNumberValue||t===""||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters))return t;if(String(t).length>14&&this.maskExpression.startsWith("separator"))return String(t);let e=Number(t);if(this.maskExpression.startsWith("separator")&&Number.isNaN(e)){let r=String(t).replace(",",".");return Number(r)}return Number.isNaN(e)?t:e}_removeMask(t,e){return this.maskExpression.startsWith("percent")&&t.includes(".")?t:t&&t.replace(this._regExpForRemove(e),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){let e=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(r=>this.dropSpecialCharacters.includes(r)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&t.includes(" ")&&this.maskExpression.includes("*")&&(e=e.filter(r=>r!==" ")),this._removeMask(t,e)}_regExpForRemove(t){return new RegExp(t.map(e=>`\\${e}`).join("|"),"gi")}_replaceDecimalMarkerToDot(t){let e=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return t.replace(this._regExpForRemove(e),".")}_checkSymbols(t){let e=t;if(e==="")return e;this.maskExpression.startsWith("percent")&&this.decimalMarker===","&&(e=e.replace(",","."));let r=this._retrieveSeparatorPrecision(this.maskExpression),s=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(e));return this.isNumberValue&&r?e===this.decimalMarker?null:s.length>14?String(s):this._checkPrecision(this.maskExpression,s):s}_checkPatternForSpace(){for(let t in this.patterns)if(this.patterns[t]&&this.patterns[t]?.hasOwnProperty("pattern")){let e=this.patterns[t]?.pattern.toString(),r=this.patterns[t]?.pattern;if(e?.includes(" ")&&r?.test(this.maskExpression))return!0}return!1}_retrieveSeparatorPrecision(t){let e=t.match(new RegExp("^separator\\.([^d]*)"));return e?Number(e[1]):null}_checkPrecision(t,e){let r=this.getPrecision(t),s=e;return t.indexOf("2")>0||this.leadZero&&Number(r)>0?(this.decimalMarker===","&&this.leadZero&&(s=s.replace(",",".")),this.leadZero?Number(s).toFixed(Number(r)):Number(s).toFixed(2)):this.numberToString(s)}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((e,r,s)=>{if(this._start=r==="{"?s:this._start,r!=="}")return this._findSpecialChar(r)?e+r:e;this._end=s;let n=Number(t.slice(this._start+1,this._end)),c=new Array(n+1).join(t[this._start-1]);if(t.slice(0,this._start).length>1&&t.includes("S")){let a=t.slice(0,this._start-1);return a.includes("{")?e+c:a+e+c}else return e+c},"")||t}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=re(p)))(r||p)}})()}static{this.\u0275prov=G({token:p,factory:p.\u0275fac})}}return p})();function Ie(){let p=C(Se),I=C(ge);return I instanceof Function?A(A({},p),I()):A(A({},p),I)}function Te(p){return[{provide:ge,useValue:p},{provide:Se,useValue:be},{provide:z,useFactory:Ie},Y]}function Je(p){return ie(Te(p))}var Ue=(()=>{class p{constructor(){this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.leadZero=null,this.triggerOnMaskChange=null,this.apm=null,this.inputTransformFn=null,this.outputTransformFn=null,this.keepCharacterPositions=null,this.maskFilled=new J,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._allowFewMaskChangeMask=!1,this._justPasted=!1,this._isFocused=!1,this._isComposing=!1,this.document=C(Q),this._maskService=C(Y,{self:!0}),this._config=C(z),this.onChange=t=>{},this.onTouch=()=>{}}ngOnChanges(t){let{maskExpression:e,specialCharacters:r,patterns:s,prefix:n,suffix:c,thousandSeparator:a,decimalMarker:h,dropSpecialCharacters:u,hiddenInput:f,showMaskTyped:k,placeHolderCharacter:g,shownMaskExpression:i,showTemplate:o,clearIfNotMatch:_,validation:y,separatorLimit:b,allowNegativeNumbers:T,leadZeroDateTime:P,leadZero:E,triggerOnMaskChange:R,apm:m,inputTransformFn:l,outputTransformFn:v,keepCharacterPositions:S}=t;if(e&&(e.currentValue!==e.previousValue&&!e.firstChange&&(this._maskService.maskChanged=!0),e.currentValue&&e.currentValue.split("||").length>1?(this._maskExpressionArray=e.currentValue.split("||").sort((x,w)=>x.length-w.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=e.currentValue||"",this._maskService.maskExpression=this._maskValue)),r){if(!r.currentValue||!Array.isArray(r.currentValue))return;this._maskService.specialCharacters=r.currentValue||[]}T&&(this._maskService.allowNegativeNumbers=T.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(x=>x!=="-"))),s&&s.currentValue&&(this._maskService.patterns=s.currentValue),m&&m.currentValue&&(this._maskService.apm=m.currentValue),n&&(this._maskService.prefix=n.currentValue),c&&(this._maskService.suffix=c.currentValue),a&&(this._maskService.thousandSeparator=a.currentValue),h&&(this._maskService.decimalMarker=h.currentValue),u&&(this._maskService.dropSpecialCharacters=u.currentValue),f&&(this._maskService.hiddenInput=f.currentValue),k&&(this._maskService.showMaskTyped=k.currentValue,k.previousValue===!1&&k.currentValue===!0&&this._isFocused&&requestAnimationFrame(()=>{this._maskService._elementRef?.nativeElement.click()})),g&&(this._maskService.placeHolderCharacter=g.currentValue),i&&(this._maskService.shownMaskExpression=i.currentValue),o&&(this._maskService.showTemplate=o.currentValue),_&&(this._maskService.clearIfNotMatch=_.currentValue),y&&(this._maskService.validation=y.currentValue),b&&(this._maskService.separatorLimit=b.currentValue),P&&(this._maskService.leadZeroDateTime=P.currentValue),E&&(this._maskService.leadZero=E.currentValue),R&&(this._maskService.triggerOnMaskChange=R.currentValue),l&&(this._maskService.inputTransformFn=l.currentValue),v&&(this._maskService.outputTransformFn=v.currentValue),S&&(this._maskService.keepCharacterPositions=S.currentValue),this._applyMask()}validate({value:t}){let e=typeof t=="number"?String(t):t;if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(e);if(this._maskService.cpfCnpjError)return this._createValidationError(e);if(this._maskValue.startsWith("separator")||Ee.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Ve.includes(this._maskValue))return this._validateTime(e);if(this._maskValue==="A*@A*.A*")return!/^[^@]+@[^@]+\.[^@]+$/.test(e)&&e?this._createValidationError(e):null;if(e&&e.length>=1){let r=0;if(this._maskValue.includes("{")&&this._maskValue.includes("}"))return this._maskValue.slice(this._maskValue.indexOf("{")+1,this._maskValue.indexOf("}"))===String(e.length)?null:this._createValidationError(e);if(this._maskValue.startsWith("percent"))return null;for(let s in this._maskService.patterns)if(this._maskService.patterns[s]?.optional){if(this._maskValue.indexOf(s)!==this._maskValue.lastIndexOf(s)){let n=this._maskValue.split("").filter(c=>c===s).join("");r+=n.length}else this._maskValue.indexOf(s)!==-1&&r++;if(this._maskValue.indexOf(s)!==-1&&e.length>=this._maskValue.indexOf(s)||r===this._maskValue.length)return null}if(this._maskValue.indexOf("*")>1&&e.length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&e.length<this._maskValue.indexOf("?"))return this._createValidationError(e);if(this._maskValue.indexOf("*")===-1||this._maskValue.indexOf("?")===-1){let s=this._maskValue.split("*"),n=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkDropSpecialCharAmount(this._maskValue)-r:this.prefix?this._maskValue.length+this.prefix.length-r:this._maskValue.length-r;if(s.length===1&&e.length<n)return this._createValidationError(e);if(s.length>1){let c=s[s.length-1];if(c&&this._maskService.specialCharacters.includes(c[0])&&String(e).includes(c[0]??"")&&!this.dropSpecialCharacters){let a=t.split(c[0]);return a[a.length-1].length===c.length-1?null:this._createValidationError(e)}else return(c&&!this._maskService.specialCharacters.includes(c[0])||!c||this._maskService.dropSpecialCharacters)&&e.length>=n-1?null:this._createValidationError(e)}}if(this._maskValue.indexOf("*")===1||this._maskValue.indexOf("?")===1)return null}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onFocus(){this._isFocused=!0}onModelChange(t){(t===""||t===null||typeof t>"u")&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){if(this._isComposing)return;let e=t.target,r=this._maskService.inputTransformFn(e.value);if(e.type!=="number")if(typeof r=="string"||typeof r=="number"){if(e.value=r.toString(),this._inputValue=e.value,this._setMask(),!this._maskValue){this.onChange(e.value);return}let s=e.selectionStart===1?e.selectionStart+this._maskService.prefix.length:e.selectionStart;if(this.showMaskTyped&&this.keepCharacterPositions&&this._maskService.placeHolderCharacter.length===1){let h=e.value.slice(s-1,s),u=this.prefix.length,f=this._maskService._checkSymbolMask(h,this._maskService.maskExpression[s-1-u]??""),k=this._maskService._checkSymbolMask(h,this._maskService.maskExpression[s+1-u]??""),g=this._maskService.selStart===this._maskService.selEnd,i=Number(this._maskService.selStart)-u,o=Number(this._maskService.selEnd)-u,_=this._code==="Backspace"||this._code==="Delete";if(_){if(!g)this._maskService.selStart===u?this._maskService.actualValue=`${this.prefix}${this._maskService.maskIsShown.slice(0,o)}${this._inputValue.split(this.prefix).join("")}`:this._maskService.selStart===this._maskService.maskIsShown.length+u?this._maskService.actualValue=`${this._inputValue}${this._maskService.maskIsShown.slice(i,o)}`:this._maskService.actualValue=`${this.prefix}${this._inputValue.split(this.prefix).join("").slice(0,i)}${this._maskService.maskIsShown.slice(i,o)}${this._maskService.actualValue.slice(o+u,this._maskService.maskIsShown.length+u)}${this.suffix}`;else if(!this._maskService.specialCharacters.includes(this._maskService.maskExpression.slice(s-this.prefix.length,s+1-this.prefix.length))&&g)if(i===1&&this.prefix)this._maskService.actualValue=`${this.prefix}${this._maskService.placeHolderCharacter}${e.value.split(this.prefix).join("").split(this.suffix).join("")}${this.suffix}`,s=s-1;else{let y=e.value.substring(0,s),b=e.value.substring(s);this._maskService.actualValue=`${y}${this._maskService.placeHolderCharacter}${b}`}s=this._code==="Delete"?s+1:s}_||(!f&&!k&&g?s=Number(e.selectionStart)-1:this._maskService.specialCharacters.includes(e.value.slice(s,s+1))&&k&&!this._maskService.specialCharacters.includes(e.value.slice(s+1,s+2))?(this._maskService.actualValue=`${e.value.slice(0,s-1)}${e.value.slice(s,s+1)}${h}${e.value.slice(s+2)}`,s=s+1):f?e.value.length===1&&s===1?this._maskService.actualValue=`${this.prefix}${h}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${this.suffix}`:this._maskService.actualValue=`${e.value.slice(0,s-1)}${h}${e.value.slice(s+1).split(this.suffix).join("")}${this.suffix}`:this.prefix&&e.value.length===1&&s-u===1&&this._maskService._checkSymbolMask(e.value,this._maskService.maskExpression[s-1-u]??"")&&(this._maskService.actualValue=`${this.prefix}${e.value}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${this.suffix}`))}let n=0,c=!1;if(this._code==="Delete"&&(this._maskService.deletedSpecialCharacter=!0),this._inputValue.length>=this._maskService.maskExpression.length-1&&this._code!=="Backspace"&&this._maskService.maskExpression==="d0/M0/0000"&&s<10){let h=this._inputValue.slice(s-1,s);e.value=this._inputValue.slice(0,s-1)+h+this._inputValue.slice(s+1)}if(this._maskService.maskExpression==="d0/M0/0000"&&this.leadZeroDateTime&&(s<3&&Number(e.value)>31&&Number(e.value)<40||s===5&&Number(e.value.slice(3,5))>12)&&(s=s+2),this._maskService.maskExpression==="Hh:m0:s0"&&this.apm&&(this._justPasted&&e.value.slice(0,2)==="00"&&(e.value=e.value.slice(1,2)+e.value.slice(2,e.value.length)),e.value=e.value==="00"?"0":e.value),this._maskService.applyValueChanges(s,this._justPasted,this._code==="Backspace"||this._code==="Delete",(h,u)=>{this._justPasted=!1,n=h,c=u}),this._getActiveElement()!==e)return;if(this._maskService.plusOnePosition&&(s=s+1,this._maskService.plusOnePosition=!1),this._maskExpressionArray.length)if(this._code==="Backspace"){let h=this.specialCharacters.includes(this._maskService.actualValue.slice(s-1,s)),u=this.specialCharacters.includes(this._maskService.actualValue.slice(s,s+1));this._allowFewMaskChangeMask&&!u?(s=e.selectionStart+1,this._allowFewMaskChangeMask=!1):s=h?s-1:s}else s=e.selectionStart===1?e.selectionStart+this._maskService.prefix.length:e.selectionStart;this._position=this._position===1&&this._inputValue.length===1?null:this._position;let a=this._position?this._inputValue.length+s+n:s+(this._code==="Backspace"&&!c?0:n);a>this._getActualInputLength()&&(a=e.value===this._maskService.decimalMarker&&e.value.length===1?this._getActualInputLength()+1:this._getActualInputLength()),a<0&&(a=0),e.setSelectionRange(a,a),this._position=null}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof r);else{if(!this._maskValue){this.onChange(e.value);return}this._maskService.applyValueChanges(e.value.length,this._justPasted,this._code==="Backspace"||this._code==="Delete")}}onCompositionStart(){this._isComposing=!0}onCompositionEnd(t){this._isComposing=!1,this._justPasted=!0,this.onInput(t)}onBlur(t){if(this._maskValue){let e=t.target;if(this._maskService.leadZero&&e.value.length>0&&typeof this._maskService.decimalMarker=="string"){let r=this._maskService.maskExpression,s=Number(this._maskService.maskExpression.slice(r.length-1,r.length));if(s>0){e.value=this._maskService.suffix?e.value.split(this._maskService.suffix).join(""):e.value;let n=e.value.split(this._maskService.decimalMarker)[1];e.value=e.value.includes(this._maskService.decimalMarker)?e.value+"0".repeat(s-n.length)+this._maskService.suffix:e.value+this._maskService.decimalMarker+"0".repeat(s)+this._maskService.suffix,this._maskService.actualValue=e.value}}this._maskService.clearIfNotMatchFn()}this._isFocused=!1,this.onTouch()}onClick(t){if(!this._maskValue)return;let e=t.target,r=0,s=0;e!==null&&e.selectionStart!==null&&e.selectionStart===e.selectionEnd&&e.selectionStart>this._maskService.prefix.length&&t.keyCode!==38&&this._maskService.showMaskTyped&&!this.keepCharacterPositions&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),e.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===e.value?(e.focus(),e.setSelectionRange(r,s)):e.selectionStart>this._maskService.actualValue.length&&e.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));let n=e&&(e.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:e.value);if(e&&e.value!==n&&(e.value=n),e&&e.type!=="number"&&(e.selectionStart||e.selectionEnd)<=this._maskService.prefix.length){let c=this._maskService.maskExpression.match(new RegExp(`^[${this._maskService.specialCharacters.map(a=>`\\${a}`).join("")}]+`))?.[0].length||0;e.selectionStart=this._maskService.prefix.length+c;return}e&&e.selectionEnd>this._getActualInputLength()&&(e.selectionEnd=this._getActualInputLength())}onKeyDown(t){if(!this._maskValue)return;if(this._isComposing){t.key==="Enter"&&this.onCompositionEnd(t);return}this._code=t.code?t.code:t.key;let e=t.target;if(this._inputValue=e.value,this._setMask(),e.type!=="number"){if(t.key==="ArrowUp"&&t.preventDefault(),t.key==="ArrowLeft"||t.key==="Backspace"||t.key==="Delete"){if(t.key==="Backspace"&&e.value.length===0&&(e.selectionStart=e.selectionEnd),t.key==="Backspace"&&e.selectionStart!==0){if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&e.selectionStart<=this.prefix.length)e.setSelectionRange(this.prefix.length,e.selectionEnd);else if(this._inputValue.length!==e.selectionStart&&e.selectionStart!==1)for(;this.specialCharacters.includes((this._inputValue[e.selectionStart-1]??"").toString())&&(this.prefix.length>=1&&e.selectionStart>this.prefix.length||this.prefix.length===0);)e.setSelectionRange(e.selectionStart-1,e.selectionEnd)}this.checkSelectionOnDeletion(e),this._maskService.prefix.length&&e.selectionStart<=this._maskService.prefix.length&&e.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();let r=e.selectionStart;t.key==="Backspace"&&!e.readOnly&&r===0&&e.selectionEnd===e.value.length&&e.value.length!==0&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<e.selectionStart?e.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(t.code==="KeyA"&&t.ctrlKey||t.code==="KeyA"&&t.metaKey)&&(e.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=e.selectionStart,this._maskService.selEnd=e.selectionEnd}}writeValue(t){return ee(this,null,function*(){let e=t;if(typeof e=="object"&&e!==null&&"value"in e&&("disable"in e&&this.setDisabledState(!!e.disable),e=e.value),e!==null&&(e=this.inputTransformFn?this.inputTransformFn(e):e),typeof e=="string"||typeof e=="number"||e===null||typeof e>"u"){(e===null||typeof e>"u"||e==="")&&(this._maskService._currentValue="",this._maskService._previousValue="");let r=e;if(typeof r=="number"||this._maskValue.startsWith("separator")){r=String(r);let s=this._maskService.currentLocaleDecimalMarker();Array.isArray(this._maskService.decimalMarker)||(r=this._maskService.decimalMarker!==s?r.replace(s,this._maskService.decimalMarker):r),this._maskService.leadZero&&r&&this.maskExpression&&this.dropSpecialCharacters!==!1&&(r=this._maskService._checkPrecision(this._maskService.maskExpression,r)),(this._maskService.decimalMarker===","||Array.isArray(this._maskService.decimalMarker)&&this._maskService.thousandSeparator===".")&&(r=r.toString().replace(".",",")),this.maskExpression?.startsWith("separator")&&this.leadZero&&requestAnimationFrame(()=>{this._maskService.applyMask(r?.toString()??"",this._maskService.maskExpression)}),this._maskService.isNumberValue=!0}typeof r!="string"&&(r=""),this._inputValue=r,this._setMask(),r&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(typeof this.inputTransformFn!="function"&&(this._maskService.writingValue=!0),this._maskService.formElementProperty=["value",this._maskService.applyMask(r,this._maskService.maskExpression)],typeof this.inputTransformFn!="function"&&(this._maskService.writingValue=!1)):this._maskService.formElementProperty=["value",r],this._inputValue=r}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof e)})}registerOnChange(t){this._maskService.onChange=this.onChange=t}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){let e=t?.activeElement?.shadowRoot;return e?.activeElement?this._getActiveElement(e):t.activeElement}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){let e=this._maskValue.split("").filter(r=>r!==":").length;return t&&(+(t[t.length-1]??-1)==0&&t.length<e||t.length<=e-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.some(t=>{if(t.split("").some(r=>this._maskService.specialCharacters.includes(r))&&this._inputValue&&this._areAllCharactersInEachStringSame(this._maskExpressionArray)||t.includes("{")){let r=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(t)?.length;if(r)return this._maskValue=this.maskExpression=this._maskService.maskExpression=t.includes("{")?this._maskService._repeatPatternSymbols(t):t,r;{this._code==="Backspace"&&(this._allowFewMaskChangeMask=!0);let s=this._maskExpressionArray[this._maskExpressionArray.length-1]??"";this._maskValue=this.maskExpression=this._maskService.maskExpression=s.includes("{")?this._maskService._repeatPatternSymbols(s):s}}else{let r=this._maskService.removeMask(this._inputValue)?.split("").every((s,n)=>{let c=t.charAt(n);return this._maskService._checkSymbolMask(s,c)});if(r||this._justPasted)return this._maskValue=this.maskExpression=this._maskService.maskExpression=t,r}})}_areAllCharactersInEachStringSame(t){let e=this._maskService.specialCharacters;function r(n){let c=new RegExp(`[${e.map(a=>`\\${a}`).join("")}]`,"g");return n.replace(c,"")}return t.map(r).every(n=>new Set(n).size===1)}static{this.\u0275fac=function(e){return new(e||p)}}static{this.\u0275dir=se({type:p,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(e,r){e&1&&ce("paste",function(){return r.onPaste()})("focus",function(n){return r.onFocus(n)})("ngModelChange",function(n){return r.onModelChange(n)})("input",function(n){return r.onInput(n)})("compositionstart",function(n){return r.onCompositionStart(n)})("compositionend",function(n){return r.onCompositionEnd(n)})("blur",function(n){return r.onBlur(n)})("click",function(n){return r.onClick(n)})("keydown",function(n){return r.onKeyDown(n)})},inputs:{maskExpression:[0,"mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",leadZero:"leadZero",triggerOnMaskChange:"triggerOnMaskChange",apm:"apm",inputTransformFn:"inputTransformFn",outputTransformFn:"outputTransformFn",keepCharacterPositions:"keepCharacterPositions"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],standalone:!0,features:[pe([{provide:ke,useExisting:p,multi:!0},{provide:_e,useExisting:p,multi:!0},Y]),W]})}}return p})();export{Ae as a,Je as b,Ue as c};
