import{a as nt,d as ot,e as re}from"./chunk-MXIWAFIV.js";import{a as le,b as se,c as it,d as Q}from"./chunk-4MVFGFST.js";import{a as ae}from"./chunk-UWOP32XS.js";import{a as pe,b as at}from"./chunk-QYWSPK3A.js";import"./chunk-PZYZ7O55.js";import{b as Be,c as N,e as F,f as T,g as qe,h as Ue,i as S,j as k,k as Xe,l as Ge,n as Re,o as ze,p as U,q as X,r as G,u as Ye,v as Qe,w as He,x as R,y as te}from"./chunk-POSQ46WM.js";import{a as V}from"./chunk-EDMWRYVU.js";import{A as J,Ba as y,Ca as C,Cb as ie,Da as w,E as P,Eb as ne,F as K,Fa as Z,Ga as Fe,Ha as Ae,Hb as z,J as Me,Jb as Ke,K as u,Ka as De,Kb as O,L as f,La as ue,Ma as fe,P as A,Rb as Ze,Sb as $e,Tb as et,Va as B,Wa as $,X as a,Xa as q,Y as E,Ya as j,Za as je,_a as ee,_b as oe,aa as _,ba as ge,bc as tt,ca as l,cc as L,dc as Y,fa as D,ga as Ee,ha as Pe,hb as Ne,ia as Ie,ib as We,ja as o,ka as n,kb as Oe,la as c,ma as x,n as Ce,na as h,nb as he,oa as p,p as we,pb as W,ra as Te,sa as ke,sb as Je,ta as Le,va as s,w as Se,wa as b,xa as M,ya as I,za as Ve}from"./chunk-7PEPAECK.js";import{a as ve,b as be,f as ye}from"./chunk-GAL4ENT6.js";var mt=ye(it());function lt(){return new Ue({id:new S(null),date_published:new S(null),date_end:new S(null),lib_posting_category_id:new S(null),title:new S(null),description:new S(null),slot:new S(null),address:new S(null),barangay_code:new S(null),coordinates:new S(null),no_scholar_flag:new S(!1),no_ofw_flag:new S(!1),no_shiftee_flag:new S(!1),no_irregular_flag:new S(!1),solo_parent_flag:new S(!1),pwd_flag:new S(!1),gwa:new S(null),lib_academic_program_id:new S(null),lib_year_level_id:new S(null),lib_average_monthly_income_id:new S(null)})}var ft=["confirmCode"],st=(()=>{class i{onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete(this.url,this.delete_id).subscribe({next:()=>{this.is_loading=!1,this.message="Code Match, Item was deleted",this.closeModal("item-deleted")},error:e=>{console.log(e),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.message="Code mismatch, please try again")}generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(Math.random()*1e3).toString().padStart(4,"0")}closeModal(e){this.toggleModal.emit(e)}constructor(e){this.http=e,this.toggleModal=new A,this.faTrash=Ke,this.confirm_code="0000",this.is_loading=!1,this.message=null}ngOnChanges(e){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}static{this.\u0275fac=function(r){return new(r||i)(E(V))}}static{this.\u0275cmp=P({type:i,selectors:[["app-delete-item"]],viewQuery:function(r,t){if(r&1&&Te(ft,5),r&2){let d;ke(d=Le())&&(t.inputElement=d.first)}},inputs:{url:"url",delete_id:"delete_id",delete_desc:"delete_desc"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[Me,Z],decls:31,vars:9,consts:[["confirmCode",""],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-blue-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","minlength","4","maxlength","4","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup.enter","ngModelChange","ngModel"],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-blue-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-blue-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"px-5","mx-10","mt-5","italic","text-sm","text-blue-500"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(r,t){if(r&1){let d=x();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),s(5),n()(),o(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),s(10),n(),o(11,"div",10)(12,"span",11),s(13,"Delete Code"),n(),o(14,"span",12),s(15),n()(),o(16,"div",10)(17,"label",13),s(18,"Enter Code"),n(),o(19,"input",14,0),h("keyup.enter",function(){return u(d),f(t.onSubmit())}),w("ngModelChange",function(v){return u(d),C(t.confirmation_code,v)||(t.confirmation_code=v),f(v)}),n()(),o(21,"div",15)(22,"button",16),h("click",function(){return u(d),f(t.onSubmit())}),c(23,"fa-icon",17),s(24," Delete "),n()()(),o(25,"div",18),s(26),n()()(),o(27,"div",19)(28,"button",20),h("click",function(){return u(d),f(t.closeModal("delete-item"))}),s(29,"Cancel"),n()()()()(),c(30,"div",21)}r&2&&(a(5),I(" Delete ",t.delete_desc,": ",t.delete_id," "),a(5),M(" Your are about to delete a ",t.delete_desc," record. Please enter the generated delete code in order to proceed. "),a(5),b(t.confirm_code),a(4),y("ngModel",t.confirmation_code),a(3),l("disabled",!t.confirmation_code||t.is_loading),a(),l("icon",t.faTrash),a(3),M(" ",t.message," "),a(2),l("disabled",t.is_loading))},dependencies:[Y,L,R,N,T,Ye,Qe,k]})}}return i})();var ht=()=>({standalone:!0});function xt(i,m){if(i&1&&(o(0,"option",13),s(1),n()),i&2){let e=m.$implicit;l("value",e.code),a(),b(e.name)}}function vt(i,m){if(i&1&&(o(0,"option",13),s(1),n()),i&2){let e=m.$implicit;l("value",e.code),a(),b(e.name)}}function bt(i,m){i&1&&(o(0,"div")(1,"label",11),s(2,"General Weighted Average"),n(),c(3,"input",25),n())}function yt(i,m){if(i&1&&(o(0,"option",13),s(1),n()),i&2){let e=m.$implicit;l("value",e.id),a(),b(e.desc)}}function Ct(i,m){if(i&1&&(o(0,"div")(1,"label",11),s(2,"Year Level"),n(),o(3,"select",26),_(4,yt,2,2,"option",17),n()()),i&2){let e=p();a(4),l("ngForOf",e.year_levels)}}function wt(i,m){if(i&1&&(o(0,"option",13),s(1),n()),i&2){let e=m.$implicit;l("value",e.id),a(),b(e.desc)}}function St(i,m){if(i&1&&(o(0,"div")(1,"label",11),s(2,"Course"),n(),o(3,"select",27),_(4,wt,2,2,"option",17),n()()),i&2){let e=p();a(4),l("ngForOf",e.academic_programs)}}function Mt(i,m){if(i&1&&(o(0,"option",13),s(1),n()),i&2){let e=m.$implicit;l("value",e.id),a(),b(e.desc)}}function Et(i,m){if(i&1&&(o(0,"div")(1,"label",11),s(2,"Household Income"),n(),o(3,"select",28),_(4,Mt,2,2,"option",17),n()()),i&2){let e=p();a(4),l("ngForOf",e.montly_incomes)}}function Pt(i,m){if(i&1){let e=x();o(0,"div",29)(1,"button",30),h("click",function(){u(e);let t=p();return f(t.toggleMap())}),c(2,"fa-icon",31),s(3),n()()}if(i&2){let e=p();a(2),l("icon",e.faLocationDot),a(),M(" ",e.postingForm.value.id?"Update":"Tag"," location ")}}function It(i,m){if(i&1&&c(0,"map-marker",34),i&2){let e=m.$implicit,r=p(2);l("position",e)("options",r.markerOptions)}}function Tt(i,m){if(i&1){let e=x();o(0,"div",5)(1,"div",32)(2,"google-map",33),h("mapClick",function(t){u(e);let d=p();return f(d.addMarker(t))}),Pe(3,It,1,2,"map-marker",34,Ee),n()(),o(5,"div",35)(6,"div",36),s(7),n(),o(8,"div",32)(9,"button",37),h("click",function(){u(e);let t=p();return f(t.saveLongLat())}),s(10," Save Location "),n()()()()}if(i&2){let e=p();a(2),l("options",e.options),a(),Ie(e.markerPositions),a(4),M(" ",e.markerPositions[0]?e.markerPositions[0].lat+", "+e.markerPositions[0].lng:""," "),a(2),l("disabled",!e.markerPositions[0])}}function kt(i,m){if(i&1&&(o(0,"div"),c(1,"input",52),o(2,"label"),s(3),n()()),i&2){let e=m.$implicit;a(),l("formControlName",e.var_name),ge("id",e.var_name),a(),ge("for",e.var_name),a(),b(e.label)}}function Lt(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=p(4);l("icon",e.faSave)}}function Vt(i,m){if(i&1&&c(0,"fa-icon",58),i&2){let e=p(4);l("icon",e.faCircleNotch)}}function Ft(i,m){if(i&1){let e=x();o(0,"button",57),h("click",function(){u(e);let t=p(3);return f(t.toggleMyModal("delete-item"))}),_(1,Lt,1,1,"fa-icon",55)(2,Vt,1,1,"fa-icon",56),s(3," Delete "),n()}if(i&2){let e=p(3);a(),l("ngIf",!e.isSaving),a(),l("ngIf",e.isSaving)}}function At(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=p(3);l("icon",e.faSave)}}function Dt(i,m){if(i&1&&c(0,"fa-icon",58),i&2){let e=p(3);l("icon",e.faCircleNotch)}}function jt(i,m){if(i&1){let e=x();_(0,Ft,4,2,"button",53),o(1,"button",54),h("click",function(){u(e);let t=p(2);return f(t.onSubmit())}),_(2,At,1,1,"fa-icon",55)(3,Dt,1,1,"fa-icon",56),s(4," Save "),n()}if(i&2){let e=p(2);l("ngIf",e.postingForm.value.id),a(),l("disabled",!e.postingForm.valid),a(),l("ngIf",!e.isSaving),a(),l("ngIf",e.isSaving)}}function Nt(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=p(3);l("icon",e.faUpload)}}function Wt(i,m){if(i&1&&c(0,"fa-icon",58),i&2){let e=p(3);l("icon",e.faCircleNotch)}}function Ot(i,m){if(i&1){let e=x();o(0,"button",59),h("click",function(){u(e);let t=p(2);return f(t.onSubmit(!0))}),_(1,Nt,1,1,"fa-icon",55)(2,Wt,1,1,"fa-icon",56),s(3," Publish "),n()}if(i&2){let e=p(2);l("disabled",!e.postingForm.valid),a(),l("ngIf",!e.isSaving),a(),l("ngIf",e.isSaving)}}function Bt(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=p(3);l("icon",e.faUpload)}}function qt(i,m){if(i&1&&c(0,"fa-icon",58),i&2){let e=p(3);l("icon",e.faCircleNotch)}}function Ut(i,m){if(i&1){let e=x();o(0,"button",60),h("click",function(){u(e);let t=p(2);return f(t.closePost())}),_(1,Bt,1,1,"fa-icon",55)(2,qt,1,1,"fa-icon",56),s(3," Close Post "),n()}if(i&2){let e=p(2);a(),l("ngIf",!e.isSaving),a(),l("ngIf",e.isSaving)}}function Xt(i,m){if(i&1&&(o(0,"div",38)(1,"div",39),_(2,kt,4,4,"div",40),n(),o(3,"div",41)(4,"div",42)(5,"span",11),s(6,"Text Details"),n(),o(7,"span",43),s(8,"Add details for the posting"),n()(),o(9,"div",44),s(10),n()(),o(11,"div",45)(12,"span",46),s(13,"Content"),n(),o(14,"div",47),c(15,"quill-editor",48),n()(),o(16,"div",49),_(17,jt,5,4)(18,Ot,4,3,"button",50)(19,Ut,4,2,"button",51),n()()),i&2){let e=p();a(2),l("ngForOf",e.requirementList),a(8),M(" Coordinates: ",e.geoLocation?e.geoLocation.lat+", "+e.geoLocation.lng:""," "),a(5),l("modules",e.editorConfig),a(2),D(!e.postingForm.value.id||e.postingForm.value.id&&!e.postingForm.value.date_published?17:-1),a(),D(!e.postingForm.value.id||e.postingForm.value.id&&!e.postingForm.value.date_published?18:-1),a(),D(!e.postingForm.value.id||e.postingForm.value.id&&e.postingForm.value.date_published?19:-1)}}function Gt(i,m){if(i&1){let e=x();o(0,"app-delete-item",61),h("toggleModal",function(t){u(e);let d=p();return f(d.toggleMyModal(t))}),n()}if(i&2){let e=p();l("url","posting-information/")("delete_id",e.postingForm.value.id)("delete_desc","Posting Item")}}var _e=(()=>{class i{toggleMyModal(e){e==="item-deleted"?(this.modals["delete-item"]=!1,this.closeComponent()):this.modals[e]=!this.modals[e]}addMarker(e){e?.latLng&&(this.markerPositions[0]=e?.latLng?.toJSON())}onSubmit(e){if(this.isSaving=!0,e){let r=B(new Date,"yyyy-MM-dd","en","Asia/Manila");this.postingForm.patchValue({date_published:r})}this.http.post("posting-information",this.postingForm.value).subscribe({next:r=>{console.log(r),this.isSaving=!1,this.closeComponent()},error:r=>console.log(r)})}saveLongLat(){this.geoLocation=this.markerPositions[0],this.postingForm.patchValue({coordinates:{latitude:this.geoLocation.lat,longitude:this.geoLocation.lng}}),this.toggleMap()}toggleMap(){this.showGoogleMap=!this.showGoogleMap}loadDemog(){this.http.get("psgc/municipalities/"+this.municipality,{params:{include:"barangays"}}).subscribe({next:e=>{this.barangays=e.data.barangays},error:e=>console.log(e)})}updateValidators(){this.postingForm.value.lib_posting_category_id==="1"?this.postingForm.controls.coordinates.enable():this.postingForm.controls.coordinates.disable()}deletePost(){this.http.delete("posting-information/",this.postingForm.value.id).subscribe({next:e=>{console.log(e)},error:e=>console.log(e)})}createForm(){this.postingForm=this.formBuilder.nonNullable.group({id:[null],date_published:[null],date_end:[null,F.required],lib_posting_category_id:[null,F.required],title:[null,F.required],description:[null,F.required],slot:[null,F.required],address:[null,F.required],barangay_code:[null,F.required],coordinates:[null,F.required],no_scholar_flag:[!1],no_ofw_flag:[!1],no_shiftee_flag:[!1],no_irregular_flag:[!1],solo_parent_flag:[!1],pwd_flag:[!1],gwa:[null],lib_academic_program_id:[null],lib_year_level_id:[null],lib_average_monthly_income_id:[null]}),console.log(this.selected_posting),this.selected_posting&&(this.municipality=this.selected_posting.barangay.psgc_10_digit_code.substring(0,7).padEnd(10,"0"),this.loadDemog(),this.postingForm.patchValue(be(ve({},this.selected_posting),{coordinates:{latitude:this.selected_posting.latitude,longitude:this.selected_posting.longitude}})),this.markerPositions=[{lat:this.selected_posting.latitude,lng:this.selected_posting.longitude}],this.geoLocation=this.markerPositions[0],this.selected_posting.date_published&&this.postingForm.disable())}loadLibraries(){let e=this.http.get("libraries/academic-programs",{params:{per_page:"all"}}),r=this.http.get("libraries/year-level",{params:{per_page:"all"}}),t=this.http.get("libraries/monthly-income",{params:{per_page:"all"}}),d=this.http.get("psgc/provinces/0306900000",{params:{include:"municipalities"}});Ce([d,e,r,t]).subscribe({next:([g,v,gt,ut])=>{this.municipalities=g.data.municipalities,this.academic_programs=v.data,this.year_levels=gt.data,this.montly_incomes=ut.data,this.createForm()},error:g=>console.log(g)})}closePost(){this.is_closing=!0;let e={post_closed_flag:!0,closed_date:B(new Date,"yyyy-MM-dd","en","Asia/manila")};this.http.update("posting-information/",this.postingForm.value.id,e).subscribe({next:r=>{this.is_closing=!1,console.log(r)},error:r=>console.log(r)})}closeComponent(){this.toggleModal.emit()}constructor(e,r){this.http=e,this.formBuilder=r,this.toggleModal=new A,this.faUpload=Ze,this.faSave=z,this.faArrowLeft=O,this.faLocationDot=et,this.faCircleNotch=W,this.postingForm=lt(),this.isSaving=!1,this.min_date=B(new Date,"yyyy-MM-dd","en","Asia/manila"),this.editorContent="",this.submittedContent="",this.editorConfig={toolbar:[["bold","italic","underline"],[{indent:"-1"},{indent:"+1"}],[{list:"ordered"},{list:"bullet"}]]},this.requirementList=[{label:"No existing scholarship",var_name:"no_scholar_flag"},{label:"Non-OFW parents",var_name:"no_ofw_flag"},{label:"No shiftee",var_name:"no_shiftee_flag"},{label:"No Irregular",var_name:"no_irregular_flag"},{label:"Must be a PWD",var_name:"pwd_flag"},{label:"Parent is a Solo Parent",var_name:"solo_parent_flag"}],this.partTimeList=[],this.modals=[],this.municipalities=[],this.barangays=[],this.isLoading=!1,this.showGoogleMap=!1,this.options={mapId:"DEMO_MAP_ID",center:{lat:15.475578308105469,lng:120.59635162353516},zoom:14,fullscreenControl:!1,draggableCursor:"default",draggingCursor:"grab"},this.center={lat:15.475578308105469,lng:120.59635162353516},this.zoom=4,this.markerOptions={draggable:!1},this.markerPositions=[],this.is_closing=!1}ngOnInit(){this.isSaving=!1,this.loadLibraries()}static{this.\u0275fac=function(r){return new(r||i)(E(V),E(He))}}static{this.\u0275cmp=P({type:i,selectors:[["app-posting-page"]],inputs:{selected_posting:"selected_posting"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[Z],decls:51,vars:18,consts:[[1,"flex","flex-col","min-h-screen"],[1,"font-bold","text-xl","text-blue-600","mb-3"],[3,"click"],[3,"icon"],[3,"formGroup"],[1,"flex","flex-col"],[1,"flex","flex-row","w-full","bg-white"],[1,"w-full","p-3","grid","grid-cols-4","gap-x-5"],[1,"col-span-2"],[1,"font-semibold","w-36","mt-1"],["type","text","formControlName","title",1,"input-txt"],[1,"font-semibold"],["formControlName","lib_posting_category_id",1,"input-txt",3,"change"],[3,"value"],["type","number","formControlName","slot",1,"input-txt"],["type","date","formControlName","date_end",1,"input-txt",3,"min"],[1,"input-txt",3,"change","ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],["formControlName","barangay_code",1,"input-txt"],["type","text","formControlName","address",1,"input-txt"],[4,"ngIf"],["class","flex justify-center mt-5 col-span-4",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["class","flex flex-col bg-white py-3 px-8 mt-3",4,"ngIf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],["type","text","max","5.0","min","1.0","formControlName","gwa",1,"input-txt"],["type","text","formControlName","lib_year_level_id",1,"input-txt"],["type","text","formControlName","lib_academic_program_id",1,"input-txt"],["type","text","formControlName","lib_average_monthly_income_id",1,"input-txt"],[1,"flex","justify-center","mt-5","col-span-4"],[1,"btn-blue-nr","px-3",3,"click"],[1,"pr-2",3,"icon"],[1,"flex","justify-center"],["width","700px",1,"w-fit",3,"mapClick","options"],[3,"position","options"],[1,"flex","flex-col","justify-center","mt-3"],[1,"flex","justify-center","italic"],[1,"bg-blue-600","px-5","py-2","rounded-md","text-white","text-sm","disabled:bg-gray-400",3,"click","disabled"],[1,"flex","flex-col","bg-white","py-3","px-8","mt-3"],[1,"grid","grid-cols-4","gap-x-4","my-3"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"text-left","flex","flex-col"],[1,"text-sm"],[1,"flex","justify-end","italic","text-xs"],[1,"flex","flex-col","mt-5"],[1,"font-semibold","text-sm"],[1,"w-full"],["formControlName","description",1,"h-96","w-full","rounded",3,"modules"],[1,"flex","justify-end","my-3"],[1,"disabled:bg-gray-400","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full",3,"disabled"],[1,"disabled:bg-gray-400","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full"],["type","checkbox",1,"rounded-md","mr-1","text-lg",3,"formControlName"],["class","disabled:bg-gray-400 bg-rose-500 text-white px-8 py-2 font-semibold rounded-full mr-2",3,"click",4,"ngIf"],[1,"disabled:bg-gray-400","bg-orange-400","text-white","px-8","py-2","font-semibold","rounded-full","mr-2",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"disabled:bg-gray-400","bg-rose-500","text-white","px-8","py-2","font-semibold","rounded-full","mr-2",3,"click"],["animation","spin",3,"icon"],[1,"disabled:bg-gray-400","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full",3,"click","disabled"],[1,"disabled:bg-gray-400","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full",3,"click"],[3,"toggleModal","url","delete_id","delete_desc"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"span",1)(2,"button",2),h("click",function(){return t.closeComponent()}),c(3,"fa-icon",3),s(4," POST "),n()(),o(5,"form",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),s(11,"Title"),n(),c(12,"input",10),n(),o(13,"div")(14,"label",11),s(15,"Post Type"),n(),o(16,"select",12),h("change",function(){return t.updateValidators()}),o(17,"option",13),s(18,"Part-time Jobs"),n(),o(19,"option",13),s(20,"Scholarship"),n()()(),o(21,"div")(22,"label",11),s(23,"Slots"),n(),c(24,"input",14),n(),o(25,"div")(26,"label",11),s(27,"Deadline date"),n(),c(28,"input",15),n(),o(29,"div")(30,"label",11),s(31,"Municipality"),n(),o(32,"select",16),h("change",function(){return t.loadDemog()}),w("ngModelChange",function(g){return C(t.municipality,g)||(t.municipality=g),g}),_(33,xt,2,2,"option",17),n()(),o(34,"div")(35,"label",11),s(36,"Barangay"),n(),o(37,"select",18),_(38,vt,2,2,"option",17),n()(),o(39,"div")(40,"label",11),s(41,"Address"),n(),c(42,"input",19),n(),_(43,bt,4,0,"div",20)(44,Ct,5,1,"div",20)(45,St,5,1,"div",20)(46,Et,5,1,"div",20)(47,Pt,4,2,"div",21),n()()(),_(48,Tt,11,3,"div",22)(49,Xt,20,6,"div",23),n()(),_(50,Gt,1,3,"app-delete-item",24)),r&2&&(a(3),l("icon",t.faArrowLeft),a(2),l("formGroup",t.postingForm),a(12),l("value",1),a(2),l("value",2),a(9),l("min",t.min_date),a(4),y("ngModel",t.municipality),l("ngModelOptions",Fe(17,ht)),a(),l("ngForOf",t.municipalities),a(5),l("ngForOf",t.barangays),a(5),l("ngIf",t.postingForm.value.lib_posting_category_id==="2"),a(),l("ngIf",t.postingForm.value.lib_posting_category_id==="2"),a(),l("ngIf",t.postingForm.value.lib_posting_category_id==="2"),a(),l("ngIf",t.postingForm.value.lib_posting_category_id==="2"),a(),l("ngIf",t.postingForm.value.lib_posting_category_id==="1"),a(),l("ngIf",t.showGoogleMap),a(),l("ngIf",t.geoLocation||t.postingForm.value.lib_posting_category_id==="2"),a(),l("ngIf",t.modals["delete-item"]))},dependencies:[te,Xe,X,G,N,Ge,Be,U,T,qe,Re,ze,Y,L,R,k,re,nt,ot,ee,q,j,pe,st]})}}return i})();var rt=ye(it());var Qt=(i,m,e,r)=>({"bg-orange-500 text-white":i,"bg-green-500 text-white":m,"bg-blue-500 text-white":e,"bg-red-500 text-white":r});function Ht(i,m){if(i&1&&(o(0,"option",40),s(1),n()),i&2){let e=m.$implicit;l("value",e),a(),b(e)}}function Jt(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=p();l("icon",e.faFilter)}}function Kt(i,m){if(i&1&&c(0,"fa-icon",41),i&2){let e=p();l("icon",e.faCircleNotch)}}function Zt(i,m){if(i&1){let e=x();o(0,"tr",43)(1,"td",44),c(2,"span",45),s(3),n(),o(4,"td"),s(5),c(6,"br"),s(7),c(8,"br"),s(9),n(),o(10,"td",46)(11,"button",47),h("click",function(){let t=u(e).$implicit,d=p(2);return f(d.toggleMyModal("user-details",t))}),s(12," view details "),n()()()}if(i&2){let e=m.$implicit;a(2),l("ngClass",De(7,Qt,e.is_approved===null&&e.is_approved_interview===null,e.is_approved===1,e.is_approved===null&&e.is_approved_interview===1,e.is_approved===0)),a(),Ve(" ",e.user.last_name,", ",e.user.first_name," ",e.user.middle_name," "),a(2),M(" ",e.user.school.desc," "),a(2),M(" ",e.user.email," "),a(2),M(" ",e.user.contact_number," ")}}function $t(i,m){if(i&1&&(o(0,"tbody"),_(1,Zt,13,12,"tr",42),n()),i&2){let e=p();a(),l("ngForOf",e.applicantList)}}function ei(i,m){if(i&1&&(o(0,"div",48)(1,"div",49),c(2,"fa-icon",41),n(),o(3,"div",50),s(4," Loading list... "),n()()),i&2){let e=p();a(2),l("icon",e.faCircleNotch)}}function ti(i,m){if(i&1){let e=x();o(0,"app-page-controller",51),h("movePage",function(t){u(e);let d=p();return f(d.loadApplicants(t))}),n()}if(i&2){let e=p();l("meta",e.meta)}}function ii(i,m){if(i&1&&c(0,"fa-icon",41),i&2){let e=p(3);l("icon",e.faCircleNotch)}}function ni(i,m){if(i&1&&c(0,"fa-icon",41),i&2){let e=p(4);l("icon",e.faCircleNotch)}}function oi(i,m){if(i&1){let e=x();o(0,"button",64),h("click",function(){u(e);let t=p(3);return f(t.updateForInterviewApplicationStatus(!0))}),_(1,ni,1,1,"fa-icon",20),s(2," Approve for Interview "),n()}if(i&2){let e=p(3);l("disabled",e.updating_status),a(),l("ngIf",e.updating_status)}}function ai(i,m){if(i&1&&c(0,"fa-icon",41),i&2){let e=p(4);l("icon",e.faCircleNotch)}}function li(i,m){if(i&1){let e=x();o(0,"button",64),h("click",function(){u(e);let t=p(3);return f(t.updateApplicationStatus(!0))}),_(1,ai,1,1,"fa-icon",20),s(2," Approve Application "),n()}if(i&2){let e=p(3);l("disabled",e.updating_status),a(),l("ngIf",e.updating_status)}}function si(i,m){if(i&1){let e=x();o(0,"div",61)(1,"button",62),h("click",function(){u(e);let t=p(2);return f(t.updateApplicationStatus(!1))}),_(2,ii,1,1,"fa-icon",20),s(3," Reject "),n(),_(4,oi,3,2,"button",63)(5,li,3,2,"button",63),n()}if(i&2){let e=p(2);a(),l("disabled",e.updating_status),a(),l("ngIf",e.updating_status),a(2),l("ngIf",e.selected_application.is_approved_interview===null),a(),l("ngIf",e.selected_application.is_approved_interview)}}function ri(i,m){if(i&1){let e=x();o(0,"div",52)(1,"div",53)(2,"div",54)(3,"div",55)(4,"div")(5,"button",56),h("click",function(){u(e);let t=p();return f(t.toggleMyModal("user-details"))}),c(6,"fa-icon",3),s(7," Back "),n()(),o(8,"h3",57),s(9," Applicant Information "),n(),c(10,"div"),n(),o(11,"div",58),c(12,"app-user-information",59),n(),_(13,si,6,4,"div",60),n()()()}if(i&2){let e=p();a(6),l("icon",e.faArrowLeft),a(6),l("selected_user",e.selected_application.user),a(),l("ngIf",!e.selected_application.is_approved)}}function pi(i,m){i&1&&c(0,"div",65)}var pt=(()=>{class i{loadApplicants(e){this.isLoading=!0;let r={posting_id:this.selected_posting.id,show_list:1,per_page:this.per_page,application_status:this.application_status,is_applied:1,page:e??1};this.http.get("posting-application",{params:r}).subscribe({next:t=>{this.applicantList=t.data,this.meta=t.meta,console.log(this.applicantList),this.isLoading=!1},error:t=>console.log(t)})}closeComponent(){this.toggleModal.emit()}toggleMyModal(e,r){this.selected_application=r,this.modals[e]=!this.modals[e]}updateForInterviewApplicationStatus(e){this.updating_status=!0,this.selected_application.is_approved_interview=e,this.http.update("posting-application/",this.selected_application.id,this.selected_application).subscribe({next:r=>{this.updating_status=!1,this.toggleMyModal("user-details")},error:r=>console.log(r)})}updateApplicationStatus(e){this.updating_status=!0,this.selected_application.is_approved=e,this.http.update("posting-application/",this.selected_application.id,this.selected_application).subscribe({next:r=>{this.updating_status=!1,this.toggleMyModal("user-details")},error:r=>console.log(r)})}getAllData(){let e={posting_id:this.selected_posting.id,show_list:1,per_page:20,application_status:this.application_status,page:1,is_applied:1};this.allApplicantArray=[];let r=t=>{e.page=t,this.http.get("posting-application",{params:e}).subscribe({next:d=>{let g=d.data.map(v=>({last_name:v.user.last_name,first_name:v.user.first_name,email:v.user.email,contact_number:v.user.contact_number,is_scholar:v.user.scholar_flag?"Yes":"No",is_irregular:v.user.irregular_flag?"Yes":"No",is_shiftee:v.user.shiftee_flag?"Yes":"No",is_parent_ofw:v.user.parents.ofw_flag?"Yes":"No",course:v.user.academic_program.desc,year_level:v.user.year_level.desc,school:v.user.school.desc,date_applied:v.date_applied,cor_url:v.user.cor_url,rog_url:v.user.grade_url,application_status:v.is_approved===null?"pending":v.is_approved===1?"approved":"rejected"}));this.allApplicantArray.push(...g),t<d.meta.last_page?r(t+1):this.exportToExcel(this.allApplicantArray)},error:d=>console.log(d)})};r(1)}exportToExcel(e){let t={Sheets:{data:se.json_to_sheet(e)},SheetNames:["data"]},d=le(t,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(d,this.selected_posting.title.toLowerCase()+"_applicant_list")}saveAsExcelFile(e,r){let t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",d=new Blob([e],{type:t});(0,rt.saveAs)(d,`${r}.xlsx`)}constructor(e){this.http=e,this.toggleModal=new A,this.faArrowLeft=O,this.faCircleNotch=W,this.faFilter=ie,this.faFileExcel=ne,this.applicantList=[],this.isLoading=!1,this.per_page=10,this.statusList=["pending","approved","rejected"],this.modals=[],this.updating_status=!1}ngOnInit(){console.log(this.selected_posting),this.loadApplicants()}static{this.\u0275fac=function(r){return new(r||i)(E(V))}}static{this.\u0275cmp=P({type:i,selectors:[["app-applicant-list"]],inputs:{selected_posting:"selected_posting"},outputs:{toggleModal:"toggleModal"},decls:69,vars:15,consts:[[1,"flex","flex-col","w-full","bg-white","p-3","min-h-96"],[1,"font-bold","text-xl","text-blue-600","flex","justify-between","border-b","border-b-gray-300","pb-2","mb-2"],[3,"click"],[3,"icon"],[1,"text-sm","text-gray-600","font-normal"],[1,"flex","text-xs","w-1/2","text-gray-600"],[1,"mr-2"],[1,"mt-1"],[1,"input-txt","capitalize",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"input-txt",3,"ngModelChange","ngModel"],["value","10"],["value","15"],["value","20"],["value","30"],["value","50"],[1,"flex","justify-end","mt-1.5","ml-2"],[1,"bg-blue-500","my-3","px-2","text-white","rounded","hover:opacity-75","disabled:bg-gray-300",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"btn-blue-nr","bg-green-700","my-3","px-2","ml-1",3,"click"],[1,"flex","w-full","bg-white","text-xs"],[1,"-mt-0.5","mr-3"],[1,"flex"],[1,"block","rounded","h-4","w-4","shadow-sm","mr-1","bg-orange-500"],[1,"-mt-0.5"],[1,"flex","mx-3"],[1,"block","rounded","h-4","w-4","shadow-sm","mr-1","bg-red-500"],[1,"block","rounded","h-4","w-4","shadow-sm","mr-1","bg-blue-500"],[1,"block","rounded","h-4","w-4","shadow-sm","mr-1","bg-green-500"],[1,"table-auto","max-h-4/5","overflow-y-auto","mt-3","select-none"],[1,"w-4/12"],[1,"w-6/12"],[1,"w-2/12"],[4,"ngIf"],["class","flex flex-col w-full py-10",4,"ngIf"],[3,"meta","movePage",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[3,"value"],["animation","spin",3,"icon"],["class","hover:bg-sky-100 text-xs",4,"ngFor","ngForOf"],[1,"hover:bg-sky-100","text-xs"],[1,"text-center","flex","align-middle","select-none"],[1,"block","rounded","h-4","w-4","shadow-sm","mr-2",3,"ngClass"],[1,"text-center"],[1,"px-3","py-1","bg-blue-500","text-xs","rounded-full","text-white",3,"click"],[1,"flex","flex-col","w-full","py-10"],[1,"flex","justify-center","text-blue-500","w-full"],[1,"flex","justify-center","w-full"],[3,"movePage","meta"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","text-blue-600"],[1,"mt-3",3,"click"],[1,"my-2","text-2xl","font-bold"],[1,"overflow-y-auto","max-h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100","p-5"],[3,"selected_user"],["class","flex text-xs justify-center py-3 px-5 space-x-4 rounded-b border-t border-gray-200",4,"ngIf"],[1,"flex","text-xs","justify-center","py-3","px-5","space-x-4","rounded-b","border-t","border-gray-200"],[1,"btn-blue","bg-red-500","mr-2","w-28",3,"click","disabled"],["class","btn-blue bg-blue-500  w-28",3,"disabled","click",4,"ngIf"],[1,"btn-blue","bg-blue-500","w-28",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"span",1)(2,"div")(3,"button",2),h("click",function(){return t.closeComponent()}),c(4,"fa-icon",3),n(),s(5," Applicant List "),o(6,"span",4),s(7),n()(),o(8,"div",5)(9,"div",6)(10,"label",7),s(11,"Application Status "),n(),o(12,"select",8),w("ngModelChange",function(g){return C(t.application_status,g)||(t.application_status=g),g}),o(13,"option",9),s(14,"All"),n(),_(15,Ht,2,2,"option",10),n()(),o(16,"div")(17,"label",7),s(18,"Items per page"),n(),o(19,"select",11),w("ngModelChange",function(g){return C(t.per_page,g)||(t.per_page=g),g}),o(20,"option",12),s(21,"10"),n(),o(22,"option",13),s(23,"15"),n(),o(24,"option",14),s(25,"20"),n(),o(26,"option",15),s(27,"30"),n(),o(28,"option",16),s(29,"50"),n()()(),o(30,"div",17)(31,"button",18),h("click",function(){return t.loadApplicants()}),_(32,Jt,1,1,"fa-icon",19)(33,Kt,1,1,"fa-icon",20),n(),o(34,"button",21),h("click",function(){return t.getAllData()}),c(35,"fa-icon",3),n()()()(),o(36,"div",22)(37,"span",23),s(38,"Legends: "),n(),o(39,"div",24),c(40,"span",25),o(41,"span",26),s(42,"Pending"),n()(),o(43,"div",27),c(44,"span",28),o(45,"span",26),s(46,"Rejected"),n()(),o(47,"div",24),c(48,"span",29),o(49,"span",26),s(50,"Approved for Interview"),n()(),o(51,"div",24),c(52,"span",30),o(53,"span",26),s(54,"Approved Application"),n()()(),o(55,"table",31)(56,"thead")(57,"tr")(58,"th",32),s(59,"Name"),n(),o(60,"th",33),s(61,"Details"),n(),o(62,"th",34),s(63,"Action"),n()()(),_(64,$t,2,1,"tbody",35),n(),_(65,ei,5,1,"div",36)(66,ti,1,1,"app-page-controller",37),n(),_(67,ri,14,3,"div",38)(68,pi,1,0,"div",39)),r&2&&(a(4),l("icon",t.faArrowLeft),a(3),M(" (",t.meta==null?null:t.meta.total,") "),a(5),y("ngModel",t.application_status),a(),l("ngValue",null),a(2),l("ngForOf",t.statusList),a(4),y("ngModel",t.per_page),a(12),l("disabled",t.isLoading),a(),l("ngIf",!t.isLoading),a(),l("ngIf",t.isLoading),a(2),l("icon",t.faFileExcel),a(29),l("ngIf",!t.isLoading),a(),l("ngIf",t.isLoading),a(),l("ngIf",(t.meta==null?null:t.meta.total)>t.per_page),a(),l("ngIf",t.modals["user-details"]),a(),l("ngIf",t.modals["user-details"]))},dependencies:[$,q,j,L,X,G,U,T,k,Q,ae],styles:["td[_ngcontent-%COMP%]{padding:0 5px}"]})}}return i})();function mi(i,m){i&1&&(o(0,"span",13),s(1," SMS Sending Queued "),n())}function ci(i,m){if(i&1&&c(0,"fa-icon",26),i&2){let e=p(2);l("icon",e.faCircleNotch)}}function _i(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=p(2);l("icon",e.faSave)}}function gi(i,m){if(i&1){let e=x();o(0,"button",23),h("click",function(){u(e);let t=p();return f(t.saveTemplate())}),_(1,ci,1,1,"fa-icon",24)(2,_i,1,1,"fa-icon",25),s(3," Update Template "),n()}if(i&2){let e=p();l("disabled",e.is_saving||(e.message_template==null?null:e.message_template.interview_message)===e.interview_message&&(e.message_template==null?null:e.message_template.mobile_message_approved)===e.mobile_message_approved&&(e.message_template==null?null:e.message_template.mobile_message_rejected)===e.mobile_message_rejected&&(e.message_template==null?null:e.message_template.email_message_approved)===e.email_message_approved&&(e.message_template==null?null:e.message_template.email_message_rejected)===e.email_message_rejected),a(),l("ngIf",e.is_saving),a(),l("ngIf",!e.is_saving)}}function ui(i,m){if(i&1&&c(0,"fa-icon",26),i&2){let e=p(2);l("icon",e.faCircleNotch)}}function fi(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=p(2);l("icon",e.faSave)}}function hi(i,m){if(i&1){let e=x();o(0,"button",23),h("click",function(){u(e);let t=p();return f(t.saveTemplate())}),_(1,ui,1,1,"fa-icon",24)(2,fi,1,1,"fa-icon",25),s(3," Save Template "),n()}if(i&2){let e=p();l("disabled",e.is_saving),a(),l("ngIf",e.is_saving),a(),l("ngIf",!e.is_saving)}}function xi(i,m){if(i&1&&c(0,"fa-icon",26),i&2){let e=p(2);l("icon",e.faCircleNotch)}}function vi(i,m){if(i&1&&c(0,"fa-icon",3),i&2){let e=p(2);l("icon",e.faPaperPlane)}}function bi(i,m){if(i&1){let e=x();o(0,"button",27),h("click",function(){u(e);let t=p();return f(t.sendMessage())}),_(1,xi,1,1,"fa-icon",24)(2,vi,1,1,"fa-icon",25),s(3," Send Messages "),n()}if(i&2){let e=p();l("disabled",e.is_saving||(e.message_template==null?null:e.message_template.interview_message)!==e.interview_message||(e.message_template==null?null:e.message_template.mobile_message_approved)!==e.mobile_message_approved||(e.message_template==null?null:e.message_template.mobile_message_rejected)!==e.mobile_message_rejected||(e.message_template==null?null:e.message_template.email_message_approved)!==e.email_message_approved||(e.message_template==null?null:e.message_template.email_message_rejected)!==e.email_message_rejected),a(),l("ngIf",e.is_saving),a(),l("ngIf",!e.is_saving)}}var dt=(()=>{class i{getSegmentCount(e){return Math.ceil(e/160)}sendMessage(){this.is_saving=!0;let e={posting_id:this.selected_posting.id};this.http.post("send-bulk-sms",e).subscribe({next:r=>{console.log(r),this.job_sent=!0,this.is_saving=!1},error:r=>console.log(r)})}saveTemplate(){this.is_saving=!0;let e={posting_id:this.selected_posting.id,interview_message:this.interview_message,mobile_message_approved:this.mobile_message_approved,mobile_message_rejected:this.mobile_message_rejected,email_message_approved:this.email_message_approved,email_message_rejected:this.email_message_rejected};console.log(e),this.http.post("message-template",e).subscribe({next:r=>{console.log(r),this.message_template=r.data,this.message_template&&(this.interview_message=this.message_template.interview_message,this.mobile_message_approved=this.message_template.mobile_message_approved,this.mobile_message_rejected=this.message_template.mobile_message_rejected,this.email_message_approved=this.message_template.email_message_approved,this.email_message_rejected=this.message_template.email_message_rejected),this.is_saving=!1},error:r=>console.log(r)})}getMessageTemplate(e){this.is_saving=!0;let r={posting_id:e.id};this.http.get("message-template",{params:r}).subscribe({next:t=>{console.log(t),this.message_template=t.data[0],this.message_template&&(this.interview_message=this.message_template.interview_message,this.mobile_message_approved=this.message_template.mobile_message_approved,this.mobile_message_rejected=this.message_template.mobile_message_rejected,this.email_message_approved=this.message_template.email_message_approved,this.email_message_rejected=this.message_template.email_message_rejected),this.is_saving=!1},error:t=>console.log(t)})}closeModal(){this.toggleModal.emit()}constructor(e){this.http=e,this.toggleModal=new A,this.faSave=z,this.faCircleNotch=W,this.faPaperPlane=oe,this.faArrowLeft=O,this.is_saving=!1,this.job_sent=!1}ngOnInit(){console.log(this.selected_posting),this.getMessageTemplate(this.selected_posting)}static{this.\u0275fac=function(r){return new(r||i)(E(V))}}static{this.\u0275cmp=P({type:i,selectors:[["app-messaging"]],inputs:{selected_posting:"selected_posting"},outputs:{toggleModal:"toggleModal"},decls:70,vars:22,consts:[[1,"flex","flex-col","mt-5","min-h-screen"],[1,"font-bold","text-xl","text-blue-600"],[3,"click"],[3,"icon"],[1,"flex","flex-col","rounded-lg"],[1,"flex","flex-row","w-full","bg-white"],[1,"w-8/12","p-3","flex","flex-col"],[1,"font-semibold"],[1,"text-gray-400","text-sm"],[1,"w-4/12","p-3","flex","flex-col","text-right"],[1,"flex","flex-col","bg-white","py-3","px-5","mt-3","rounded-lg"],[1,"flex","justify-between","text-left"],[1,"flex","flex-col"],[1,"bg-green-500","text-white","rounded-full","px-2","py-1","text-xs"],[1,"flex","flex-col","mt-5"],[1,"font-semibold","text-sm"],[1,"w-full"],["rows","4",1,"input-txt",3,"ngModelChange","ngModel"],[1,"flex","justify-end"],[1,"flex","flex-col","mt-2"],[1,"flex","justify-end","text-sm"],["class","mr-2 mt-3 mb-5 bg-blue-600 text-white px-8 py-2 font-semibold rounded-full disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["class","mt-3 mb-5 bg-blue-600 text-white px-8 py-2 font-semibold rounded-full disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"mr-2","mt-3","mb-5","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full","disabled:bg-gray-300",3,"click","disabled"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mt-3","mb-5","bg-blue-600","text-white","px-8","py-2","font-semibold","rounded-full","disabled:bg-gray-300",3,"click","disabled"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"span",1)(2,"button",2),h("click",function(){return t.closeModal()}),c(3,"fa-icon",3),n(),s(4," Bulk Messaging (SMS/Email) "),n(),o(5,"div",4)(6,"div",5)(7,"div",6)(8,"span",7),s(9),n(),o(10,"span",8),s(11),n()(),o(12,"div",9)(13,"span",7),s(14,"Message will be sent to "),n(),o(15,"span"),s(16),n()()()(),o(17,"div",10)(18,"div",11)(19,"div",12)(20,"span",7),s(21,"SMS Message"),n()(),o(22,"div"),_(23,mi,2,0,"span",13),n()(),o(24,"div")(25,"div",14)(26,"span",15),s(27,"Interview Message"),n(),o(28,"div",16)(29,"textarea",17),w("ngModelChange",function(g){return C(t.interview_message,g)||(t.interview_message=g),g}),n()(),o(30,"div",18),s(31),n()(),o(32,"div",14)(33,"span",15),s(34,"Approved Message"),n(),o(35,"div",16)(36,"textarea",17),w("ngModelChange",function(g){return C(t.mobile_message_approved,g)||(t.mobile_message_approved=g),g}),n()(),o(37,"div",18),s(38),n()(),o(39,"div",19)(40,"span",15),s(41,"Reject Message"),n(),o(42,"div",16)(43,"textarea",17),w("ngModelChange",function(g){return C(t.mobile_message_rejected,g)||(t.mobile_message_rejected=g),g}),n()(),o(44,"div",18),s(45),n()()()(),o(46,"div",10)(47,"div",11)(48,"div",12)(49,"span",7),s(50,"Email Message"),n()()(),o(51,"div")(52,"div",14)(53,"span",15),s(54,"Approved Message"),n(),o(55,"div",16)(56,"textarea",17),w("ngModelChange",function(g){return C(t.email_message_approved,g)||(t.email_message_approved=g),g}),n()(),o(57,"div",18),s(58),n()(),o(59,"div",19)(60,"span",15),s(61,"Reject Message"),n(),o(62,"div",16)(63,"textarea",17),w("ngModelChange",function(g){return C(t.email_message_rejected,g)||(t.email_message_rejected=g),g}),n()(),o(64,"div",18),s(65),n()()()(),o(66,"div",20),_(67,gi,4,3,"button",21)(68,hi,4,3,"button",21)(69,bi,4,3,"button",22),n()()),r&2&&(a(3),l("icon",t.faArrowLeft),a(6),b(t.selected_posting.title),a(2),b(t.selected_posting.lib_posting_category_id==="1"?"Part-time":"Scholarship"),a(5),I("",t.selected_posting.posting_applications_count," Applicant",t.selected_posting.posting_applications_count>1?"s":"",""),a(7),D(t.job_sent?23:-1),a(6),y("ngModel",t.interview_message),a(2),I(" ",t.interview_message?t.interview_message.length:0,"/",t.interview_message?t.getSegmentCount(t.interview_message.length):1," "),a(5),y("ngModel",t.mobile_message_approved),a(2),I(" ",t.mobile_message_approved?t.mobile_message_approved.length:0,"/",t.mobile_message_approved?t.getSegmentCount(t.mobile_message_approved.length):1," "),a(5),y("ngModel",t.mobile_message_rejected),a(2),I(" ",t.mobile_message_rejected?t.mobile_message_rejected.length:0,"/",t.mobile_message_rejected?t.getSegmentCount(t.mobile_message_rejected.length):1," "),a(11),y("ngModel",t.email_message_approved),a(2),M(" ",t.email_message_approved?t.email_message_approved.length:0," "),a(5),y("ngModel",t.email_message_rejected),a(2),M(" ",t.email_message_rejected?t.email_message_rejected.length:0," "),a(2),l("ngIf",(t.message_template==null?null:t.message_template.interview_message)||(t.message_template==null?null:t.message_template.mobile_message_approved)||(t.message_template==null?null:t.message_template.mobile_message_rejected)||(t.message_template==null?null:t.message_template.email_message_approved)||(t.message_template==null?null:t.message_template.email_message_rejected)),a(),l("ngIf",!(t.message_template!=null&&t.message_template.interview_message)||!(t.message_template!=null&&t.message_template.mobile_message_approved)||!(t.message_template!=null&&t.message_template.mobile_message_rejected)||!(t.message_template!=null&&t.message_template.email_message_approved)||!(t.message_template!=null&&t.message_template.email_message_rejected)),a(),l("ngIf",(t.message_template==null?null:t.message_template.interview_message)&&(t.message_template==null?null:t.message_template.mobile_message_approved)&&(t.message_template==null?null:t.message_template.mobile_message_rejected)&&(t.message_template==null?null:t.message_template.email_message_approved)&&(t.message_template==null?null:t.message_template.email_message_rejected)))},dependencies:[j,L,N,T,k]})}}return i})();var Ci=i=>({"bg-gray-100 text-gray-400":i});function wi(i,m){if(i&1){let e=x();o(0,"div")(1,"button",9),h("click",function(){u(e);let t=p();return f(t.toggleModal("show-posting"))}),c(2,"fa-icon",10),s(3," Create Post "),n()()}if(i&2){let e=p();a(2),l("icon",e.faPenToSquare)}}function Si(i,m){if(i&1&&(o(0,"option",37),s(1),n()),i&2){let e=m.$implicit;l("value",e.code),a(),b(e.name)}}function Mi(i,m){if(i&1&&(o(0,"option",37),s(1),n()),i&2){let e=m.$implicit;l("value",e.code),a(),b(e.name)}}function Ei(i,m){if(i&1&&(o(0,"option",37),s(1),n()),i&2){let e=m.$implicit;l("value",e.id),a(),b(e.title)}}function Pi(i,m){if(i&1&&(o(0,"option",37),s(1),n()),i&2){let e=m.$implicit;l("value",e.id),a(),b(e.title)}}function Ii(i,m){if(i&1){let e=x();o(0,"button",48),h("click",function(){u(e);let t=p().$implicit,d=p(3);return f(d.toggleModal("show-messaging",t))}),s(1," Messaging "),n(),o(2,"button",49),h("click",function(){u(e);let t=p().$implicit,d=p(3);return f(d.toggleModal("show-applicants",t))}),s(3," Applicant list "),n()}}function Ti(i,m){if(i&1&&(o(0,"span",47),s(1),n()),i&2){let e=p().$implicit;a(),b(e.date_published?"No applicants":"Unpublished")}}function ki(i,m){if(i&1){let e=x();o(0,"tr",39)(1,"td",40),h("click",function(){let t=u(e).$implicit,d=p(3);return f(d.toggleModal("show-posting",t))}),o(2,"div",41)(3,"span",42),s(4),n()(),o(5,"div",43)(6,"span",44),s(7),n(),c(8,"br"),o(9,"span",5),s(10),n()()(),o(11,"td",45),s(12),ue(13,"date"),c(14,"br"),s(15),ue(16,"date"),n(),o(17,"td",45),s(18),n(),o(19,"td",45),s(20),n(),o(21,"td",46),_(22,Ii,4,0)(23,Ti,2,1,"span",47),n()()}if(i&2){let e=m.$implicit;l("ngClass",Ae(17,Ci,e.post_closed_flag===1)),a(4),M("",e.title[0]," "),a(3),I("",e.title," ",e.post_closed_flag===1?"(closed)":"",""),a(3),b(e.lib_posting_category_id===1?"Part-time job":"Scholarship"),a(2),M(" ",e.date_published?fe(13,11,e.date_published,"MMM dd, yyyy"):"-"," "),a(3),M(" ",fe(16,14,e.date_end,"MMM dd, yyyy")," "),a(3),b(e.posting_applications_count),a(2),I("",e.posting_approved_applications_count,"/",e.slot,""),a(2),D(e.applicants.length>0?22:23)}}function Li(i,m){i&1&&(o(0,"tr")(1,"td",50),s(2," No records found... "),n()())}function Vi(i,m){if(i&1&&(o(0,"tbody"),_(1,ki,24,19,"tr",38)(2,Li,3,0,"tr",6),n()),i&2){let e=p(2);a(),l("ngForOf",e.postList),a(),l("ngIf",e.postList.length===0)}}function Fi(i,m){if(i&1&&(o(0,"div",51)(1,"div",52),c(2,"fa-icon",53),n(),o(3,"div",54),s(4," Loading list... "),n()()),i&2){let e=p(2);a(2),l("icon",e.faCircleNotch)}}function Ai(i,m){if(i&1){let e=x();o(0,"app-page-controller",55),h("movePage",function(t){u(e);let d=p(2);return f(d.loadList(t))}),n()}if(i&2){let e=p(2);l("meta",e.meta)}}function Di(i,m){if(i&1){let e=x();o(0,"div",11)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"label",15),s(6,"Search"),n(),o(7,"input",16),w("ngModelChange",function(t){u(e);let d=p();return C(d.searchTerm,t)||(d.searchTerm=t),f(t)}),n()(),o(8,"div")(9,"label",15),s(10,"Municipality"),n(),o(11,"select",17),w("ngModelChange",function(t){u(e);let d=p();return C(d.municipality_code,t)||(d.municipality_code=t),f(t)}),o(12,"option",18),s(13,"All"),n(),_(14,Si,2,2,"option",19),n()(),o(15,"div")(16,"label",15),s(17,"Slots"),n(),o(18,"select",17),w("ngModelChange",function(t){u(e);let d=p();return C(d.slots_filled,t)||(d.slots_filled=t),f(t)}),o(19,"option",18),s(20,"All"),n(),_(21,Mi,2,2,"option",19),n()()(),o(22,"div",20)(23,"div")(24,"label",21),s(25,"Category"),n(),o(26,"select",17),w("ngModelChange",function(t){u(e);let d=p();return C(d.category,t)||(d.category=t),f(t)}),o(27,"option",18),s(28,"All"),n(),_(29,Ei,2,2,"option",19),n()(),o(30,"div")(31,"label",22),s(32,"Published"),n(),o(33,"select",17),w("ngModelChange",function(t){u(e);let d=p();return C(d.is_published,t)||(d.is_published=t),f(t)}),o(34,"option",18),s(35,"All"),n(),_(36,Pi,2,2,"option",19),n()(),o(37,"div")(38,"label",22),s(39,"Date"),n(),o(40,"input",23),w("ngModelChange",function(t){u(e);let d=p();return C(d.start_date,t)||(d.start_date=t),f(t)}),n()(),o(41,"div")(42,"label",24),s(43,"to"),n(),o(44,"input",23),w("ngModelChange",function(t){u(e);let d=p();return C(d.end_date,t)||(d.end_date=t),f(t)}),n()()(),o(45,"div",25)(46,"button",26),h("click",function(){u(e);let t=p();return f(t.loadList())}),c(47,"fa-icon",27),o(48,"span",28),s(49,"Apply Filter"),n()()()()(),o(50,"div",29)(51,"table",30)(52,"thead")(53,"tr")(54,"th",31),s(55,"Title"),n(),o(56,"th",32),s(57," Date Published "),c(58,"br"),s(59," Deadline date "),n(),o(60,"th",33),s(61,"Applicant "),c(62,"br"),s(63,"Count"),n(),o(64,"th",32),s(65,"Slots"),n(),o(66,"th",34),s(67,"Actions"),n()()(),_(68,Vi,3,2,"tbody",6),n(),_(69,Fi,5,1,"div",35),n(),_(70,Ai,1,1,"app-page-controller",36),n()}if(i&2){let e=p();a(7),y("ngModel",e.searchTerm),a(4),y("ngModel",e.municipality_code),a(),l("ngValue",null),a(2),l("ngForOf",e.municipalities),a(4),y("ngModel",e.slots_filled),a(),l("ngValue",null),a(2),l("ngForOf",e.filledSlotList),a(5),y("ngModel",e.category),a(),l("ngValue",null),a(2),l("ngForOf",e.categoryList),a(4),y("ngModel",e.is_published),a(),l("ngValue",null),a(2),l("ngForOf",e.publishedList),a(4),l("max",e.max_date),y("ngModel",e.start_date),a(4),l("max",e.max_date),y("ngModel",e.end_date),a(3),l("icon",e.faFilter),a(21),l("ngIf",!e.isLoading),a(),l("ngIf",e.isLoading),a(),l("ngIf",e.postList.length>0)}}function ji(i,m){if(i&1){let e=x();o(0,"app-messaging",56),h("toggleModal",function(){u(e);let t=p();return f(t.toggleModal("show-messaging"))}),n()}if(i&2){let e=p();l("selected_posting",e.selected_posting)}}function Ni(i,m){if(i&1){let e=x();o(0,"app-applicant-list",56),h("toggleModal",function(){u(e);let t=p();return f(t.toggleModal("show-applicants"))}),n()}if(i&2){let e=p();l("selected_posting",e.selected_posting)}}function Wi(i,m){if(i&1){let e=x();o(0,"app-posting-page",56),h("toggleModal",function(){u(e);let t=p();return f(t.toggleModal("show-posting"))}),n()}if(i&2){let e=p();l("selected_posting",e.selected_posting)}}var ct=(()=>{class i{toggleMessaging(e){this.showMessaging=!this.showMessaging}toggleApplicants(e){this.selected_posting=e,this.showApplicants=!this.showApplicants}toggleModal(e,r){this.selected_posting=r,this.modals[e]=!this.modals[e],e!=="show-email"&&e!=="show-sms"&&(this.modals["show-posting"]===!1?(this.router.navigate(["/admin/dashboard"]),this.loadList()):this.loadList())}togglePosting(e){this.showPostingComponent=!this.showPostingComponent}loadLibraries(){this.http.get("psgc/provinces/0306900000",{params:{include:"municipalities"}}).subscribe({next:e=>{this.municipalities=e.data.municipalities,this.loadList(1,!0)},error:e=>console.log(e)})}loadList(e,r){this.isLoading=!0;let t={};t.page=e??1,t.include="applicants",t.per_page=10,this.start_date&&(t.start_date=this.start_date),this.end_date&&(t.end_date=this.end_date),this.category&&(t.lib_posting_category_id=this.category),this.is_published&&(t.is_published=this.is_published),this.searchTerm&&(t.search=this.searchTerm),this.municipality_code&&(t.municipality_code=this.municipality_code),this.slots_filled&&(t.slots_filled=this.slots_filled),this.http.get("posting-information",{params:t}).subscribe({next:d=>{console.log(d),this.postList=d.data,this.meta=d.meta,this.isLoading=!1,this.modals["show-posting"]||this.checkUrlParams()},error:d=>console.log(d)})}checkUrlParams(){this.route.queryParams.subscribe(e=>{console.log(e),console.log(e.create_post),this.modals["show-posting"]=e.create_post==="true"})}getAllData(){let e={};e.include="applicants",e.per_page=10,this.start_date&&(e.start_date=this.start_date),this.end_date&&(e.end_date=this.end_date),this.category&&(e.lib_posting_category_id=this.category),this.is_published&&(e.is_published=this.is_published),this.allPostingArray=[];let r=t=>{e.page=t,this.http.get("posting-information",{params:e}).subscribe({next:d=>{let g=d.data.map(v=>({title:v.title,address:v.address,applied_slot:v.posting_applications_count,slot:v.slot,date_published:v.date_published,date_end:v.date_end}));this.allPostingArray.push(...g),t<d.meta.last_page?r(t+1):this.exportToExcel(this.allPostingArray)},error:d=>console.log(d)})};r(1)}exportToExcel(e){let t={Sheets:{data:se.json_to_sheet(e)},SheetNames:["data"]},d=le(t,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(d,"posting_list")}saveAsExcelFile(e,r){let t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",d=new Blob([e],{type:t});(0,mt.saveAs)(d,`${r}.xlsx`)}constructor(e,r,t){this.http=e,this.route=r,this.router=t,this.faFilter=ie,this.faEllipsis=$e,this.faPaperPlane=oe,this.faArrowLeft=O,this.faPenToSquare=Je,this.faCircleNotch=W,this.faSave=z,this.faPrint=tt,this.faFileExcel=ne,this.max_date=B(new Date,"yyyy-MM-dd","en","Asia/manila"),this.showMessaging=!1,this.showApplicants=!1,this.showPostingComponent=!1,this.isLoading=!1,this.postList=[],this.applicantList=[],this.modals=[],this.categoryList=[{title:"Part-time Jobs",id:"1"},{title:"Scholarships",id:"2"}],this.publishedList=[{title:"Published",id:"published"},{title:"Unpublished",id:"unpublished"}],this.filledSlotList=[{name:"Filled",code:"filled"},{name:"With Vacant",code:"unfilled"}],this.editorContent="",this.submittedContent="",this.editorConfig={toolbar:[["bold","italic","underline"],[{indent:"-1"},{indent:"+1"}],[{list:"ordered"},{list:"bullet"}]]},this.municipalities=[],this.navigationEnd$=this.router.events.pipe(we(d=>d instanceof Ne),Se(()=>{this.modals["show-posting"],localStorage.getItem("access_token")&&this.loadList()}))}ngOnInit(){this.loadLibraries(),this.navigationEnd$.subscribe()}static{this.\u0275fac=function(r){return new(r||i)(E(V),E(We),E(Oe))}}static{this.\u0275cmp=P({type:i,selectors:[["app-dashboard"]],decls:13,vars:5,consts:[[1,"flex","flex-col","w-full","px-5","overflow-y-auto"],[1,"flex","flex-col","min-h-screen"],[1,"flex","justify-between"],[1,"my-3","flex","flex-col"],[1,"font-bold","text-2xl","text-blue-600"],[1,"text-sm"],[4,"ngIf"],["class","bg-white w-full",4,"ngIf"],[3,"selected_posting","toggleModal",4,"ngIf"],[1,"btn-blue-nr","my-3","px-2",3,"click"],[3,"icon"],[1,"bg-white","w-full"],[1,"flex","flex-col","m-3","px-2","bg-gray-200","text-xs","rounded-md"],[1,"grid","grid-cols-4","pt-2","gap-4"],[1,"col-span-2"],[1,"pt-1","mr-4"],["type","text","placeholder","Search Posting",1,"input-txt","placeholder:italic",3,"ngModelChange","ngModel"],[1,"input-txt",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-4","gap-4","py-2"],[1,"pt-1","mr-1"],[1,"pt-1","ml-2","mr-1"],["type","date",1,"input-txt",3,"ngModelChange","max","ngModel"],[1,"pt-1","mx-1"],[1,"flex","justify-end","mb-3","text-sm"],[1,"mt-1","bg-blue-600","rounded-md","px-2","text-white","hover:opacity-75","py-1",3,"click"],[1,"pr-1",3,"icon"],[1,"text-xs","ml-1"],[1,"flex","flex-col","w-full","bg-white","p-3"],[1,"table-auto"],[1,"w-4/12"],[1,"w-2/12"],[1,"w-1/12"],[1,"w-3/12"],["class","flex flex-col w-full my-20",4,"ngIf"],[3,"meta","movePage",4,"ngIf"],[3,"value"],["class","hover:bg-sky-100 select-none",3,"ngClass",4,"ngFor","ngForOf"],[1,"hover:bg-sky-100","select-none",3,"ngClass"],[1,"flex","flex-row","hover:cursor-pointer",3,"click"],[1,"mt-2","mr-3","name-icon-nr","hover:opacity-75"],[1,"font-medium","text-gray-900","text-sm","xl:text-lg","select-none","capitalize"],[1,"w-10/12"],[1,"text-lg","font-semibold","capitalize"],[1,"text-center","text-sm"],[1,"text-center","text-xs"],[1,"italic"],[1,"px-3","py-1","rounded-md","bg-gray-300","mr-2","hover:opacity-75",3,"click"],[1,"px-3","py-1","rounded-md","bg-blue-300","hover:opacity-75",3,"click"],["colspan","4",1,"text-center","italic"],[1,"flex","flex-col","w-full","my-20"],[1,"flex","justify-center","text-blue-500"],["animation","spin",3,"icon"],[1,"flex","justify-center"],[3,"movePage","meta"],[3,"toggleModal","selected_posting"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),s(5," Posting | Communicate "),n(),o(6,"span",5),s(7," Manage Posts and Send Messages "),n()(),_(8,wi,4,1,"div",6),n(),_(9,Di,71,21,"div",7)(10,ji,1,1,"app-messaging",8)(11,Ni,1,1,"app-applicant-list",8)(12,Wi,1,1,"app-posting-page",8),n()()),r&2&&(a(8),l("ngIf",!t.modals["show-email"]&&!t.modals["show-applicants"]&&!t.modals["show-posting"]),a(),l("ngIf",!t.modals["show-messaging"]&&!t.modals["show-applicants"]&&!t.modals["show-posting"]),a(),l("ngIf",t.modals["show-messaging"]),a(),l("ngIf",t.modals["show-applicants"]),a(),l("ngIf",t.modals["show-posting"]))},dependencies:[$,q,j,L,X,G,N,U,T,k,Q,_e,pt,dt,je],styles:["td[_ngcontent-%COMP%]{padding:5px}th[_ngcontent-%COMP%]{padding:10px 0}"]})}}return i})();var Oi=[{path:"",component:ct}],_t=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=K({type:i})}static{this.\u0275inj=J({imports:[he.forChild(Oi),he]})}}return i})();var Qn=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=K({type:i})}static{this.\u0275inj=J({imports:[ee,_t,Y,at.forRoot(),pe,R,re,te,Q,ae,_e]})}}return i})();export{Qn as DashboardModule};
