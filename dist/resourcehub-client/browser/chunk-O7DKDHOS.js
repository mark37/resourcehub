import{a as X}from"./chunk-QYWSPK3A.js";import{f as A,j as V,x as j}from"./chunk-POSQ46WM.js";import{a as q}from"./chunk-EDMWRYVU.js";import{Ab as N,Ba as y,Ca as S,Da as k,E as C,Fa as I,Hb as U,K as _,Kb as z,L as f,P as b,Va as D,Wb as W,X as s,Y as g,Ya as P,_a as T,aa as m,ca as n,cc as B,dc as O,fa as w,gb as E,ja as r,ka as a,kb as M,la as p,ma as u,na as x,oa as o,ob as F,pb as L,va as d,xa as h}from"./chunk-7PEPAECK.js";function Y(e,c){if(e&1){let t=u();r(0,"div")(1,"button",9),x("click",function(){_(t);let i=o();return f(i.closeModal())}),p(2,"fa-icon",10),d(3," Back "),a()()}if(e&2){let t=o();s(2),n("icon",t.faArrowLeft)}}function H(e,c){if(e&1){let t=u();r(0,"div",15)(1,"quill-editor",16),k("ngModelChange",function(i){_(t);let v=o(2);return S(v.selected_posting.description,i)||(v.selected_posting.description=i),f(i)}),a()()}if(e&2){let t=o(2);s(),y("ngModel",t.selected_posting.description),n("modules",t.editorConfig)}}function Q(e,c){if(e&1&&p(0,"fa-icon",23),e&2){let t=o(3);n("icon",t.faCircleNotch)}}function R(e,c){if(e&1){let t=u();r(0,"div",17)(1,"div",18),d(2),p(3,"br"),d(4),a(),r(5,"div",19)(6,"button",20),x("click",function(){_(t);let i=o(2);return f(i.toggleConfirmation())}),d(7," Cancel "),a(),r(8,"button",21),x("click",function(){_(t);let i=o(2);return f(i.onSubmit(!0))}),m(9,Q,1,1,"fa-icon",22),d(10," Apply "),a()()()}if(e&2){let t=o(2);s(2),h(" You are applying to ",t.selected_posting.title,". "),s(2),h(" Are you sure you want to apply to this ",t.selected_posting.lib_posting_category_id==="1"?"job":"scholarship"," posting? "),s(4),n("disabled",t.is_saving),s(),n("ngIf",t.is_saving)}}function G(e,c){if(e&1){let t=u();r(0,"div",24)(1,"div",25),p(2,"fa-icon",10)(3,"br"),a(),r(4,"div",26),d(5," Application Submitted! "),a(),r(6,"div",27),d(7," We've received your application and will be processed. Expect an update via SMS within 3-5 business days. Please check your registered email for more details upon receiving the text. Thank You! "),a(),r(8,"div",18)(9,"button",28),x("click",function(){_(t);let i=o(2);return f(i.closeModal())}),d(10," Back "),a()()()}if(e&2){let t=o(2);s(2),n("icon",t.faCircleCheck)}}function J(e,c){if(e&1&&(r(0,"div",11),m(1,H,2,2,"div",12)(2,R,11,4,"div",13)(3,G,11,1,"div",14),a()),e&2){let t=o();s(),n("ngIf",!t.showConfirmation&&!t.showSuccessfullApplication),s(),n("ngIf",t.showConfirmation&&!t.showSuccessfullApplication),s(),n("ngIf",t.showSuccessfullApplication&&!t.showConfirmation)}}function K(e,c){if(e&1){let t=u();r(0,"button",32),x("click",function(){_(t);let i=o(3);return f(i.toggleConfirmation())}),p(1,"fa-icon",10),d(2," Apply now "),a()}if(e&2){let t=o(3);s(),n("icon",t.faFileLines)}}function Z(e,c){if(e&1&&m(0,K,3,1,"button",31),e&2){let t=o(2);n("ngIf",t.withUserEducation)}}function $(e,c){}function tt(e,c){if(e&1&&p(0,"fa-icon",23),e&2){let t=o(4);n("icon",t.faCircleNotch)}}function et(e,c){if(e&1&&p(0,"fa-icon",10),e&2){let t=o(4);n("icon",t.faSave)}}function it(e,c){if(e&1){let t=u();r(0,"button",34),x("click",function(){_(t);let i=o(3);return f(i.onSubmit())}),m(1,tt,1,1,"fa-icon",22)(2,et,1,1,"fa-icon",35),d(3," Save post "),a()}if(e&2){let t=o(3);n("disabled",t.is_saving),s(),n("ngIf",t.is_saving),s(),n("ngIf",!t.is_saving)}}function nt(e,c){if(e&1){let t=u();m(0,it,4,3,"button",33),r(1,"button",32),x("click",function(){_(t);let i=o(2);return f(i.isAuthenticated?i.toggleConfirmation():i.navigateTo())}),p(2,"fa-icon",10),d(3," Apply now "),a()}if(e&2){let t=o(2);n("ngIf",t.isAuthenticated),s(2),n("icon",t.faFileLines)}}function ot(e,c){if(e&1&&(r(0,"div",29),m(1,Z,1,1,"button",30)(2,$,0,0)(3,nt,4,2),a()),e&2){let t=o();s(),w(t.selected_posting.applicants&&t.selected_posting.applicants.length>0&&(!t.selected_posting.applicants[0].is_applied||t.selected_posting.applicants[0].is_applied===0)?1:t.selected_posting.applicants&&t.selected_posting.applicants.length>0&&t.selected_posting.applicants[0].is_applied===1?2:3)}}var bt=(()=>{class e{navigateTo(){this.router.navigate(["login"])}toggleConfirmation(){this.showConfirmation=!this.showConfirmation}onSubmit(t){this.is_saving=!0;let l={};l.posting_id=this.selected_posting.id,t&&(l.is_applied=1,l.date_applied=D(new Date,"yyyy-MM-dd","en","Asia/manila")),this.http.post("posting-application",l).subscribe({next:()=>{this.is_saving=!1,this.showConfirmation=!1,t?(this.showSuccessfullApplication=!0,this.closeModal()):this.closeModal()},error:i=>console.log(i)})}closeModal(){this.toggleModal.emit()}loadUserInformation(t){let l={user_info:1};this.http.get("user-information",{params:l}).subscribe({next:i=>{this.withUserEducation=i.data[0].user_education.length>0,this.show_form=!0},error:i=>console.log(i)})}constructor(t,l,i){this.http=t,this.sanitizer=l,this.router=i,this.toggleModal=new b,this.faSave=U,this.faFileLines=F,this.faArrowLeft=z,this.faXmark=W,this.faCircleCheck=N,this.faCircleNotch=L,this.showConfirmation=!1,this.showSuccessfullApplication=!1,this.editorConfig={toolbar:[]},this.is_saving=!1,this.withUserEducation=!1,this.show_form=!1}ngOnInit(){this.isAuthenticated=!!localStorage.getItem("access_token"),this.isAuthenticated&&this.loadUserInformation(),this.isAuthenticated||(this.show_form=!0),console.log(this.selected_posting)}static{this.\u0275fac=function(l){return new(l||e)(g(q),g(E),g(M))}}static{this.\u0275cmp=C({type:e,selectors:[["app-post-details"]],inputs:{selected_posting:"selected_posting",isAuthenticated:"isAuthenticated"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[I],decls:11,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","py-3","px-5","text-blue-600"],[4,"ngIf"],[1,"my-2","md:text-2xl","font-bold","text-gray-800"],["class","overflow-y-auto min-h-[300px] max-h-[620px] scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100 px-5 pb-5 flex flex-col md:flex-row",4,"ngIf"],["class","flex justify-center py-2 px-5 space-x-4 rounded-b border-t border-gray-200",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"mt-3",3,"click"],[3,"icon"],[1,"overflow-y-auto","min-h-[300px]","max-h-[620px]","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100","px-5","pb-5","flex","flex-col","md:flex-row"],["class","w-full",4,"ngIf"],["class","flex flex-col w-full my-auto",4,"ngIf"],["class","flex flex-col w-2/5 mx-auto",4,"ngIf"],[1,"w-full"],["disabled","",1,"h-96","w-full","rounded","hover:cursor-default",3,"ngModelChange","ngModel","modules"],[1,"flex","flex-col","w-full","my-auto"],[1,"flex","justify-center"],[1,"flex","justify-center","mt-5"],[1,"btn-blue","bg-gray-400","mr-3",3,"click"],[1,"btn-blue",3,"click","disabled"],["animation","spin",3,"icon",4,"ngIf"],["animation","spin",3,"icon"],[1,"flex","flex-col","w-2/5","mx-auto"],[1,"flex","justify-center","text-blue-500","text-4xl"],[1,"flex","justify-center","text-xl","text-blue-600","font-semibold"],[1,"flex","justify-center","text-justify","text-sm","my-5"],[1,"btn-blue-nr","w-full",3,"click"],[1,"flex","justify-center","py-2","px-5","space-x-4","rounded-b","border-t","border-gray-200"],[1,"btn-blue"],["class","btn-blue",3,"click",4,"ngIf"],[1,"btn-blue",3,"click"],["class","btn-blue bg-orange-500",3,"disabled","click",4,"ngIf"],[1,"btn-blue","bg-orange-500",3,"click","disabled"],[3,"icon",4,"ngIf"]],template:function(l,i){l&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,Y,4,1,"div",4),r(5,"h3",5),d(6),a(),p(7,"div"),a(),m(8,J,4,3,"div",6)(9,ot,4,1,"div",7),a()()(),p(10,"div",8)),l&2&&(s(4),n("ngIf",!i.showConfirmation),s(2),h(" ",i.selected_posting.title," "),s(2),n("ngIf",i.show_form),s(),n("ngIf",i.show_form&&!i.showConfirmation&&!i.showSuccessfullApplication))},dependencies:[T,P,j,A,V,O,B,X]})}}return e})();export{bt as a};
